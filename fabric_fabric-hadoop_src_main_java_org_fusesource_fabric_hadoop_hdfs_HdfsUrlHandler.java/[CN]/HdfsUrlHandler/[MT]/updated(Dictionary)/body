{
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(getClass().getClassLoader());
    Configuration conf=new Configuration();
    if (properties != null) {
      for (Enumeration e=properties.keys(); e.hasMoreElements(); ) {
        Object key=e.nextElement();
        Object val=properties.get(key);
        conf.set(key.toString(),val.toString());
      }
    }
    this.conf=conf;
  }
  finally {
    Thread.currentThread().setContextClassLoader(tccl);
  }
}
