{
  assertValid();
  Git git=gitService.getGit();
  ProfileRegistry profileRegistry=getFabricService().adapt(ProfileRegistry.class);
  SortedSet<String> answer=new TreeSet<String>();
  for (  String profileId : profileIds) {
    profileRegistry.getRequiredProfile(versionId,profileId);
    File profileDirectory=GitHelpers.getProfileDirectory(git,profileId);
    File file=Strings.isNotBlank(path) ? new File(profileDirectory,path) : profileDirectory;
    if (file.exists()) {
      String[] values=file.list();
      if (values != null) {
        for (        String value : values) {
          answer.add(value);
        }
      }
    }
  }
  return Collections.unmodifiableSet(answer);
}
