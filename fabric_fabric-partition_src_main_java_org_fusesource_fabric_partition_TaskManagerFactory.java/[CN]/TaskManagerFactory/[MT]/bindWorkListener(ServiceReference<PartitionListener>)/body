{
  PartitionListener partitionListener=bundleContext.getService(reference);
  if (partitionListener != null) {
    partitionListeners.put(partitionListener.getType(),partitionListener);
    for (    String pid : waitingOnListener.get(partitionListener.getType())) {
      try {
        updated(pid,pendingPids.remove(pid));
      }
 catch (      ConfigurationException e) {
        Throwables.propagate(e);
      }
    }
  }
}
