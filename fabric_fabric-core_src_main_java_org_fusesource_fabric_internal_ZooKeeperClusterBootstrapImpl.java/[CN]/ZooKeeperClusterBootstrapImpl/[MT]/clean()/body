{
  assertValid();
  try {
    BundleContext bundleContext=getBundleContext();
    Bundle bundleFabricZooKeeper=installOrStopBundle(bundleContext,"org.fusesource.fabric.fabric-zookeeper","mvn:org.fusesource.fabric/fabric-zookeeper/" + FabricConstants.FABRIC_VERSION);
    for (; ; ) {
      Configuration[] configs=configAdmin.get().listConfigurations("(|(service.factoryPid=org.fusesource.fabric.zookeeper.server)(service.pid=org.fusesource.fabric.zookeeper))");
      if (configs != null && configs.length > 0) {
        for (        Configuration config : configs) {
          config.delete();
        }
        Thread.sleep(100);
      }
 else {
        break;
      }
    }
    File zkDir=new File("data/zookeeper");
    if (zkDir.isDirectory()) {
      File newZkDir=new File("data/zookeeper." + System.currentTimeMillis());
      if (!zkDir.renameTo(newZkDir)) {
        newZkDir=zkDir;
      }
      delete(newZkDir);
    }
    bundleFabricZooKeeper.start();
  }
 catch (  Exception e) {
    throw new FabricException("Unable to delete zookeeper configuration",e);
  }
}
