{
  Map<String,Map<String,Feature>> features=new HashMap<String,Map<String,Feature>>();
  for (  Repository repo : repositories) {
    try {
      for (      Feature f : repo.getFeatures()) {
        if (features.get(f.getName()) == null) {
          Map<String,Feature> versionMap=new TreeMap<String,Feature>();
          versionMap.put(f.getVersion(),f);
          features.put(f.getName(),versionMap);
        }
 else {
          features.get(f.getName()).put(f.getVersion(),f);
        }
      }
    }
 catch (    Exception ex) {
      LOGGER.debug("Could not load features from %s.",repo.getURI());
    }
  }
  return features;
}
