{
  addPackages(tree);
  List<DependencyTree> children=tree.getChildren();
  for (  DependencyTree child : children) {
    if (excludePackageFilter.matches(child)) {
      LOG.debug("Excluded dependency: " + child.getDependencyId());
      continue;
    }
 else     if (excludeOptionalFilter.matches(child)) {
      addOptionalDependency(child);
      continue;
    }
 else     if (sharedFilter.matches(child) || requireBundleFilter.matches(child)) {
      addSharedDependency(child);
    }
 else {
      LOG.debug("Added non-shared dependency: " + tree.getDependencyId());
      nonSharedDependencies.add(child);
      addDependencies(child);
    }
  }
}
