{
  VersionedDependencyId id=new VersionedDependencyId(model);
  try {
    Properties moduleProperties=new Properties();
    for (    String key : FAB_MODULE_PROPERTIES) {
      String value=getManfiestProperty("Fabric-" + key);
      if (Strings.notEmpty(value)) {
        moduleProperties.setProperty(key,value);
      }
    }
    if (!moduleProperties.containsKey(FAB_MODULE_ID)) {
      moduleProperties.setProperty(FAB_MODULE_ID,id.toString());
    }
    if (!moduleProperties.containsKey(FAB_MODULE_NAME)) {
      moduleProperties.setProperty(FAB_MODULE_NAME,model.getArtifactId());
    }
    if (!moduleProperties.containsKey(FAB_MODULE_DESCRIPTION)) {
      moduleProperties.setProperty(FAB_MODULE_NAME,model.getDescription());
    }
    descriptor=ModuleDescriptor.fromProperties(moduleProperties);
    for (    VersionedDependencyId ext : descriptor.getEndorsedExtensions()) {
      if (moduleRegistry.getVersionedModule(ext) == null) {
      }
    }
  }
 catch (  Exception e) {
    System.err.println("Failed to register the fabric module for: " + id);
    e.printStackTrace();
    ;
  }
}
