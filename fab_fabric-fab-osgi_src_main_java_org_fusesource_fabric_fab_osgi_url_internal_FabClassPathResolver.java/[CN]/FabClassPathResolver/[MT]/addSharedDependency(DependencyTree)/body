{
  addPackages(tree);
  sharedDependencies.add(tree);
  if (connection.isIncludeSharedResources()) {
    includeSharedResources(tree);
  }
  List<DependencyTree> list=tree.getDescendants();
  for (  DependencyTree child : list) {
    if (excludePackageFilter.matches(child)) {
      LOG.debug("Excluded transitive dependency: " + child);
      continue;
    }
 else     if (excludeOptionalFilter.matches(child)) {
      LOG.debug("Excluded optional transitive dependency: " + child);
      continue;
    }
 else {
      sharedDependencies.add(child);
    }
  }
  addInstallDependencies(tree);
}
