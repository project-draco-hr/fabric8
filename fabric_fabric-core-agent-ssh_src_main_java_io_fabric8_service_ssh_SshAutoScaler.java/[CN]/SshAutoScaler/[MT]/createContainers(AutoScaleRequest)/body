{
  int count=request.getDelta();
  String profile=request.getProfile();
  String version=request.getVersion();
  FabricService fabricService=request.getFabricService();
  Container[] containers=fabricService.getContainers();
  FabricRequirements requirements=request.getFabricRequirements();
  List<? extends HostConfiguration> hostConfigurations=requirements.getSshHosts();
  HostProfileCounter hostProfileCounter=new HostProfileCounter();
  AutoScalers.createHostToProfileScaleMap(hostProfileCounter,hostConfigurations,containers);
  for (int i=0; i < count; i++) {
    CreateSshContainerOptions.Builder builder=null;
    NameValidator nameValidator=Containers.createNameValidator(containers);
    String name=Containers.createContainerName(containers,profile,containerProvider.getScheme(),nameValidator);
    if (fabricService != null) {
      builder=createAutoScaleOptions(request,fabricService,hostProfileCounter);
    }
    if (builder != null) {
      final CreateSshContainerOptions.Builder configuredBuilder=builder.number(1).version(version).profiles(profile);
      CreateSshContainerOptions options=configuredBuilder.name(name).build();
      LOG.info("Creating container name " + name + " version "+ version+ " profile "+ profile+ " "+ count+ " container(s)");
      fabricService.createContainers(options);
    }
  }
}
