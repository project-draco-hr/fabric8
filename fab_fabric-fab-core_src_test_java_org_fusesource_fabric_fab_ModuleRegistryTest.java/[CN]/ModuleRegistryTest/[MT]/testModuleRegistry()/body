{
  ModuleRegistry registry=new ModuleRegistry();
  registry.add(loadModuleDescriptor("apollo-bdb.module"));
  registry.add(loadModuleDescriptor("apollo-broker.module"));
  registry.add(loadModuleDescriptor("apollo-cli.module"));
  registry.add(loadModuleDescriptor("apollo-jdbm2.module"));
  List<ModuleRegistry.Module> apps=registry.getApplicationModules();
  assertEquals(1,apps.size());
  ModuleRegistry.Module module=apps.get(0);
  assertEquals("apollo",module.getName());
  assertEquals(1,module.getVersions().size());
  ModuleRegistry.VersionedModule versionedModule=module.latest();
  VersionedDependencyId versionId=new VersionedDependencyId("org.apache.activemq","apollo-broker","1.0-SNAPSHOT",null,null);
  assertEquals(versionId,versionedModule.getId());
  assertEquals(3,versionedModule.getAvailableExtensions().size());
}
