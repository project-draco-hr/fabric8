{
  OsgiModuleRegistry registry=getModuleRegistry();
  List<ModuleRegistry.Module> modules=registry.getApplicationModules();
  Map<VersionedDependencyId,Bundle> installed=registry.getInstalled();
  Table table=new Table("{1} | {2} | {3} | {4}",3,-20,-10,-40);
  table.add("Id","Name","Version","Description");
  for (  ModuleRegistry.Module module : modules) {
    ModuleRegistry.VersionedModule latest=module.latest();
    HashSet<VersionedDependencyId> s=new HashSet<VersionedDependencyId>(module.getVersionIds());
    s.retainAll(installed.keySet());
    if (!s.isEmpty() && (name == null || module.getName().indexOf(name) >= 0)) {
      HashSet<Long> bundles=new HashSet<Long>();
      for (      VersionedDependencyId dependencyId : s) {
        bundles.add(installed.get(dependencyId).getBundleId());
      }
      table.add(Strings.join(bundles,", "),module.getName(),latest.getId().getVersion(),latest.getDescription());
    }
  }
  table.print(System.out);
  return null;
}
