{
  JarOutputStream zos=new JarOutputStream(os);
  zos.setLevel(Deflater.NO_COMPRESSION);
  String path="";
  File manFile=new File(directory,JarFile.MANIFEST_NAME);
  if (manFile.exists()) {
    byte[] readBuffer=new byte[8192];
    FileInputStream fis=new FileInputStream(manFile);
    try {
      ZipEntry anEntry=new ZipEntry(JarFile.MANIFEST_NAME);
      zos.putNextEntry(anEntry);
      int bytesIn=fis.read(readBuffer);
      while (bytesIn != -1) {
        zos.write(readBuffer,0,bytesIn);
        bytesIn=fis.read(readBuffer);
      }
    }
  finally {
      fis.close();
    }
    zos.closeEntry();
  }
  zipDir(directory,zos,path,Collections.singleton(JarFile.MANIFEST_NAME));
  zos.close();
}
