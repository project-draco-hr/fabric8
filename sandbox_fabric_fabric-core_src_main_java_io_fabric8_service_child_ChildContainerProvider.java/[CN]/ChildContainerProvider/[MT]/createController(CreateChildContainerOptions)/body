{
  ChildContainerController answer=null;
  boolean isJavaContainer=ChildContainers.isJavaContainer(getFabricService(),options);
  boolean isProcessContainer=ChildContainers.isProcessContainer(getFabricService(),options);
  ProcessControllerFactory factory=processControllerFactory.getOptional();
  if (factory != null) {
    answer=factory.createController(options);
  }
 else   if (isJavaContainer || isProcessContainer) {
    throw new Exception("No ProcessControllerFactory is available to create a ProcessManager based child container");
  }
  if (answer == null) {
    answer=createKarafContainerController();
  }
  LOG.info("Using container controller " + answer);
  return answer;
}
