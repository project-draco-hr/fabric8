{
  FabricService fabricService=getFabricService();
  assertNotNull(fabricService);
  IZKClient zookeeer=getZookeeper();
  zookeeer.waitForConnected(new Timespan(60,Timespan.TimeUnit.SECOND));
  Provision.waitForContainerAlive(Arrays.<Container>asList(new ContainerImpl(null,"root",(FabricServiceImpl)fabricService)),PROVISION_TIMEOUT);
  Container[] containers=fabricService.getContainers();
  assertNotNull(containers);
  assertEquals("Expected to find 1 container",1,containers.length);
  assertEquals("Expected to find the root container","root",containers[0].getId());
  ConfigurationAdmin configurationAdmin=getOsgiService(ConfigurationAdmin.class);
  org.osgi.service.cm.Configuration configuration=configurationAdmin.getConfiguration("org.fusesource.fabric.zookeeper");
  Dictionary<String,Object> dictionary=configuration.getProperties();
  assertNotNull("Expected a generated zookeeper password",dictionary.get("zookeeper.password"));
}
