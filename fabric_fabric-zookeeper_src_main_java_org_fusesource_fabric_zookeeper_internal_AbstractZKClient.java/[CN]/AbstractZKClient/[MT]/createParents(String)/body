{
  path=PathUtils.getParentPath(adjustPath(path));
  path=PathUtils.removeTrailingSlash(path);
  List<String> paths=new ArrayList<String>();
  while (!path.equals("") && getZk().exists(path,false) == null) {
    paths.add(path);
    path=PathUtils.getParentPath(path);
    path=PathUtils.removeTrailingSlash(path);
  }
  Collections.reverse(paths);
  for (  String p : paths) {
    try {
      getZk().create(p,null,getNodeACLs(p),CreateMode.PERSISTENT);
    }
 catch (    KeeperException.NodeExistsException e) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("parent already exists " + p);
      }
    }
  }
}
