{
  Map<Object,Boolean> newHistory=new IdentityHashMap<Object,Boolean>();
  for (  LifecycleListener listener : _listeners) {
    Boolean previousEvent=history.get(listener);
    if (previousEvent == null || previousEvent != connectedEvent) {
      try {
        if (connectedEvent) {
          listener.onConnected();
        }
 else {
          listener.onDisconnected();
        }
      }
 catch (      Throwable e) {
        LOG.warn("Exception while executing listener (ignored)",e);
      }
    }
    newHistory.put(listener,connectedEvent);
  }
  return newHistory;
}
