{
  String group=groupId(parser);
  String artifact=parser.getArtifact();
  String xpath="dependency[groupId = '" + group + "' and artifactId = '"+ artifact+ "'";
  String type=parser.getType();
  if (Strings.isNotBlank(type) && !Objects.equal("jar",type)) {
    xpath+=" and type='" + type + "'";
  }
  String classifier=parser.getClassifier();
  if (Strings.isNotBlank(classifier)) {
    xpath+=" and classifier='" + classifier + "'";
  }
  xpath+="]";
  String scope="provided";
  Element dependency=xpath(xpath).element(dependencies);
  if (dependency != null) {
    scope=xpath("scope").elementTextContent(dependency);
    detachElement(dependency);
  }
  dependency=createAndAppendChild(dependencies,"dependency",2);
  addMavenCoordinates(dependency,parser,3);
  if (Strings.isNotBlank(scope)) {
    createAndAppendChild(dependency,"scope",3,scope);
  }
}
