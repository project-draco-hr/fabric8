{
  Configuration configuration=new Configuration();
  try {
    if (map.containsKey(Constants.MASTER_URL)) {
      configuration.masterUrl=map.get(Constants.MASTER_URL);
    }
    if (map.containsKey(Constants.CONFIG_URL)) {
      configuration.configUrl=new URL(map.get(Constants.CONFIG_URL));
    }
 else     if (map.containsKey(Constants.CONFIG_FILE_NAME)) {
      configuration.configUrl=Configuration.class.getResource("/" + map.get(Constants.CONFIG_FILE_NAME));
    }
 else {
      configuration.configUrl=Configuration.class.getResource("/" + Constants.DEFAULT_CONFIG_FILE_NAME);
    }
    if (map.containsKey(Constants.TIMEOUT)) {
      configuration.timeout=Long.parseLong(map.get(Constants.TIMEOUT));
    }
    if (map.containsKey(Constants.POLL_INTERVAL)) {
      configuration.timeout=Long.parseLong(map.get(Constants.POLL_INTERVAL));
    }
  }
 catch (  Throwable t) {
    throw new RuntimeException(t);
  }
  return configuration;
}
