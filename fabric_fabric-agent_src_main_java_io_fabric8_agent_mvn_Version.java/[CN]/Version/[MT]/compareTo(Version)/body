{
  if (version == null) {
    return 1;
  }
  final VersionSegment[] otherSegments=version.getSegments();
  final int maxSegments=Math.max(m_segments.length,otherSegments.length);
  for (int i=0; i < maxSegments; i++) {
    VersionSegment thisSegment=new NullVersionSegment();
    if (i < m_segments.length) {
      thisSegment=m_segments[i];
    }
    VersionSegment otherSegment=new NullVersionSegment();
    if (i < otherSegments.length) {
      otherSegment=otherSegments[i];
    }
    int compResult=0;
    if (thisSegment.getClass().isAssignableFrom(otherSegment.getClass())) {
      compResult=thisSegment.compareTo(otherSegment);
    }
 else     if (thisSegment instanceof StringVersionSegment) {
      compResult=thisSegment.compareTo(new StringVersionSegment(otherSegment.toString()));
    }
 else     if (otherSegment instanceof StringVersionSegment) {
      compResult=new StringVersionSegment(thisSegment.toString()).compareTo(otherSegment);
    }
    if (compResult != 0) {
      return compResult;
    }
  }
  return 0;
}
