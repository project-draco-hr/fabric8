{
  if (error == null) {
    if (buff == null) {
      buff=event;
    }
 else {
      buff.appendBuffer(event);
    }
    try {
      T rc=read();
      while (rc != null) {
        codecHander.handle(rc);
        rc=read();
      }
    }
 catch (    Exception e) {
      LOG.debug("Protocol decoding failure: " + e,e);
      error=e.getMessage();
      errorHandler.handle(error);
    }
  }
}
