{
  File[] files=target.listFiles();
  assertNotNull("No files found in " + target,files);
  assertTrue("Should have more than one file inside dir: " + target,files.length > 0);
  File war=null;
  for (  File file : files) {
    if (file.getName().toLowerCase().endsWith(".war")) {
      war=file;
    }
  }
  assertNotNull("should have found a war!",war);
  System.out.println("Loading manifest of " + war.getCanonicalPath());
  ZipFile zip=new ZipFile(war);
  ZipEntry entry=zip.getEntry("META-INF/MANIFEST.MF");
  assertNotNull("No zip entry for manifest",entry);
  InputStream inputStream=zip.getInputStream(entry);
  assertNotNull("No zip stream for manifest",inputStream);
  ByteArrayOutputStream buffer=new ByteArrayOutputStream();
  IOUtils.copyStream(inputStream,buffer);
  String text=buffer.toString();
  System.out.println("Loaded manifest: " + text);
  Manifest manifest=new Manifest(new ByteArrayInputStream(buffer.toByteArray()));
  assertNotNull("should have a manifest in " + war,manifest);
  validateManifest(manifest);
}
