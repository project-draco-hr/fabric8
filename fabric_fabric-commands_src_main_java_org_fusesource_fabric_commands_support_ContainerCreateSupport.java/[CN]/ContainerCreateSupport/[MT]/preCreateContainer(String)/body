{
  Container existing=getContainer(name);
  if (existing != null) {
    throw new IllegalArgumentException("A container with name " + name + " already exists.");
  }
  Version ver=version != null ? fabricService.getVersion(version) : fabricService.getDefaultVersion();
  Profile[] profiles=ver.getProfiles();
  List<String> names=getProfileNames();
  for (  String profile : names) {
    if (!hasProfile(profiles,profile,ver)) {
      throw new IllegalArgumentException("Profile " + profile + " with version "+ ver.getName()+ " does not exist.");
    }
  }
}
