{
  try {
    DependencyDTO rootDependency=loadRootDependency();
    ProjectRequirements requirements=new ProjectRequirements();
    requirements.setRootDependency(rootDependency);
    configureRequirements(requirements);
    fabricServer=mavenSettings.getServer(fabricServerId);
    if (fabricServer == null) {
      String message="No <server> element can be found in ~/.m2/settings.xml for the server <id>" + fabricServerId + "</id> so we cannot connect to fabric8!\n\n"+ "Please add the following to your ~/.m2/settings.xml file (using the correct user/password values):\n\n"+ "<servers>\n"+ "  <server>\n"+ "    <id>"+ fabricServerId+ "</id>\n"+ "    <username>admin</username>\n"+ "    <password>admin</password>\n"+ "  </server>\n"+ "</servers>\n";
      getLog().error(message);
      throw new MojoExecutionException(message);
    }
    J4pClient client=createJolokiaClient();
    if (upload) {
      uploadDeploymentUnit(client);
    }
 else {
      getLog().info("Uploading to the fabric8 maven repository is disabled");
    }
    DeployResults results=uploadRequirements(client,requirements);
    if (results != null) {
      uploadProfileConfigurations(client,results);
    }
  }
 catch (  MojoExecutionException e) {
    throw e;
  }
catch (  Exception e) {
    throw new MojoExecutionException("Error executing",e);
  }
}
