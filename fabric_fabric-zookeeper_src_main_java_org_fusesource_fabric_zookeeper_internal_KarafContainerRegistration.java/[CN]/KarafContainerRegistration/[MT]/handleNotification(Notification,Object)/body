{
  logger.trace("handleNotification[{}]",notif);
  if (isConnected() && mbeanServer != null && notif instanceof MBeanServerNotification) {
    MBeanServerNotification notification=(MBeanServerNotification)notif;
    String domain=notification.getMBeanName().getDomain();
    String path=CONTAINER_DOMAIN.getPath((String)o,domain);
    try {
      if (MBeanServerNotification.REGISTRATION_NOTIFICATION.equals(notification.getType())) {
        if (domains.add(domain) && zooKeeper.exists(path) == null) {
          zooKeeper.createOrSetWithParents(path,"",ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
        }
      }
 else       if (MBeanServerNotification.UNREGISTRATION_NOTIFICATION.equals(notification.getType())) {
        domains.clear();
        domains.addAll(Arrays.asList(mbeanServer.getDomains()));
        if (!domains.contains(domain)) {
          zooKeeper.delete(path);
        }
      }
    }
 catch (    Exception e) {
      logger.warn("Exception while jmx domain synchronization from event: " + notif + ". This exception will be ignored.",e);
    }
  }
}
