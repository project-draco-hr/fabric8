{
  try {
    return (String)BeanProvider.getContextualReference((Class)String.class,Qualifiers.create(serviceId,serviceProtocol,servicePort,false,serviceExternal));
  }
 catch (  IllegalStateException e) {
    Producer<String> producer=ServiceUrlBean.anyBean(serviceId,serviceProtocol,servicePort,serviceExternal).getProducer();
    if (producer != null) {
      return ServiceUrlBean.anyBean(serviceId,serviceProtocol,servicePort,serviceExternal).getProducer().produce(context);
    }
 else {
      throw new IllegalStateException("Could not find producer for service:" + serviceId + " protocol:"+ serviceProtocol);
    }
  }
}
