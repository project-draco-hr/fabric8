{
  EPackage ePackage=(EPackage)EPackage.Registry.INSTANCE.get(nsURI);
  if (ePackage != null) {
    return ePackage;
  }
  if (nsURI.startsWith(eNS_URI + "/" + repository.getName())) {
    int prefixLength=eNS_URI.length() + repository.getName().length() + 2;
    String functionModuleName=nsURI.substring(prefixLength);
    JCoFunctionTemplate functionTemplate;
    try {
      functionTemplate=repository.getFunctionTemplate(functionModuleName);
    }
 catch (    JCoException e) {
      return null;
    }
    JCoListMetaData importParameterListMetaData=functionTemplate.getImportParameterList();
    JCoListMetaData changingParameterListMetaData=functionTemplate.getChangingParameterList();
    JCoListMetaData tableParameterListMetaData=functionTemplate.getTableParameterList();
    JCoListMetaData exportParameterListMetaData=functionTemplate.getExportParameterList();
    EcoreFactory ecoreFactory=EcoreFactory.eINSTANCE;
    ePackage=ecoreFactory.createEPackage();
    ePackage.setName(functionModuleName);
    ePackage.setNsPrefix(functionModuleName);
    ePackage.setNsURI(nsURI);
    EClass requestClass=ecoreFactory.createEClass();
    ePackage.getEClassifiers().add(requestClass);
    requestClass.setName("Request");
    requestClass.getESuperTypes().add(RfcPackage.eINSTANCE.getStructure());
    addListMetaData(requestClass,importParameterListMetaData);
    addListMetaData(requestClass,changingParameterListMetaData);
    addListMetaData(requestClass,tableParameterListMetaData);
    addAnnotation(requestClass,GenNS_URI,GenNS_DOCUMENTATION_KEY,"Request for " + functionModuleName);
    EClass responseClass=ecoreFactory.createEClass();
    ePackage.getEClassifiers().add(responseClass);
    responseClass.setName("Response");
    responseClass.getESuperTypes().add(RfcPackage.eINSTANCE.getStructure());
    addListMetaData(responseClass,exportParameterListMetaData);
    addListMetaData(responseClass,changingParameterListMetaData);
    addListMetaData(responseClass,tableParameterListMetaData);
    addAnnotation(responseClass,GenNS_URI,GenNS_DOCUMENTATION_KEY,"Response for " + functionModuleName);
    EPackage.Registry.INSTANCE.put(nsURI,ePackage);
  }
  return ePackage;
}
