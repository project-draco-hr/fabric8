{
  try {
    Thread current=Thread.currentThread();
    LockData lockData=threadLocks.get(current);
    if (lockData != null && lockData.getCount().decrementAndGet() <= 0) {
      threadLocks.remove(current);
      if (exists(zooKeeper,lockData.getLockPath()) != null) {
        delete(zooKeeper,lockData.getLockPath());
      }
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
