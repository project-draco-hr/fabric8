{
  if (url == null && parent == null) {
    throw new Exception("Either an url or a parent must be specified");
  }
  if (url == null && parent != null) {
    url="child://" + parent;
  }
  List<String> names=this.profiles;
  if (names == null || names.isEmpty()) {
    names=Collections.singletonList("default");
  }
  Agent[] children=fabricService.createAgents(url,name,isClusterServer,debugAgent,number);
  try {
    Profile[] profiles=getProfiles(version,names);
    for (    Agent child : children) {
      child.setProfiles(profiles);
    }
  }
 catch (  Exception ex) {
  }
  return null;
}
