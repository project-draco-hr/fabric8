{
  if (filter == null) {
    return null;
  }
  final List<Predicate<PaxLoggingEvent>> predicates=new ArrayList<Predicate<PaxLoggingEvent>>();
  final Set<String> levels=filter.getLevelsSet();
  if (levels.size() > 0) {
    predicates.add(new Predicate<PaxLoggingEvent>(){
      @Override public boolean matches(      PaxLoggingEvent event){
        PaxLevel level=event.getLevel();
        return level != null && levels.contains(level.toString());
      }
    }
);
  }
  final Long before=filter.getBeforeTimestamp();
  if (before != null) {
    predicates.add(new Predicate<PaxLoggingEvent>(){
      @Override public boolean matches(      PaxLoggingEvent event){
        long time=event.getTimeStamp();
        return time < before;
      }
    }
);
  }
  final Long after=filter.getAfterTimestamp();
  if (after != null) {
    predicates.add(new Predicate<PaxLoggingEvent>(){
      @Override public boolean matches(      PaxLoggingEvent event){
        long time=event.getTimeStamp();
        return time > after;
      }
    }
);
  }
  final String matchesText=filter.getMatchesText();
  if (matchesText != null && matchesText.length() > 0) {
    predicates.add(new Predicate<PaxLoggingEvent>(){
      @Override public boolean matches(      PaxLoggingEvent event){
        if (contains(matchesText,event.getFQNOfLoggerClass(),event.getMessage(),event.getLoggerName(),event.getThreadName())) {
          return true;
        }
        String[] throwableStrRep=event.getThrowableStrRep();
        if (throwableStrRep != null && contains(matchesText,throwableStrRep)) {
          return true;
        }
        Map properties=event.getProperties();
        if (properties != null && contains(matchesText,properties.toString())) {
          return true;
        }
        return true;
      }
    }
);
  }
  if (predicates.size() == 0) {
    return null;
  }
 else   if (predicates.size() == 1) {
    return predicates.get(0);
  }
 else {
    return new Predicate<PaxLoggingEvent>(){
      @Override public String toString(){
        return "AndPredicate" + predicates;
      }
      @Override public boolean matches(      PaxLoggingEvent event){
        for (        Predicate<PaxLoggingEvent> predicate : predicates) {
          if (!predicate.matches(event)) {
            return false;
          }
        }
        return true;
      }
    }
;
  }
}
