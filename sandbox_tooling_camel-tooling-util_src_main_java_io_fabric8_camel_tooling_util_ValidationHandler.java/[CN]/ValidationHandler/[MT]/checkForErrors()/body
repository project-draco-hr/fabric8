{
  if (hasErrors()) {
    StringWriter sw=new StringWriter();
    for (    SAXParseException ex : errors) {
      sw.append(", ").append(ex.getMessage());
    }
    for (    SAXParseException ex : fatalErrors) {
      sw.append(", ").append(ex.getMessage());
    }
    String text=sw.toString();
    if (text.length() > 2) {
      text=text.substring(2);
    }
    throw new ValidationException("Validation failed: " + text,userMessage(),errors,fatalErrors,warnings);
  }
}
