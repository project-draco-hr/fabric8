{
  FabClassPathResolver resolver=null;
  if (arg.matches("\\d+")) {
    Bundle bundle=getBundle(arg);
    if (bundle != null) {
      resolver=createFabResolver(bundle);
    }
  }
 else {
    FabURLHandler handler=findURLHandler();
    if (handler != null) {
      File file=new File(arg);
      String u=arg;
      if (file.exists()) {
        u=file.toURI().toURL().toString();
      }
      if (!arg.startsWith("fab:")) {
        u="fab:" + u;
      }
      FabConnection urlConnection=handler.openConnection(new URL(u));
      resolver=urlConnection.resolve();
    }
 else {
      println("ERROR: could not resolve FabURLHandler service in OSGi");
    }
  }
  return resolver;
}
