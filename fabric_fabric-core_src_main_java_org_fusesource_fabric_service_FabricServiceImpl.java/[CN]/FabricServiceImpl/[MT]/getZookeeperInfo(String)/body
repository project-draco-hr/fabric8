{
  assertValid();
  String zooKeeperUrl=null;
  try {
    if (curator.get().getZookeeperClient().isConnected()) {
      Version defaultVersion=getDefaultVersion();
      if (defaultVersion != null) {
        Profile profile=defaultVersion.getProfile("default");
        if (profile != null) {
          Map<String,String> zookeeperConfig=profile.getConfiguration("org.fusesource.fabric.zookeeper");
          if (zookeeperConfig != null) {
            zooKeeperUrl=getSubstitutedData(curator.get(),zookeeperConfig.get(name));
          }
        }
      }
    }
  }
 catch (  Exception e) {
  }
  if (zooKeeperUrl == null) {
    try {
      Configuration config=configAdmin.get().getConfiguration("org.fusesource.fabric.zookeeper",null);
      zooKeeperUrl=(String)config.getProperties().get(name);
    }
 catch (    Exception e) {
    }
  }
  return zooKeeperUrl;
}
