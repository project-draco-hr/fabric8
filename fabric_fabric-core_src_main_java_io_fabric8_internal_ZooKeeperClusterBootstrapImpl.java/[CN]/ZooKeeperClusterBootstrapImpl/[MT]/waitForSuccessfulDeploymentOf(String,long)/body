{
  System.out.println(String.format("Waiting for container %s to provision.",containerName));
  BundleContext sysContext=componentContext.getBundleContext().getBundle(0).getBundleContext();
  FabricService fabricServiceProxy=ServiceProxy.getOsgiServiceProxy(sysContext,FabricService.class);
  long startedAt=System.currentTimeMillis();
  while (!Thread.interrupted() && startedAt + timeout > System.currentTimeMillis()) {
    try {
      Container container=fabricServiceProxy != null ? fabricServiceProxy.getContainer(containerName) : null;
      if (container != null && container.isAlive() && "success".equals(container.getProvisionStatus())) {
        return;
      }
      Thread.sleep(500);
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
    }
catch (    Throwable t) {
      throw FabricException.launderThrowable(t);
    }
  }
}
