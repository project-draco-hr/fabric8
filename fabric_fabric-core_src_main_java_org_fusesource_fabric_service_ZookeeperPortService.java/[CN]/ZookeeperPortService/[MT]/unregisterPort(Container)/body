{
  assertValid();
  String containerPortsPath=ZkPath.PORTS_CONTAINER.getPath(container.getId());
  try {
    if (interProcessLock.acquire(60,TimeUnit.SECONDS)) {
      if (exists(curator.get(),containerPortsPath) != null) {
        for (        String pid : getChildren(curator.get(),containerPortsPath)) {
          unregisterPort(container,pid);
        }
        deleteSafe(curator.get(),containerPortsPath);
      }
    }
 else {
      throw new FabricException("Could not acquire port lock");
    }
  }
 catch (  Exception ex) {
    throw new FabricException(ex);
  }
 finally {
    releaseLock();
  }
}
