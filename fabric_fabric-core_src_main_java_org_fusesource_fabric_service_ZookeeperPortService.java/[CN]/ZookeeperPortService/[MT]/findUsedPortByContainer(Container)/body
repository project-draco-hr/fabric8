{
  HashSet<Integer> ports=new HashSet<Integer>();
  String path=ZkPath.PORTS_CONTAINER.getPath(container.getId());
  try {
    if (lock.acquire(60,TimeUnit.SECONDS)) {
      if (exists(curator.get(),path) != null) {
        for (        String pid : getChildren(curator.get(),path)) {
          for (          String key : getChildren(curator.get(),ZkPath.PORTS_CONTAINER_PID.getPath(container.getId(),pid))) {
            String port=getStringData(curator.get(),ZkPath.PORTS_CONTAINER_PID_KEY.getPath(container.getId(),pid,key));
            try {
              ports.add(Integer.parseInt(port));
            }
 catch (            Exception ex) {
            }
          }
        }
      }
    }
 else {
      throw new FabricException("Could not acquire port lock");
    }
  }
 catch (  Exception ex) {
    throw new FabricException(ex);
  }
 finally {
    release();
  }
  return ports;
}
