{
  String defaultVersion=dataStore.getDefaultVersion();
  assertEquals("defaultVersion","1.0",defaultVersion);
  String prefix=basedir + "/../fuse-fabric/src/main/resources/distro/fabric/import/fabric";
  String profileImport=prefix + "/configs/versions/1.0/profiles";
  String metricsImport=prefix + "/metrics";
  assertFolderExists(profileImport);
  assertFolderExists(metricsImport);
  dataStore.importFromFileSystem(profileImport,"fabric");
  dataStore.importFromFileSystem(metricsImport,"fabric");
  assertHasVersion(defaultVersion);
  String profile="example-dozer";
  assertProfileExists(defaultVersion,profile);
  String version="1.1";
  assertCreateVersion(version);
  assertProfileConfiguration(version,"example-dozer","org.fusesource.fabric.agent","parents","camel");
  String profileNotCreated="shouldNotBeCreated";
  assertEquals("Should not create profile: " + profileNotCreated,null,dataStore.getProfile(version,profileNotCreated,false));
  assertProfileNotExists(defaultVersion,profileNotCreated);
  assertFolderNotExists(getLocalGitFile("fabric/profiles/" + profileNotCreated));
  String newProfile="myNewProfile";
  dataStore.createProfile(version,newProfile);
  assertProfileExists(version,newProfile);
  String anotherNewProfile="anotherNewProfile";
  dataStore.getProfile(version,anotherNewProfile,true);
  assertProfileExists(version,anotherNewProfile);
  version="1.2";
  assertCreateVersion(version);
  assertProfileExists(version,newProfile);
  assertProfileExists(version,profile);
  dataStore.deleteProfile(version,newProfile);
  assertProfileNotExists(version,newProfile);
  remote.checkout().setName("1.1").call();
  assertFolderExists(getRemoteGitFile("fabric/profiles/" + profile));
  assertFolderExists(getRemoteGitFile("fabric/profiles/" + newProfile));
  remote.checkout().setName("1.2").call();
  assertFolderExists(getRemoteGitFile("fabric/profiles/" + profile));
  assertFolderNotExists(getRemoteGitFile("fabric/profiles/" + newProfile));
  remote.checkout().setName("1.0").call();
  assertFolderExists(getRemoteGitFile("fabric/profiles/" + profile));
  assertFolderNotExists(getRemoteGitFile("fabric/profiles/" + newProfile));
}
