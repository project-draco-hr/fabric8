{
  CompletionService<Boolean> completionService=new ExecutorCompletionService<Boolean>(EXECUTOR);
  List<Future<Boolean>> waitForstarted=new LinkedList<Future<Boolean>>();
  StringBuilder sb=new StringBuilder();
  sb.append(" ");
  for (  String instance : instances) {
    waitForstarted.add(completionService.submit(new WaitForInstanceStartedTask(bundleContext,instance,timeout)));
    sb.append(instance).append(" ");
  }
  System.out.println("Waiting for child instances: [" + sb.toString() + "] to get started.");
  for (  String instance : instances) {
    Future<Boolean> f=completionService.poll(timeout,TimeUnit.MILLISECONDS);
    if (f == null || !f.get()) {
      throw new Exception("Instance " + instance + " failed to start.");
    }
  }
}
