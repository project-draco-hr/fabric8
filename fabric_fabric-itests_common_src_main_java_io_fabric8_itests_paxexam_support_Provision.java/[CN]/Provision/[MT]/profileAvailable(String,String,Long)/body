{
  FabricService service=ServiceLocator.awaitService(FabricService.class);
  for (long t=0; (!service.getDataStore().hasProfile(version,profile) && t < timeout); t+=2000L) {
    Thread.sleep(2000L);
  }
  return service.getDataStore().hasProfile(version,profile);
}
