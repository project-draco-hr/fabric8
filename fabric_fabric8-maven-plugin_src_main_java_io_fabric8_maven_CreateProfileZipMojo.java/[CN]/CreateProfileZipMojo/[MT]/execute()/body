{
  try {
    DependencyDTO rootDependency=loadRootDependency();
    ProjectRequirements requirements=new ProjectRequirements();
    requirements.setRootDependency(rootDependency);
    configureRequirements(requirements);
    File profileBuildDir=createProfileBuildDir(requirements.getProfileId());
    if (profileConfigDir.isDirectory()) {
      copyProfileConfigFiles(profileBuildDir,profileConfigDir);
    }
 else {
      getLog().info("The profile configuration files directory " + profileConfigDir + " doesn't exist, so not copying any additional project documentation or configuration files");
    }
    generateFabricAgentProperties(requirements,new File(profileBuildDir,"io.fabric8.agent.properties"));
    createZipFile(buildDir);
    projectHelper.attachArtifact(project,artifactType,artifactClassifier,outputFile);
    String relativePath=Files.getRelativePath(project.getBasedir(),outputFile);
    while (relativePath.startsWith("/")) {
      relativePath=relativePath.substring(1);
    }
    getLog().info("Created profile zip file: " + relativePath);
  }
 catch (  MojoExecutionException e) {
    throw e;
  }
catch (  Exception e) {
    throw new MojoExecutionException("Error executing",e);
  }
}
