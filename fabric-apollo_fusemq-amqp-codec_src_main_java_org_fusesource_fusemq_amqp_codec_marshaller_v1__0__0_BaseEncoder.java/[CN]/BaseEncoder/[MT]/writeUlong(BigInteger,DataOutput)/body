{
  byte[] b=val.toByteArray();
  if (b.length > 8) {
    for (int i=0; i < b.length - 8; i++) {
      if (b[i] > 0) {
        throw new UnsupportedEncodingException("Unsigned long too large");
      }
    }
  }
  byte[] toWrite=new byte[8];
  int length=toWrite.length - 1;
  for (int i=length; i >= 0; i--) {
    int position=length - i;
    if (position < b.length) {
      toWrite[i]=b[position];
    }
 else {
      toWrite[i]=0x0;
    }
  }
  dos.write(toWrite);
}
