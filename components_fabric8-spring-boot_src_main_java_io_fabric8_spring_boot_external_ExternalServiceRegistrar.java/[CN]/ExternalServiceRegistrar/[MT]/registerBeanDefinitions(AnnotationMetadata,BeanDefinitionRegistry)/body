{
  KubernetesProperties kubernetesProperties=new KubernetesProperties();
  KubernetesFactory kubernetesFactory=new KubernetesFactory(kubernetesProperties.getKubernetesMasterUrl());
  Kubernetes kubernetes=kubernetesFactory.createKubernetes();
  for (  final Service service : kubernetes.getServices("default").getItems()) {
    RootBeanDefinition beanDefinition=new RootBeanDefinition(Service.class);
    beanDefinition.addQualifier(new AutowireCandidateQualifier(ServiceName.class,service.getMetadata().getName()));
    beanDefinition.getPropertyValues().addPropertyValue("metadata",service.getMetadata());
    beanDefinition.getPropertyValues().addPropertyValue("spec",service.getSpec());
    beanDefinition.getPropertyValues().addPropertyValue("kind",service.getKind());
    registry.registerBeanDefinition(service.getMetadata().getName() + "-service-bean",beanDefinition);
  }
}
