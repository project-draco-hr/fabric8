{
  final MavenRepositorySystemSession session=new MavenRepositorySystemSession();
  LocalRepository localRepository=new LocalRepository(getLocalRepo());
  session.setLocalRepositoryManager(repo.newLocalRepositoryManager(localRepository));
  session.setDependencySelector(new AndDependencySelector(new ScopeDependencySelector("test","provided"),new OptionalDependencySelector(),new ExclusionDependencySelector()));
  session.setOffline(offline);
  return session;
}
