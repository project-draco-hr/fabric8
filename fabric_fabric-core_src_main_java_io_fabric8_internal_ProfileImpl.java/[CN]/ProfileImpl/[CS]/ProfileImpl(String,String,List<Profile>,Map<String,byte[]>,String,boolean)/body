{
  this.profileId=profileId;
  this.versionId=versionId;
  this.lastModified=lastModified;
  this.isOverlay=isOverlay;
  for (  Profile parent : parents) {
    this.parents.put(parent.getId(),parent);
  }
  for (  Entry<String,byte[]> entry : fileConfigs.entrySet()) {
    String fileKey=entry.getKey();
    byte[] bytes=entry.getValue();
    fileConfigurations.put(fileKey,bytes);
    if (fileKey.endsWith(Profile.PROPERTIES_SUFFIX)) {
      String pid=fileKey.substring(0,fileKey.indexOf(Profile.PROPERTIES_SUFFIX));
      configurations.put(pid,Collections.unmodifiableMap(DataStoreUtils.toMap(bytes)));
    }
  }
  Map<String,String> agentConfig=configurations.get(Constants.AGENT_PID);
  if (agentConfig != null) {
    int prefixLength=Profile.ATTRIBUTE_PREFIX.length();
    for (    Entry<String,String> entry : agentConfig.entrySet()) {
      String key=entry.getKey();
      if (key.startsWith(Profile.ATTRIBUTE_PREFIX)) {
        attributes.put(key.substring(prefixLength),entry.getValue());
      }
    }
  }
}
