{
  assertValid();
  try {
    String version=null;
    if (getTreeCache().getCurrentData(ZkPath.CONFIG_DEFAULT_VERSION.getPath()) != null) {
      version=getStringData(getTreeCache(),ZkPath.CONFIG_DEFAULT_VERSION.getPath());
    }
    if (version == null || version.isEmpty()) {
      version=ZkDefs.DEFAULT_VERSION;
      setData(getCurator(),ZkPath.CONFIG_DEFAULT_VERSION.getPath(),version);
      setData(getCurator(),ZkPath.CONFIG_VERSION.getPath(version),(String)null);
    }
    return version;
  }
 catch (  Exception e) {
    throw FabricException.rethrow(e);
  }
}
