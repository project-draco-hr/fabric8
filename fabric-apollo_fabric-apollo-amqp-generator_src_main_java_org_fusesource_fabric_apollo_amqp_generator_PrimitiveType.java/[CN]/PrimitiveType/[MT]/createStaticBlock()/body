{
  JSwitch readSwitchBlock=read().body()._switch(JExpr.ref("formatCode"));
  write().body().decl(cm.BYTE,"formatCode",generator.registry().cls().staticInvoke("instance").invoke("picker").invoke("choose" + toJavaClassName(type.getName() + "Encoding")).arg(JExpr.ref("value")));
  JSwitch writeSwitchBlock=write().body()._switch(JExpr.ref("formatCode"));
  writeSwitchBlock._case(generator.registry().cls().staticRef("NULL_FORMAT_CODE")).body()._break();
  for (  Object obj : type.getEncodingOrDescriptorOrFieldOrChoiceOrDoc()) {
    if (obj instanceof Encoding) {
      Encoding encoding=(Encoding)obj;
      String fieldName=type.getName();
      if (encoding.getName() != null) {
        fieldName+="_" + encoding.getName();
      }
      Log.info("encoding name %s",fieldName);
      String staticCodeFieldName=toStaticName(fieldName + "_CODE");
      cls().field(JMod.PUBLIC | JMod.STATIC | JMod.FINAL,cm.BYTE,staticCodeFieldName,JExpr.direct("(byte)" + encoding.getCode()));
      cls().init().add(generator.registry().cls().staticInvoke("instance").invoke("getPrimitiveFormatCodeMap").invoke("put").arg(JExpr.ref(staticCodeFieldName)).arg(cls().dotclass()));
      cls().field(JMod.PUBLIC | JMod.STATIC | JMod.FINAL,cm.INT,toStaticName(fieldName + "_WIDTH"),JExpr.lit(Integer.parseInt(encoding.getWidth())));
      readSwitchBlock._case(JExpr.ref(staticCodeFieldName)).body().assign(JExpr._this().ref("value"),generator.registry().cls().staticInvoke("instance").invoke("encoder").invoke("read" + toJavaClassName(fieldName)).arg(JExpr.ref("in")))._break();
      writeSwitchBlock._case(JExpr.ref(staticCodeFieldName)).body().add(generator.registry().cls().staticInvoke("instance").invoke("encoder").invoke("write" + toJavaClassName(fieldName)).arg(JExpr._this().ref("value")).arg(JExpr.ref("out")))._break();
    }
  }
  readSwitchBlock._default().body()._throw(JExpr._new(cm.ref(Exception.class)).arg(JExpr.lit("Unknown format code for " + type.getName() + " : 0x").plus(cm.ref("java.lang.String").staticInvoke("format").arg("%x").arg(JExpr.ref("formatCode")))));
  writeSwitchBlock._default().body()._throw(JExpr._new(cm.ref(Exception.class)).arg(JExpr.lit("Unknown format code for " + type.getName() + " : 0x").plus(cm.ref("java.lang.String").staticInvoke("format").arg("%x").arg(JExpr.ref("formatCode")))));
}
