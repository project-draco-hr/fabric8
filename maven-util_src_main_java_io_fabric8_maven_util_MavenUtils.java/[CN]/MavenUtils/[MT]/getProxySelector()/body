{
  DefaultProxySelector selector=new DefaultProxySelector();
  Settings settings=getSettings();
  for (  org.apache.maven.settings.Proxy proxy : settings.getProxies()) {
    AuthenticationBuilder builder=new AuthenticationBuilder();
    builder.addUsername(proxy.getUsername());
    builder.addPassword(proxy.getPassword());
    org.eclipse.aether.repository.Proxy p=new Proxy(proxy.getProtocol(),proxy.getHost(),proxy.getPort(),builder.build());
    selector.add(p,proxy.getNonProxyHosts());
  }
  return selector;
}
