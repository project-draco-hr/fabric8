{
  try {
    String applicationKey=getApplicationKey(application);
    if (applications.containsKey(applicationKey)) {
      Application removed=applications.remove(applicationKey);
      for (      Contract contract : removed.getContracts()) {
        if (contracts.containsKey(contract.getApiKey())) {
          contracts.remove(contract.getApiKey());
        }
      }
    }
 else {
      throw new RegistrationException(Messages.i18n.format("InMemoryRegistry.AppNotFound"));
    }
    save();
    handler.handle(AsyncResultImpl.create((Void)null));
  }
 catch (  Throwable t) {
    handler.handle(AsyncResultImpl.create(t,Void.class));
  }
}
