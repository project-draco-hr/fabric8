{
  if (registryFile == null) {
    String appDir=null;
    if (System.getenv("APP_BASE") != null) {
      appDir=System.getenv("APP_BASE");
    }
 else     if (System.getProperty("APP_BASE") != null) {
      appDir=System.getProperty("APP_BASE");
    }
    File mavenDir=new File("/maven");
    if (mavenDir.exists())     appDir=mavenDir.getAbsolutePath();
    if (appDir == null) {
      appDir=System.getProperty("user.home");
      LOG.info("Cannot find 'APP_BASE' system param or '/maven' dir," + " defaulting to user's home dir " + appDir);
    }
    File apiManDataDir=new File(appDir + "/data/apiman");
    if (!apiManDataDir.exists()) {
      apiManDataDir.mkdirs();
    }
    registryFile=new File(apiManDataDir.getAbsolutePath() + "/registry.json");
    if (!registryFile.exists()) {
      LOG.info("Creating new APIMan JSON Datafile " + registryFile.getAbsolutePath());
      registryFile.createNewFile();
    }
    LOG.info("ApiMan is using data file " + registryFile.getAbsolutePath());
  }
  return registryFile;
}
