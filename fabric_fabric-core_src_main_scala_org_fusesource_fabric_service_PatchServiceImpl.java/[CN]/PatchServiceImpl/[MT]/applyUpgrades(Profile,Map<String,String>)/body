{
  List<String> bundles=profile.getBundles();
  List<String> newBundles=doApplyUpgrade(bundles,upgrades);
  if (!newBundles.equals(bundles)) {
    profile.setBundles(newBundles);
  }
  List<String> fabs=profile.getFabs();
  List<String> newFabs=doApplyUpgrade(fabs,upgrades);
  if (!newFabs.equals(fabs)) {
    profile.setFabs(newFabs);
  }
  List<String> repositories=profile.getRepositories();
  List<String> newRepositories=doApplyUpgrade(repositories,upgrades);
  if (!newRepositories.equals(repositories)) {
    profile.setRepositories(newRepositories);
  }
}
