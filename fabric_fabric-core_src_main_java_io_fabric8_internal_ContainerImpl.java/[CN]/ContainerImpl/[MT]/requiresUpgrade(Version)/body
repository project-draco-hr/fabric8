{
  boolean requiresUpgrade=false;
  if (version.compareTo(getVersion()) == 0) {
    return false;
  }
  for (  Profile oldProfile : getProfiles()) {
    Profile newProfile=version.getProfile(oldProfile.getId());
    if (newProfile != null && !Profiles.agentConfigurationEquals(fabricService,oldProfile,newProfile)) {
      requiresUpgrade=true;
      break;
    }
  }
  return requiresUpgrade;
}
