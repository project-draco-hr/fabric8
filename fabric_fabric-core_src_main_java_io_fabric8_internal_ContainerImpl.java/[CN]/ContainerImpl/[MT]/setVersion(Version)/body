{
  String currentId=getVersionId();
  int compareResult=version.getId().compareTo(currentId);
  if (compareResult != 0) {
    if (requiresUpgrade(version) && isManaged()) {
      String status=compareResult > 0 ? "upgrading" : "downgrading";
      dataStore.setContainerAttribute(id,DataStore.ContainerAttribute.ProvisionStatus,status);
    }
    dataStore.setContainerVersion(id,version.getId());
  }
}
