{
  if (version.compareTo(getVersion()) != 0) {
    if (requiresUpgrade(version) && isManaged()) {
      String status=version.compareTo(getVersion()) > 0 ? "upgrading" : "downgrading";
      dataStore.setContainerAttribute(id,DataStore.ContainerAttribute.ProvisionStatus,status);
    }
    dataStore.setContainerVersion(id,version.getId());
  }
}
