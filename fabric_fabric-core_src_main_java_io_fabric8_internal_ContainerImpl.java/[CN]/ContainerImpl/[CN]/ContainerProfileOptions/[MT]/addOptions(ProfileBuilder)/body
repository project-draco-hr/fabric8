{
  List<String> missingProfiles=new ArrayList<>();
  List<String> profileIds=dataStore.getContainerProfiles(cntId);
  LOGGER.debug("Building container overlay for {} with profile: {}",cntId,profileIds);
  for (  String profileId : profileIds) {
    if (version.hasProfile(profileId)) {
      builder.addParent(profileId);
    }
 else {
      missingProfiles.add(profileId);
    }
  }
  if (!missingProfiles.isEmpty()) {
    LOGGER.warn("Container overlay has missing profiles: {}",missingProfiles);
    builder.addAttribute("missing.profiles",missingProfiles.toString());
  }
  return builder;
}
