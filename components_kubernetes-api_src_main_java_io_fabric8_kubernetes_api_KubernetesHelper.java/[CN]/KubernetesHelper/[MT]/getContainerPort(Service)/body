{
  int answer=-1;
  String id=getId(service);
  Service spec=service;
  if (spec != null) {
    IntOrString containerPort=spec.getContainerPort();
    Objects.notNull(containerPort,"containerPort for service " + id);
    Integer intValue=containerPort.getIntVal();
    if (intValue != null) {
      answer=intValue;
    }
 else {
      String containerPortText=containerPort.getStrVal();
      if (Strings.isNullOrBlank(containerPortText)) {
        throw new IllegalArgumentException("No containerPort for service " + id);
      }
      try {
        answer=Integer.parseInt(containerPortText);
      }
 catch (      NumberFormatException e) {
        throw new IllegalStateException("Invalid containerPort expression " + containerPortText + " for service "+ id+ ". "+ e,e);
      }
    }
  }
  if (answer <= 0) {
    throw new IllegalArgumentException("Invalid port number for service " + id + ". "+ answer);
  }
  return answer;
}
