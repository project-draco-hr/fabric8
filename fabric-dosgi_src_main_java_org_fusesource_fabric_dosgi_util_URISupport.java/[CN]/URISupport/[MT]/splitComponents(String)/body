{
  List<String> l=new ArrayList<String>();
  int last=0;
  int depth=0;
  char chars[]=str.toCharArray();
  for (int i=0; i < chars.length; i++) {
switch (chars[i]) {
case '(':
      depth++;
    break;
case ')':
  depth--;
break;
case ',':
if (depth == 0) {
String s=str.substring(last,i);
l.add(s);
last=i + 1;
}
break;
default :
}
}
String s=str.substring(last);
if (s.length() != 0) {
l.add(s);
}
String rc[]=new String[l.size()];
l.toArray(rc);
return rc;
}
