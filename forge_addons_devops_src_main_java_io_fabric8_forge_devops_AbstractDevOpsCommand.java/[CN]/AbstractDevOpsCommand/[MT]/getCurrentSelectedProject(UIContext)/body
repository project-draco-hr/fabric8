{
  Project project=null;
  Map<Object,Object> attributeMap=context.getAttributeMap();
  if (attributeMap != null) {
    Object object=attributeMap.get(Project.class);
    if (object instanceof Project) {
      project=(Project)object;
      return project;
    }
  }
  UISelection<Object> selection=context.getSelection();
  Object selectedObject=selection.get();
  try {
    LOG.info("START getCurrentSelectedProject: on " + getProjectFactory() + " selection: "+ selectedObject+ ". This may result in mvn artifacts being downloaded to ~/.m2/repository");
    project=Projects.getSelectedProject(getProjectFactory(),context);
    if (project != null && attributeMap != null) {
      attributeMap.put(Project.class,project);
    }
    return project;
  }
  finally {
    LOG.info("END   getCurrentSelectedProject: on " + getProjectFactory() + " selection: "+ selectedObject);
  }
}
