{
  TargetConnector inboundConnector=new TargetConnector();
  inboundConnector.setId(getId() + "." + remoteBridge.getId()+ ".inboundConnector");
  inboundConnector.setAutoStartup(isAutoStartup());
  inboundConnector.setPhase(getPhase());
  inboundConnector.setLocalBrokerConfig(localBrokerConfig);
  if (!remoteBridge.getInboundDestinations().isDefaultStagingLocation()) {
    inboundConnector.setRemoteBrokerConfig(remoteBridge.getRemoteBrokerConfig());
  }
  inboundConnector.setInboundDestinations(remoteBridge.getInboundDestinations());
  try {
    inboundConnector.afterPropertiesSet();
  }
 catch (  Exception e) {
    String msg="Error creating inbound connector for " + remoteBridge + " : "+ e.getMessage();
    LOG.error(msg,e);
    throw new IllegalArgumentException(msg,e);
  }
  return inboundConnector;
}
