{
  Object obj=servers.remove(pid);
  ServiceRegistration reg=services.remove(pid);
  if (reg != null) {
    try {
      reg.unregister();
    }
 catch (    Throwable t) {
    }
  }
  try {
    if (obj instanceof QuorumPeer) {
      ((QuorumPeer)obj).shutdown();
    }
 else     if (obj instanceof NIOServerCnxn.Factory) {
      ((NIOServerCnxn.Factory)obj).shutdown();
    }
  }
 catch (  Throwable t) {
  }
}
