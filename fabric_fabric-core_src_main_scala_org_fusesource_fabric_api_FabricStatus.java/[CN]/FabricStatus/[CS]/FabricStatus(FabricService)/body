{
  this.service=service;
  requirements=service.getRequirements();
  if (requirements == null) {
    requirements=new FabricRequirements();
  }
  List<ProfileRequirements> profileRequirements=requirements.getProfileRequirements();
  for (  ProfileRequirements profileRequirement : profileRequirements) {
    String key=profileRequirement.getProfile();
    ProfileStatus status=profileStatusMap.get(key);
    if (status == null) {
      status=createStatus(key,profileRequirement);
      profileStatusMap.put(key,status);
    }
  }
  Container[] containers=service.getContainers();
  for (  Container container : containers) {
    if (container.isAliveAndOK()) {
      Profile[] profiles=container.getProfiles();
      for (      Profile profile : profiles) {
        String key=profile.getId();
        ProfileStatus status=profileStatusMap.get(key);
        if (status == null) {
          status=createStatus(key,null);
          profileStatusMap.put(key,status);
        }
        status.incrementCount();
      }
    }
  }
}
