{
  unregister(type);
  String mavenProxyUrl="http://${zk:" + name + "/ip}:"+ getPortSafe()+ "/maven/"+ type+ "/";
  String parentPath=ZkPath.MAVEN_PROXY.getPath(type);
  String path=parentPath + "/p_";
  try {
    if (zookeeper.isConnected()) {
      if (zookeeper.exists(parentPath) == null) {
        zookeeper.createWithParents(parentPath,CreateMode.PERSISTENT);
      }
      if (zookeeper.exists(path) == null) {
        registeredProxies.get(type).add(zookeeper.create(path,mavenProxyUrl,CreateMode.EPHEMERAL_SEQUENTIAL));
      }
    }
  }
 catch (  Exception e) {
    LOGGER.warn("Failed to register maven proxy.");
  }
}
