{
  String mavenProxyUrl="http://${zk:" + name + "/ip}:"+ port+ "/maven/"+ type+ "/";
  String parentPath=ZkPath.MAVEN_PROXY.getPath(type);
  String path=parentPath + "/p_";
  if (zookeeper.isConnected()) {
    try {
      if (zookeeper.exists(parentPath) == null) {
        zookeeper.createWithParents(parentPath,null,ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
      }
      if (zookeeper.exists(path) == null || (node.get(type) != null && zookeeper.exists(node.get(type)) == null)) {
        node.put(type,zookeeper.create(path,mavenProxyUrl.getBytes("UTF-8"),ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL_SEQUENTIAL));
      }
    }
 catch (    Exception e) {
      LOGGER.error("Failed to register maven proxy.",e);
    }
  }
}
