{
  Project project=getSelectedProject(context);
  MavenPluginFacet pluginFacet=project.getFacet(MavenPluginFacet.class);
  MavenPluginBuilder plugin=MavenPluginBuilder.create().setCoordinate(createCoordinate("org.jolokia","docker-maven-plugin",VersionHelper.dockerVersion()));
  if (pluginFacet.hasPlugin(plugin.getCoordinate())) {
    return Results.success("Docker is already setup");
  }
  String fromImage=from != null ? from.getValue() : "fabric8/java";
  ConfigurationElement name=ConfigurationElementBuilder.create().setName("name").setText("${docker.registryPrefix}fabric8/${project.artifactId}:${project.version}");
  ConfigurationElement from=ConfigurationElementBuilder.create().setName("from").setText(fromImage);
  ConfigurationElement descriptorRef=ConfigurationElementBuilder.create().setName("descriptorRef").setText("${docker.assemblyDescriptorRef}");
  ConfigurationElement assembly=ConfigurationElementBuilder.create().setName("assembly");
  assembly.getChildren().add(descriptorRef);
  ConfigurationElement build=ConfigurationElementBuilder.create().setName("build");
  build.getChildren().add(from);
  build.getChildren().add(assembly);
  ConfigurationElement image=ConfigurationElementBuilder.create().setName("image");
  image.getChildren().add(name);
  image.getChildren().add(build);
  ConfigurationElement images=ConfigurationElementBuilder.create().setName("images");
  images.getChildren().add(image);
  plugin.createConfiguration().addConfigurationElement(images);
  pluginFacet.addPlugin(plugin);
  return Results.success("Added Docker to the project");
}
