{
  await(context,"(&(objectClass=org.osgi.service.url.URLStreamHandlerService)(url.handler.protocol=fab))");
  Set<Bundle> stateBefore=new HashSet<Bundle>(Arrays.asList(context.getBundles()));
  String url=fab("io.fabric8.fab.tests","fab-sample-camel-noshare");
  context.installBundle(url);
  Set<Bundle> stateAfter=new HashSet<Bundle>(Arrays.asList(context.getBundles()));
  stateAfter.removeAll(stateBefore);
  assertTrue("Expected FAB itself to be added",stateAfter.size() == 1);
  Bundle fabBundle=stateAfter.iterator().next();
  assertTrue("Expected camel-core to be added",fabBundle.getLocation().equals(url));
  Bundle camel=Bundles.findOneBundle(context,"org.apache.camel.camel-core");
  assertNotSame("Installed FAB should not be using the shared camel bundle's classes",fabBundle.loadClass("org.apache.camel.CamelContext"),camel.loadClass("org.apache.camel.CamelContext"));
}
