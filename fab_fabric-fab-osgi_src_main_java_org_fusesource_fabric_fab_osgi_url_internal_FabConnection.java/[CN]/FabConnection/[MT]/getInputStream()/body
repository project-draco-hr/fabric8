{
  connect();
  try {
    Properties instructions=getInstructions();
    PreConditionException.validateNotNull(instructions,"Instructions");
    String fabUri=instructions.getProperty(ServiceConstants.INSTR_FAB_URL);
    if (fabUri == null || fabUri.trim().length() == 0) {
      throw new IOException("Instructions file must contain a property named " + ServiceConstants.INSTR_FAB_URL);
    }
    return BndUtils.createBundle(URLUtils.prepareInputStream(new URL(fabUri),configuration.getCertificateCheck()),instructions,fabUri);
  }
 catch (  RepositoryException e) {
    throw new IOException(e.getMessage(),e);
  }
catch (  XmlPullParserException e) {
    throw new IOException(e.getMessage(),e);
  }
}
