{
  List<String> endpoints=new ArrayList<>();
  String namespace=Systems.getEnvVarOrSystemProperty(KUBERNETES_NAMESPACE,DEFAULT_NAMESPACE);
  String serviceProto=serviceProtocol != null ? serviceProtocol : DEFAULT_PROTO;
  try {
    for (    String endpoint : KubernetesHelper.lookupServiceInDns(serviceId)) {
      endpoints.add(serviceProto + "://" + endpoint);
    }
  }
 catch (  UnknownHostException e) {
  }
  if (!endpoints.isEmpty()) {
    return endpoints;
  }
  for (  io.fabric8.kubernetes.api.model.Endpoints item : KUBERNETES.getEndpoints(namespace).getItems()) {
    if (item.getMetadata().getName().equals(serviceId) && (namespace == null || namespace.equals(item.getMetadata().getNamespace()))) {
      for (      EndpointSubset subset : item.getSubsets()) {
        for (        EndpointAddress address : subset.getAddresses()) {
          endpoints.add(serviceProto + "://" + address.getIP());
        }
      }
      break;
    }
  }
  return endpoints;
}
