{
  Buffer rc=null;
  byte[] header=new byte[category.WIDTH];
  in.readFully(header);
  if (category.WIDTH == 1) {
    dataSize=0xff & header[0];
  }
 else {
    dataSize=(int)BitUtils.getUInt(header,0);
  }
  rc=new Buffer(1 + header.length + dataSize);
  rc.data[0]=formatCode;
  System.arraycopy(header,0,rc.data,1,header.length);
  if (getDataSize() > 0) {
    in.readFully(rc.data,getDataOffset(),dataSize);
  }
  return rc;
}
