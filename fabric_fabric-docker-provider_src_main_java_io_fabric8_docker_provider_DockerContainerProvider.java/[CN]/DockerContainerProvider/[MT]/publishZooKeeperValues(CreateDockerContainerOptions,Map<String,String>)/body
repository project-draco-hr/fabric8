{
  Map<String,Map<String,String>> publishConfigurations=Profiles.getOverlayFactoryConfigurations(fabricService.get(),options.getProfiles(),options.getVersion(),ZooKeeperPublishConfig.PROCESS_CONTAINER_ZK_PUBLISH_PID);
  Set<Map.Entry<String,Map<String,String>>> entries=publishConfigurations.entrySet();
  for (  Map.Entry<String,Map<String,String>> entry : entries) {
    String configName=entry.getKey();
    Map<String,String> exportConfig=entry.getValue();
    if (exportConfig != null && !exportConfig.isEmpty()) {
      JolokiaAgentHelper.substituteEnvironmentVariableExpressions(exportConfig,environmentVariables,fabricService.get(),curator.get(),true);
      ZooKeeperPublishConfig config=new ZooKeeperPublishConfig();
      try {
        configurer.configure(exportConfig,config);
        config.publish(curator.get(),null,null,null,environmentVariables);
      }
 catch (      Exception e) {
        LOG.warn("Failed to publish configuration " + configName + " of "+ config+ " due to: "+ e,e);
      }
    }
  }
}
