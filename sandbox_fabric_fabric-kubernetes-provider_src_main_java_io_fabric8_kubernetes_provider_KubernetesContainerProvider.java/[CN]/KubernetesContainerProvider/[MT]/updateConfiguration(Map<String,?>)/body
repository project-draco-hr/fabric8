{
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  try {
    getConfigurer().configure(configuration,this);
    if (Strings.isNotBlank(dockerHost)) {
      dockerFactory.setAddress(dockerHost);
    }
    Thread.currentThread().setContextClassLoader(Docker.class.getClassLoader());
    this.docker=dockerFactory.createDocker();
  }
 catch (  Throwable e) {
    LOG.error("Failed to update configuration " + configuration + ". "+ e,e);
    throw e;
  }
 finally {
    Thread.currentThread().setContextClassLoader(tccl);
  }
}
