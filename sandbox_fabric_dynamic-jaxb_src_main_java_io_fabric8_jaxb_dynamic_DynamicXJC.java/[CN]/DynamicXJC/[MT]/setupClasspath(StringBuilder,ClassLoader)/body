{
  ClassLoader scl=ClassLoader.getSystemClassLoader();
  ClassLoader tcl=classLoader;
  do {
    if (tcl instanceof URLClassLoader) {
      URL[] urls=((URLClassLoader)tcl).getURLs();
      if (urls == null) {
        urls=new URL[0];
      }
      for (      URL url : urls) {
        if (url.getProtocol().startsWith("file")) {
          File file=null;
          try {
            if (url.getPath() == null) {
              continue;
            }
            file=new File(URLDecoder.decode(url.getPath(),"utf-8"));
          }
 catch (          UnsupportedEncodingException uee) {
          }
          if (null != file && file.exists()) {
            classPath.append(file.getAbsolutePath()).append(System.getProperty("path.separator"));
            if (file.getName().endsWith(".jar")) {
              addClasspathFromContainerManifest(classPath,file);
            }
          }
        }
      }
    }
 else     if (tcl.getClass().getName().contains("weblogic")) {
      try {
        Method method=tcl.getClass().getMethod("getClassPath");
        Object weblogicClassPath=method.invoke(tcl);
        classPath.append(weblogicClassPath).append(File.pathSeparator);
      }
 catch (      Exception e) {
        LOG.log(Level.FINE,"unsuccessfully tried getClassPath method",e);
      }
    }
    tcl=tcl.getParent();
    if (null == tcl) {
      break;
    }
  }
 while (!tcl.equals(scl.getParent()));
}
