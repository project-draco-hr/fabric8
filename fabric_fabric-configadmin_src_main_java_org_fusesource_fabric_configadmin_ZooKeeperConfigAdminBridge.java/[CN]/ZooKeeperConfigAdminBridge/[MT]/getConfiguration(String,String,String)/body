{
  String filter="(" + FABRIC_ZOOKEEPER_PID + "="+ zooKeeperPid+ ")";
  Configuration[] oldConfiguration=getConfigAdmin().listConfigurations(filter);
  if (oldConfiguration != null && oldConfiguration.length > 0) {
    return oldConfiguration[0];
  }
 else {
    Configuration newConfiguration;
    if (factoryPid != null) {
      newConfiguration=getConfigAdmin().createFactoryConfiguration(pid,null);
    }
 else {
      newConfiguration=getConfigAdmin().getConfiguration(pid,null);
    }
    return newConfiguration;
  }
}
