{
  int digits=ServiceConstants.DEFAULT_VERSION_DIGITS;
  Object o=bundle.getHeaders().get(ServiceConstants.INSTR_FAB_VERSION_RANGE_DIGITS);
  if (o instanceof String) {
    String value=(String)o;
    if (notEmpty(value)) {
      try {
        digits=Integer.parseInt(value);
      }
 catch (      NumberFormatException e) {
        LOG.warn("Failed to parse manifest header " + ServiceConstants.INSTR_FAB_VERSION_RANGE_DIGITS + " as a number. Got: '"+ value+ "' so ignoring it");
      }
      if (digits < 0 || digits > 4) {
        LOG.warn("Invalid value of manifest header " + ServiceConstants.INSTR_FAB_VERSION_RANGE_DIGITS + " as value "+ digits+ " is out of range so ignoring it");
        digits=ServiceConstants.DEFAULT_VERSION_DIGITS;
      }
    }
  }
  return Versions.toVersionRange(version,digits);
}
