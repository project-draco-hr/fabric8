{
  this.bundleContext=bundleContext;
  String zookeeperURL=getZookeeperURL(configuration);
  if (!Strings.isNullOrEmpty(zookeeperURL)) {
    State next=new State(configuration);
    if (state.compareAndSet(null,next)) {
      executor.submit(next);
    }
  }
  activateComponent();
}
