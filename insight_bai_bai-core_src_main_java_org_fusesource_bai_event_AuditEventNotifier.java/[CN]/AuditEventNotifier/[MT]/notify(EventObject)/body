{
  if (event instanceof ExchangeSendingEvent || event instanceof ExchangeCreatedEvent) {
    AbstractExchangeEvent ae=(AbstractExchangeEvent)event;
    ae.getExchange().setProperty(AuditConstants.DISPATCH_ID,ae.getExchange().getContext().getUuidGenerator().generateUuid());
  }
  if (!isStarted()) {
    log.debug("Cannot publish event as notifier is not started: {}",event);
    return;
  }
  if (!camelContext.getStatus().isStarted()) {
    log.debug("Cannot publish event as CamelContext is not started: {}",event);
    return;
  }
  Exchange exchange=producer.createExchange();
  exchange.getIn().setBody(event);
  exchange.setProperty(Exchange.NOTIFY_EVENT,Boolean.TRUE);
  try {
    producer.process(exchange);
  }
  finally {
    exchange.removeProperty(Exchange.NOTIFY_EVENT);
  }
}
