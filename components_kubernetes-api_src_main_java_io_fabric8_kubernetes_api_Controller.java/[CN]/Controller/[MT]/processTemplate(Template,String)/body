{
  if (isProcessTemplatesLocally()) {
    try {
      return Templates.processTemplatesLocally(entity);
    }
 catch (    IOException e) {
      onApplyError("Failed to process template " + sourceName + ". "+ e+ ". "+ entity,e);
      return null;
    }
  }
 else {
    String id=getName(entity);
    Objects.notNull(id,"No name for " + entity + " "+ sourceName);
    String namespace=KubernetesHelper.getNamespace(entity);
    LOG.info("Creating Template " + namespace + ":"+ id+ " "+ summaryText(entity));
    Object result=null;
    try {
      String json=kubernetes.processTemplate(entity,namespace);
      LOG.info("Template processed into: " + json);
      result=loadJson(json);
      printSummary(result);
    }
 catch (    Exception e) {
      onApplyError("Failed to create controller from " + sourceName + ". "+ e+ ". "+ entity,e);
    }
    return result;
  }
}
