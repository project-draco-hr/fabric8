{
  CreateContainerMetadata[] metadatas=null;
  validateProfileName(profiles);
  preCreateContainer(name);
  String jmxUser=username != null ? username : ShellUtils.retrieveFabricUser(session);
  String jmxPassword=password != null ? password : ShellUtils.retrieveFabricUserPassword(session);
  String url="child://" + parent;
  CreateChildContainerOptions.Builder builder=CreateContainerOptionsBuilder.child().name(name).parent(parent).bindAddress(bindAddress).resolver(resolver).manualIp(manualIp).ensembleServer(isEnsembleServer).number(number).zookeeperUrl(fabricService.getZookeeperUrl()).zookeeperPassword(fabricService.getZookeeperPassword()).jvmOpts(jvmOpts).jmxUser(jmxUser).jmxPassword(jmxPassword).version(version).profiles(getProfileNames());
  try {
    metadatas=fabricService.createContainers(builder.build());
    ShellUtils.storeFabricCredentials(session,jmxUser,jmxPassword);
  }
 catch (  FabricAuthenticationException ex) {
    username=null;
    password=null;
    promptForJmxCredentialsIfNeeded();
    metadatas=fabricService.createContainers(builder.jmxUser(username).jmxPassword(password).build());
    ShellUtils.storeFabricCredentials(session,username,password);
  }
  displayContainers(metadatas);
  return null;
}
