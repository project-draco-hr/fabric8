{
  String path=getPath(container,oName,address);
  try {
    String url;
    String id=container.getId();
    if (isFullAddress(address)) {
      url=address;
    }
 else {
      String cxfBus=getCxfServletPath();
      url="${zk:" + id + "/http}"+ cxfBus+ address;
    }
    url+="/api-docs";
    String physicalUrl=ZooKeeperUtils.getSubstitutedData(curator.get(),url);
    if (validApiDocsEndpoint(physicalUrl)) {
      String json="{\"id\":\"" + id + "\", \"services\":[\""+ url+ "\"],\"container\":\""+ id+ "\"}";
      LOGGER.info("Registered at " + path + " JSON: "+ json);
      setData(curator.get(),path,json,CreateMode.EPHEMERAL);
    }
 else {
      LOGGER.info("Ignoring endpoint with no swagger API docs at " + path + " at "+ physicalUrl);
    }
  }
 catch (  Exception e) {
    LOGGER.error("Failed to register API endpoint at {}.",path,e);
  }
}
