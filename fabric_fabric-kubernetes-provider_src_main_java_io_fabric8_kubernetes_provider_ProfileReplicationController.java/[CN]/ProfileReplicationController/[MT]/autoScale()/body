{
  FabricService service=fabricService.get();
  FabricRequirements requirements=service.getRequirements();
  List<ProfileRequirements> profileRequirements=requirements.getProfileRequirements();
  if (profileRequirements != null && !profileRequirements.isEmpty()) {
    AutoScaleStatus status=new AutoScaleStatus();
    for (    ProfileRequirements profileRequirement : profileRequirements) {
      autoScaleProfile(service,requirements,profileRequirement,status);
    }
    if (zkMasterCache != null) {
      try {
        String json=RequirementsJson.toJSON(status);
        String zkPath=ZkPath.AUTO_SCALE_STATUS.getPath();
        zkMasterCache.setStringData(zkPath,json,CreateMode.EPHEMERAL);
      }
 catch (      Exception e) {
        LOGGER.warn("Failed to write autoscale status " + e,e);
      }
    }
 else {
      LOGGER.warn("No ZooKeeperMasterCache!");
    }
  }
}
