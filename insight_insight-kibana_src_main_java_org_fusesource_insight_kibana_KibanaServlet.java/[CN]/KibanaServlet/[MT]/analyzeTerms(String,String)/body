{
  int limit=Config.analyzeShow;
  ClientRequest req=new ClientRequest(hash);
  Query query=new TermsFacet(req.getSearch(),req.getFrom(),req.getTo(),field.split(","),limit);
  LOGGER.debug("\tclient: {}",req);
  LOGGER.debug("\tquery: {}",query);
  List<String> indices=Kelastic.getIndices(req.getFrom(),req.getTo(),Config.facetIndexLimit);
  ObjectNode result=kelasticMultiFlat(query,indices);
  ObjectNode time=((ObjectNode)result.get("kibana")).putObject("time");
  time.put("from",formatDate(new Date(req.getFrom())));
  time.put("to",formatDate(new Date(req.getTo())));
  return Json.serialize(result);
}
