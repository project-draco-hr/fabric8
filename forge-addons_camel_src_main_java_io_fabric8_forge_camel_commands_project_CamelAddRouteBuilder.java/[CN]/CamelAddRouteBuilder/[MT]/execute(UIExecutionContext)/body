{
  Project project=getSelectedProject(context);
  facet=project.getFacet(JavaSourceFacet.class);
  Dependency core=findCamelCoreDependency(project);
  if (core == null) {
    return Results.fail("The project does not include camel-core");
  }
  String fqn=targetPackage.getValue() != null ? targetPackage.getValue() + "." + name.getValue() : name.getValue();
  JavaResource existing=facet.getJavaResource(fqn);
  if (existing != null && existing.exists()) {
    return Results.fail("A class with name " + fqn + " already exists");
  }
  final JavaClassSource javaClass=Roaster.create(JavaClassSource.class);
  javaClass.setName(name.getValue());
  if (targetPackage.getValue() != null) {
    javaClass.setPackage(targetPackage.getValue());
  }
  javaClass.setSuperType("RouteBuilder");
  javaClass.addImport("org.apache.camel.builder.RouteBuilder");
  javaClass.addMethod().setPublic().setReturnTypeVoid().setName("configure").setBody("from(\"timer:foo\").to(\"log:foo\");").addThrows(Exception.class);
  facet.saveJavaSource(javaClass);
  return Results.success("Added RouteBuilder " + name.getValue() + " to the project");
}
