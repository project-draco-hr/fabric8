{
  if (parents == null) {
    setAttribute(PARENTS,null);
    return;
  }
 else   if (isLocked()) {
    throw new UnsupportedOperationException("The profile " + id + " is locked and can not be modified");
  }
  try {
    StringBuilder sb=new StringBuilder();
    for (    Profile parent : parents) {
      if (!version.equals(parent.getVersion())) {
        throw new IllegalArgumentException("Version mismatch setting parent profile " + parent + " with version "+ parent.getVersion()+ " expected version "+ version);
      }
      if (sb.length() > 0) {
        sb.append(" ");
      }
      sb.append(parent.getId());
    }
    setAttribute(PARENTS,sb.toString());
  }
 catch (  Exception e) {
    throw FabricException.launderThrowable(e);
  }
}
