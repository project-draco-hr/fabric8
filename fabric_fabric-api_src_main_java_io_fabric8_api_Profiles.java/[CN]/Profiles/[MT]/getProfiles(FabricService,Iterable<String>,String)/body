{
  Version version;
  if (versionId == null) {
    version=fabricService.getDefaultVersion();
  }
 else {
    ProfileService profileService=fabricService.adapt(ProfileService.class);
    version=profileService.getRequiredVersion(versionId);
  }
  List<Profile> answer=new ArrayList<Profile>();
  if (profileIds != null && version != null) {
    for (    String profileId : profileIds) {
      Profile profile=version.getRequiredProfile(profileId);
      if (profile != null) {
        answer.add(profile);
      }
    }
  }
  return answer;
}
