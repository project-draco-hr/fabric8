{
  JobDataMap map=context.getMergedJobDataMap();
  Server server=(Server)map.get(Server.class.getName());
  GenericKeyedObjectPool pool=(GenericKeyedObjectPool)map.get(Server.JMX_CONNECTION_FACTORY_POOL);
  if (log.isDebugEnabled()) {
    log.debug("+++++ Started server job: " + server);
  }
  JMXConnector conn=null;
  try {
    if (server.getLocalMBeanServer() == null) {
      conn=(JMXConnector)pool.borrowObject(server);
    }
    JmxUtils.processServer(server,conn);
  }
 catch (  Exception e) {
    log.error("Error",e);
    throw new JobExecutionException(e);
  }
 finally {
    try {
      if (conn != null) {
        pool.returnObject(server,conn);
      }
    }
 catch (    Exception ex) {
      log.error("Error returning object to pool for server: " + server);
    }
  }
  if (log.isDebugEnabled()) {
    log.debug("+++++ Finished server job: " + server);
  }
}
