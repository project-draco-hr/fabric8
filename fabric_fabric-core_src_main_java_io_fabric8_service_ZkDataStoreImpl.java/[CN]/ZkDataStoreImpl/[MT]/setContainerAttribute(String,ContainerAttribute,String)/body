{
  assertValid();
  if (attribute == ContainerAttribute.Resolver) {
    try {
      setData(curator.get(),ZkPath.CONTAINER_IP.getPath(containerId),"${zk:" + containerId + "/"+ value+ "}");
      setData(curator.get(),ZkPath.CONTAINER_RESOLVER.getPath(containerId),value);
    }
 catch (    Exception e) {
      throw FabricException.launderThrowable(e);
    }
  }
 else   if (attribute == ContainerAttribute.Domains) {
    try {
      List<String> list=value != null ? Arrays.asList(value.split("\n")) : Collections.<String>emptyList();
      Set<String> zkSet=new HashSet<String>(getChildrenSafe(curator.get(),ZkPath.CONTAINER_DOMAINS.getPath(containerId)));
      for (      String domain : list) {
        String path=CONTAINER_DOMAIN.getPath(containerId,domain);
        if (!zkSet.remove(domain)) {
          setData(curator.get(),path,"");
        }
      }
      for (      String domain : zkSet) {
        String path=CONTAINER_DOMAIN.getPath(containerId,domain);
        deleteSafe(curator.get(),path);
      }
    }
 catch (    Exception e) {
      throw FabricException.launderThrowable(e);
    }
  }
 else {
    try {
      setData(curator.get(),getAttributePath(containerId,attribute),value);
    }
 catch (    KeeperException.NoNodeException e) {
    }
catch (    Exception e) {
      throw FabricException.launderThrowable(e);
    }
  }
}
