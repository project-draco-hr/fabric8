{
  List<String> services=new LinkedList<String>();
  for (  String name : connectors) {
    TransportConnector connector=server.getBroker().getConnectorByName(name);
    if (connector == null) {
      warn("ActiveMQ broker '%s' does not have a connector called '%s'",name,name);
    }
 else {
      services.add(connector.getConnectUri().getScheme() + "://${zk:" + System.getProperty("runtime.id")+ "/ip}:"+ connector.getPublishableConnectURI().getPort());
    }
  }
  discoveryAgent.setServices(services.toArray(new String[services.size()]));
}
