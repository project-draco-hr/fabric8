{
  File file=new File(patchDir,result.getPatch().getId() + ".patch.result");
  Properties props=new Properties();
  FileOutputStream fos=new FileOutputStream(file);
  try {
    props.put(DATE,Long.toString(result.getDate()));
    props.put(UPDATES + "." + COUNT,Integer.toString(result.getUpdates().size()));
    int i=0;
    for (    BundleUpdate update : result.getUpdates()) {
      props.put(UPDATES + "." + Integer.toString(i)+ "."+ SYMBOLIC_NAME,update.getSymbolicName());
      props.put(UPDATES + "." + Integer.toString(i)+ "."+ NEW_VERSION,update.getNewVersion());
      props.put(UPDATES + "." + Integer.toString(i)+ "."+ NEW_LOCATION,update.getNewLocation());
      props.put(UPDATES + "." + Integer.toString(i)+ "."+ OLD_VERSION,update.getPreviousVersion());
      props.put(UPDATES + "." + Integer.toString(i)+ "."+ OLD_LOCATION,update.getPreviousLocation());
      i++;
    }
    props.put(STARTUP,((ResultImpl)result).getStartup());
    String overrides=((ResultImpl)result).getOverrides();
    if (overrides != null) {
      props.put(OVERRIDES,overrides);
    }
    props.store(fos,"Installation results for patch " + result.getPatch().getId());
  }
  finally {
    close(fos);
  }
}
