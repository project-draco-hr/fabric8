{
  ObjectMapper mapper=new ObjectMapper();
  mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES,false);
  mapper.configure(DeserializationConfig.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY,true);
  List<MQBrokerConfigDTO> dtos=new ArrayList<MQBrokerConfigDTO>();
  MappingIterator<Object> iter=mapper.reader(MQBrokerConfigDTO.class).readValues(json);
  while (iter.hasNext()) {
    Object next=iter.next();
    if (next instanceof MQBrokerConfigDTO) {
      dtos.add((MQBrokerConfigDTO)next);
    }
 else {
      LOG.warn("Expected MQBrokerConfigDTO but parsed invalid DTO " + next);
    }
  }
  saveBrokerConfiguration(dtos);
}
