{
  FabricRequirements requirements=fabricService.getRequirements();
  List<MQBrokerStatusDTO> answer=new ArrayList<MQBrokerStatusDTO>();
  Version defaultVersion=fabricService.getDefaultVersion();
  Container[] containers=fabricService.getContainers();
  List<Profile> values=getActiveOrRequiredBrokerProfileMap(defaultVersion,requirements);
  for (  Profile profile : values) {
    List<MQBrokerConfigDTO> list=createConfigDTOs(mqService,profile);
    for (    MQBrokerConfigDTO configDTO : list) {
      ProfileRequirements profileRequirements=requirements.findProfileRequirements(profile.getId());
      int count=0;
      for (      Container container : containers) {
        if (Containers.containerHasProfile(container,profile)) {
          MQBrokerStatusDTO status=createStatusDTO(profile,configDTO,profileRequirements,container);
          count++;
          answer.add(status);
        }
      }
      if (count == 0) {
        MQBrokerStatusDTO status=createStatusDTO(profile,configDTO,profileRequirements,null);
        answer.add(status);
      }
    }
  }
  addMasterSlaveStatus(answer);
  return answer;
}
