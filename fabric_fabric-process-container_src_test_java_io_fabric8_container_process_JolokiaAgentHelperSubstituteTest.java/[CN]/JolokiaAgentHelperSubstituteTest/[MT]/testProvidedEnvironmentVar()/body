{
  Map<String,String> vars=new HashMap<>();
  vars.put("CHEESE","Edam");
  assertExpression("${env:CHEESE}","Edam",false,vars);
  assertExpression("A${env:CHEESE}B","A" + "Edam" + "B",false,vars);
  assertExpression("A${env:CHEESE?:DEFAULT}B","A" + "Edam" + "B",false,vars);
  assertExpression("${env:DOES_NOT_EXIST?:DEFAULT}","DEFAULT",false,vars);
  assertExpression("A${env:DOES_NOT_EXIST?:DEFAULT}B","ADEFAULTB",false,vars);
  assertExpression("${env:DOES_NOT_EXIST?:DEFAULT}${env:DOES_NOT_EXIST?:DEFAULT}","DEFAULTDEFAULT",false,vars);
  assertExpression("1${env:DOES_NOT_EXIST?:DEFAULT}2${env:DOES_NOT_EXIST?:DEFAULT}3","1DEFAULT2DEFAULT3",false,vars);
}
