{
  addPackages(tree);
  List<DependencyTree> children=tree.getChildren();
  for (  DependencyTree child : children) {
    if (isExcludedDependency(child)) {
      continue;
    }
 else     if (isIncludedOptionaDependency(child)) {
      addPackages(child);
      List<DependencyTree> descendants=child.getDescendants();
      for (      DependencyTree descendant : descendants) {
        if (!isExcludedDependency(descendant)) {
          addPackages(descendant);
        }
      }
    }
 else {
      addPackagesRecursive(child);
    }
  }
}
