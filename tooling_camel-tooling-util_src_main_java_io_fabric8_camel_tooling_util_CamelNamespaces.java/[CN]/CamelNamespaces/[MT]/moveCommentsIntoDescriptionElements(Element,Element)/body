{
  int idx=0;
  List<Node> nodes=e.getNodes();
  for (  Node node : nodes.toArray(new Node[nodes.size()])) {
    if (node instanceof Comment) {
      Comment c=(Comment)node;
      Token token=c.getToken();
      if (token != null) {
        String text=token.getText().trim().replace("<!--","").replace("-->","").trim();
        Element descr=findOrCreateDescriptionOnNextElement(e,idx,root);
        if (descr == null) {
          LOG.warn("No description node found");
          e.removeNode(c);
          Parent grandParent=root.getParent();
          if (grandParent != null) {
            grandParent.addNode(grandParent.nodeIndexOf(root),c);
          }
 else {
            LOG.warn("Cannot save the comment '{}' as there's no parent in the DOM",text);
          }
        }
 else {
          if (descr.getNodes().size() > 0) {
            text="\n" + text;
          }
          descr.addNode(new Text(text));
        }
      }
    }
 else     if (node instanceof Element) {
      moveCommentsIntoDescriptionElements((Element)node,root);
    }
    idx++;
  }
}
