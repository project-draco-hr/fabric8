{
  File jar=new File(storage,"temp/" + ServiceImpl.stripSymbolicName(bundleSymbolicName) + "-"+ version+ ".jar");
  File man=new File(storage,"temp/" + ServiceImpl.stripSymbolicName(bundleSymbolicName) + "-"+ version+ "/META-INF/MANIFEST.MF");
  man.getParentFile().mkdirs();
  Manifest mf=new Manifest();
  mf.getMainAttributes().putValue("Manifest-Version","1.0");
  mf.getMainAttributes().putValue("Bundle-ManifestVersion","2");
  mf.getMainAttributes().putValue("Bundle-SymbolicName",bundleSymbolicName);
  mf.getMainAttributes().putValue("Bundle-Version",version);
  FileOutputStream fos=new FileOutputStream(man);
  mf.write(fos);
  fos.close();
  fos=new FileOutputStream(jar);
  jarDir(man.getParentFile().getParentFile(),fos);
  fos.close();
  return jar;
}
