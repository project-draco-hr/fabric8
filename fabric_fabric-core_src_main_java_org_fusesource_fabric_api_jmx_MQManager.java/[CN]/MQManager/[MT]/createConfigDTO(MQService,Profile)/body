{
  MQBrokerConfigDTO dto=new MQBrokerConfigDTO();
  String brokerName=profile.getId();
  dto.setName(brokerName);
  String version=profile.getVersion();
  dto.setVersion(version);
  Profile[] parents=profile.getParents();
  if (parents != null && parents.length > 0) {
    dto.setParentProfile(parents[0].getId());
  }
  Map<String,String> configuration=mqService.getMQConfiguration(brokerName,profile);
  if (configuration != null) {
    dto.setConfigUrl(configuration.get(CONFIG_URL));
    dto.setData(configuration.get(DATA));
    dto.setGroup(configuration.get(GROUP));
    dto.setNetworks(configuration.get(NETWORKS));
    dto.setNetworksPassword(configuration.get(NETWORK_USER_NAME));
    dto.setNetworksPassword(configuration.get(NETWORK_PASSWORD));
    dto.setNetworks(configuration.get(NETWORKS));
    dto.setNetworks(configuration.get(NETWORKS));
    dto.setReplicas(Maps.integerValue(configuration,REPLICAS));
    dto.setSlaves(Maps.integerValue(configuration,SLAVES));
  }
  return dto;
}
