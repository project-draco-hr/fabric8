{
  ContainerProvider containerProvider=fabricService.getProvider(containerProviderScheme);
  Objects.notNull(containerProvider,"No ContainerProvider available for scheme: " + containerProviderScheme);
  List<CreateContainerBasicOptions.Builder> containerBuilders=new ArrayList<CreateContainerBasicOptions.Builder>();
  for (  String container : createContainers) {
    String type=null;
    String parent=fabricService.getCurrentContainerName();
    String jmxUser=dto.getUsername();
    String jmxPassword=dto.getPassword();
    String jvmOpts=dto.getJvmOpts();
    CreateContainerBasicOptions.Builder builder=containerProvider.newBuilder();
    builder=(CreateContainerBasicOptions.Builder)builder.name(container).parent(parent).number(dto.requiredInstances()).ensembleServer(false).proxyUri(fabricService.getMavenRepoURI()).jvmOpts(jvmOpts).zookeeperUrl(fabricService.getZookeeperUrl()).zookeeperPassword(fabricService.getZookeeperPassword()).profiles(profileId).version(version);
    if (builder instanceof CreateChildContainerOptions.Builder) {
      CreateChildContainerOptions.Builder childBuilder=(CreateChildContainerOptions.Builder)builder;
      builder=childBuilder.jmxUser(jmxUser).jmxPassword(jmxPassword);
    }
    containerBuilders.add(builder);
  }
  return containerBuilders;
}
