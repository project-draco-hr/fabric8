{
  File outDir=new File(basedir,"target/" + artifactId + "-output");
  System.out.println("Creating Archetype " + groupId + ":"+ artifactId+ ":"+ version);
  Map<String,String> properties=new ArchetypeHelper(new FileInputStream(archetypejar),outDir,groupId,artifactId,version).parseProperties();
  System.out.println("Has preferred properties: " + properties);
  ArchetypeHelper helper=new ArchetypeHelper(new FileInputStream(archetypejar),outDir,groupId,artifactId,version);
  helper.setPackageName(packageName);
  HashMap<String,String> overrideProperties=new HashMap<String,String>();
  overrideProperties.put("slf4j-version","1.5.0");
  helper.setOverrideProperties(overrideProperties);
  helper.execute();
  File pom=new File(outDir,"pom.xml");
  assertFileExists(pom);
  String pomText=FileCopyUtils.copyToString(new FileReader(pom));
  String badText="${camel-";
  if (pomText.contains(badText)) {
    if (verbose) {
      System.out.println(pomText);
    }
    fail("" + pom + " contains "+ badText);
  }
  outDirs.add(outDir.getPath());
}
