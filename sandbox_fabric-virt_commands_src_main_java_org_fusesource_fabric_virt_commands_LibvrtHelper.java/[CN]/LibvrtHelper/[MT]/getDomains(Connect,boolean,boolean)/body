{
  Set<Domain> domains=new LinkedHashSet<Domain>();
  if (active) {
    try {
      int[] activeDomainIds=connect.listDomains();
      for (      int domianId : activeDomainIds) {
        Domain activeDomain=connect.domainLookupByID(domianId);
        domains.add(activeDomain);
      }
    }
 catch (    LibvirtException e) {
    }
  }
  if (defined) {
    try {
      String[] definedDomainNames=connect.listDefinedDomains();
      for (      String definedDomainName : definedDomainNames) {
        Domain definedDomain=connect.domainLookupByName(definedDomainName);
        domains.add(definedDomain);
      }
    }
 catch (    LibvirtException e) {
    }
  }
  return domains;
}
