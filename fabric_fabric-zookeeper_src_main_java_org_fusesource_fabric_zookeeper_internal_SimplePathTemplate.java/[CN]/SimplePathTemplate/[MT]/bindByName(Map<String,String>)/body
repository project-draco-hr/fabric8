{
  if (params.size() != parameters.size()) {
    throw new IllegalArgumentException("Parameters mismatch. Path template contains " + parameters.size() + " parameters, "+ params.size()+ " was given");
  }
  String localPath=path;
  for (  Map.Entry<String,String> entry : params.entrySet()) {
    String key=entry.getKey();
    String value=entry.getValue();
    if (!parameters.contains(key)) {
      throw new IllegalArgumentException("Unknown parameter " + key);
    }
    localPath=replace(localPath,key,value);
  }
  return localPath;
}
