{
  assertNotNull(bus);
  JaxWsServerFactoryBean factory=new JaxWsServerFactoryBean();
  factory.setServiceBean(new HelloImpl());
  factory.setAddress("http://localhost:9000/simple/server");
  factory.setBus(bus);
  factory.create();
  for (int i=0; i < 100; i++) {
    if (!feature.getLoadBalanceStrategy().getAlternateAddressList().isEmpty()) {
      break;
    }
    Thread.sleep(100);
  }
  JaxWsProxyFactoryBean clientFactory=new JaxWsProxyFactoryBean();
  clientFactory.setServiceClass(Hello.class);
  clientFactory.setAddress("http://someotherplace");
  List<AbstractFeature> features=new ArrayList<AbstractFeature>();
  features.add(feature);
  clientFactory.setFeatures(features);
  Hello hello=clientFactory.create(Hello.class);
  String response=hello.sayHello();
  assertEquals("Get a wrong response","Hello",response);
  response=hello.sayHello();
  assertEquals("Get a wrong response","Hello",response);
  response=helloProxy.sayHello();
  assertEquals("Get a wrong response","Hello",response);
}
