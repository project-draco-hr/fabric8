{
  String remoteBrokerRef=element.getAttribute(REMOTE_BROKER_REF);
  if (StringUtils.hasText(remoteBrokerRef)) {
    if (element.getElementsByTagNameNS(BridgeNamespaceHandler.BRIDGE_NS,REMOTE_BROKER_ELEMENT).getLength() > 0) {
      throw new BeanCreationException(builder.getRawBeanDefinition().getResourceDescription(),element.getAttribute(ID_ATTRIBUTE),"Only one of " + REMOTE_BROKER_REF + " or "+ REMOTE_BROKER_ELEMENT+ " is allowed");
    }
    builder.addPropertyValue(REMOTE_BROKER_REF,remoteBrokerRef);
    builder.addPropertyReference(REMOTE_BROKER_PROPERTY,remoteBrokerRef);
  }
  String inboundDestinationsRef=element.getAttribute(INBOUND_DESTINATIONS_REF);
  if (StringUtils.hasText(inboundDestinationsRef)) {
    if (element.getElementsByTagNameNS(BridgeNamespaceHandler.BRIDGE_NS,INBOUND_DESTINATIONS_ELEMENT).getLength() > 0) {
      throw new BeanCreationException(builder.getRawBeanDefinition().getResourceDescription(),element.getAttribute(ID_ATTRIBUTE),"Only one of " + INBOUND_DESTINATIONS_REF + " or "+ INBOUND_DESTINATIONS_ELEMENT+ " is allowed");
    }
    builder.addPropertyValue(INBOUND_DESTINATIONS_REF,inboundDestinationsRef);
    builder.addPropertyReference(INBOUND_DESTINATIONS_PROPERTY,inboundDestinationsRef);
  }
  String outboundDestinationsRef=element.getAttribute(OUTBOUND_DESTINATIONS_REF);
  if (StringUtils.hasText(outboundDestinationsRef)) {
    if (element.getElementsByTagNameNS(BridgeNamespaceHandler.BRIDGE_NS,OUTBOUND_DESTINATIONS_ELEMENT).getLength() > 0) {
      throw new BeanCreationException(builder.getRawBeanDefinition().getResourceDescription(),element.getAttribute(ID_ATTRIBUTE),"Only one of " + OUTBOUND_DESTINATIONS_REF + " or "+ OUTBOUND_DESTINATIONS_ELEMENT+ " is allowed");
    }
    builder.addPropertyValue(OUTBOUND_DESTINATIONS_REF,outboundDestinationsRef);
    builder.addPropertyReference(OUTBOUND_DESTINATIONS_PROPERTY,outboundDestinationsRef);
  }
  NodeList childNodes=element.getChildNodes();
  for (int i=0; i < childNodes.getLength(); i++) {
    Node node=childNodes.item(i);
    if (node instanceof Element) {
      Element childElement=(Element)node;
      String localName=childElement.getLocalName();
      if (localName.equals(REMOTE_BROKER_ELEMENT)) {
        builder.addPropertyValue(REMOTE_BROKER_PROPERTY,brokerConfigParser.parse(childElement,parserContext));
      }
 else       if (localName.equals(OUTBOUND_DESTINATIONS_ELEMENT)) {
        builder.addPropertyValue(OUTBOUND_DESTINATIONS_PROPERTY,bridgeDestinationsConfigParser.parse(childElement,parserContext));
      }
 else       if (localName.equals(INBOUND_DESTINATIONS_ELEMENT)) {
        builder.addPropertyValue(INBOUND_DESTINATIONS_PROPERTY,bridgeDestinationsConfigParser.parse(childElement,parserContext));
      }
    }
  }
}
