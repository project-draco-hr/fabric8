{
  IZKClient zooKeeper=getOsgiService(IZKClient.class);
  FabricService fabricService=getOsgiService(FabricService.class);
  assertNotNull(fabricService);
  createChildAgent("child1");
  Thread.sleep(DEFAULT_WAIT);
  System.err.println(executeCommand("fabric:profile-edit -p default --repositories mvn:org.apache.karaf.assemblies.features/standard/2.2.2-fuse-02-06/xml/features"));
  System.err.println(executeCommand("fabric:profile-edit -p default --repositories mvn:org.apache.karaf.assemblies.features/enterprise/2.2.2-fuse-02-06/xml/features"));
  System.err.println(executeCommand("fabric:profile-edit -p default --repositories mvn:org.fusesource.fabric/fuse-fabric/1.1-SNAPSHOT/xml/features"));
  System.err.println(executeCommand("fabric:profile-edit -p default --repositories mvn:org.apache.camel.karaf/apache-camel/2.8.0-fuse-01-06/xml/features"));
  System.err.println(executeCommand("fabric:profile-edit -p default --features camel-core/2.8.0-fuse-01-06"));
  System.err.println(executeCommand("fabric:profile-edit -p default --features camel-blueprint/2.8.0-fuse-01-06"));
  System.err.println(executeCommand("fabric:profile-display default"));
  Thread.sleep(DEFAULT_WAIT);
  Thread.sleep(DEFAULT_WAIT);
  System.err.println(executeCommand("fabric:agent-connect -u admin -p admin child1 osgi:list -t 0"));
  String camelBundleCount=executeCommand("fabric:agent-connect -u admin -p admin child1 osgi:list -t 0| grep -c -i camel");
  int count=Integer.parseInt(camelBundleCount.trim());
  assertTrue("At least one camel bundle is expected",count >= 1);
}
