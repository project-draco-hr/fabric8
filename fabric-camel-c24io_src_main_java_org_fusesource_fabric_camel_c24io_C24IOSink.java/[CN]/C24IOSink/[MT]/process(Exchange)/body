{
  ComplexDataObject dataObject=unmarshalDataObject(exchange);
  dataObject=transformDataObject(exchange,dataObject);
  Sink s=getSink();
  if (s == null) {
    s=dataObject.getModel().sink();
  }
  ByteArrayOutputStream buffer=new ByteArrayOutputStream();
  s.setOutputStream(buffer);
  s.writeObject(dataObject);
  Message out=exchange.getOut();
  out.setHeader("c24io.sink",sink);
  out.setBody(buffer.toByteArray());
}
