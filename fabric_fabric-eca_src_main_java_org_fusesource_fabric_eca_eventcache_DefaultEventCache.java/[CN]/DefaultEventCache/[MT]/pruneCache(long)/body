{
  try {
    lock.writeLock().lock();
    long window=NOT_SET;
    if (getWindowTime() != NOT_SET) {
      window=currentTime - getWindowTime();
    }
    int count=0;
    CacheItemImpl node=root;
    while (node != null) {
      if ((window != NOT_SET && node.timeStamp < window) || (windowCount != NOT_SET && size > windowCount)) {
        CacheItemImpl remove=node;
        node=node.getNext();
        removeNode(remove);
      }
 else {
        break;
      }
    }
  }
  finally {
    lock.writeLock().unlock();
  }
}
