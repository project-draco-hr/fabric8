{
  if (props == null) {
    throw new IllegalArgumentException("props was null.");
  }
  HashMap<String,Object> rc=new HashMap<String,Object>(props.size());
  for (Iterator<Entry> iter=props.entrySet().iterator(); iter.hasNext(); ) {
    Entry entry=iter.next();
    String name=(String)entry.getKey();
    if (name.startsWith(optionPrefix)) {
      name=name.substring(optionPrefix.length());
      rc.put(name,entry.getValue());
      iter.remove();
    }
  }
  return rc;
}
