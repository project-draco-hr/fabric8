{
  if (Util.isASystemBundle(getBundleContext(),bundle) && !Util.accessToSystemBundleIsAllowed(bundle.getBundleId(),session)) {
    return;
  }
  stopBundle(bundle);
  if (bundle.getState() != Bundle.UNINSTALLED) {
    LOG.debug("Uninstalling bundle %s version %s",bundle.getSymbolicName(),bundle.getVersion());
    try {
      bundle.uninstall();
    }
 catch (    BundleException e) {
      System.out.println("Failed to start " + bundle.getSymbolicName() + " "+ bundle.getVersion()+ ". "+ e);
      e.printStackTrace();
    }
  }
}
