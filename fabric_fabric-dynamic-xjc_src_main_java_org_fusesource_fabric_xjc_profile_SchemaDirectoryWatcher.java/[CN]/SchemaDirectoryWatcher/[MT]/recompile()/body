{
  LOG.debug("Looking for XSDs to recompile");
  Set<String> urls=new TreeSet<String>();
  List<PathChildrenCache> pathCaches=new ArrayList<PathChildrenCache>(pathCacheMap.values());
  for (  PathChildrenCache pathCache : pathCaches) {
    List<ChildData> childData=pathCache.getCurrentData();
    int totalItems=childData.size();
    for (    ChildData data : childData) {
      String path=data.getPath();
      urls.add("zk:" + path);
    }
  }
  LOG.info("Recompiling XSDs at URLs: " + urls);
  startedFlag.set(false);
  ClassLoader classLoader=AriesFrameworkUtil.getClassLoader(bundleContext.getBundle());
  if (classLoader == null) {
    classLoader=getClass().getClassLoader();
  }
  DynamicXJC xjc=new DynamicXJC(classLoader);
  xjc.setSchemaUrls(new ArrayList<String>(urls));
  compileResults=xjc.compileSchemas();
  LOG.info("Got XJC JAXBContext: " + compileResults.getJAXBContext());
  if (dataFormat != null) {
    dataFormat.updateCompileResults(compileResults);
  }
}
