{
  if (!PBMessage.class.isAssignableFrom(type)) {
    throw new IllegalArgumentException("Invalid " + name() + " serialization method: method argument not a "+ PBMessage.class.getName());
  }
  PBMessage msg=(PBMessage)arg;
  if (msg == null) {
    return;
  }
  msg.freeze().writeUnframed(target);
}
