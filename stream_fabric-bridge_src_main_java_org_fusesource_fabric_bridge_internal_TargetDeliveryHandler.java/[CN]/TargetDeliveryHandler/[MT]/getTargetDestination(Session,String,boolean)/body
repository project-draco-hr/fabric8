{
  Destination targetDestination;
  try {
    FutureTask<Destination> value=new FutureTask<Destination>(new Callable<Destination>(){
      @Override public Destination call() throws Exception {
        return destinationResolver.resolveDestinationName(lookupSession,destinationName,pubSubDomain);
      }
    }
);
    FutureTask<Destination> futureDestination=destinationMap.putIfAbsent(destinationName,value);
    if (futureDestination == null) {
      futureDestination=value;
      futureDestination.run();
    }
    targetDestination=futureDestination.get();
  }
 catch (  InterruptedException e) {
    throw new JMSException("InterruptedException while getting target destination: " + e.getMessage());
  }
catch (  ExecutionException e) {
    throw new JMSException("ExecutionException while getting target destination: " + e.getMessage());
  }
  return targetDestination;
}
