{
  singleton.add(this);
  executors=Executors.newSingleThreadScheduledExecutor();
  executors.scheduleWithFixedDelay(new Runnable(){
    @Override public void run(){
      try {
        if (gitService != null) {
          String container=System.getProperty("karaf.name");
          String login=ZooKeeperUtils.getContainerLogin(container);
          String token=ZooKeeperUtils.generateContainerToken(zookeeper,container);
          CredentialsProvider cp=new UsernamePasswordCredentialsProvider(login,token);
          if (singleton.isMaster()) {
            update(gitService.get(),zookeeper,cp);
          }
 else {
            updateLocal(gitService.get(),zookeeper,cp);
          }
        }
      }
 catch (      Exception e) {
        if (LOGGER.isDebugEnabled()) {
          LOGGER.debug("Unable to sync git/zookeeper",e);
        }
 else {
          LOGGER.info("Unable to sync git / zookeeper: " + e.getClass().getName() + ": "+ e.getMessage());
        }
      }
    }
  }
,period,period,TimeUnit.MILLISECONDS);
}
