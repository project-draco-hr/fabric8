{
  final String LATITUDE="latitude";
  final String LONGITUDE="longitude";
  String result="";
  Closeable closeable=null;
  try {
    String urlStr="http://freegeoip.net/json/";
    URL url=new URL(urlStr);
    URLConnection urlConnection=url.openConnection();
    urlConnection.setConnectTimeout(50000);
    urlConnection.setReadTimeout(5000);
    InputStream is=urlConnection.getInputStream();
    closeable=is;
    InputStreamReader isr=new InputStreamReader(is);
    closeable=isr;
    BufferedReader in=new BufferedReader(isr);
    closeable=in;
    String inputLine;
    StringBuilder temp=new StringBuilder();
    while ((inputLine=in.readLine()) != null) {
      temp.append(inputLine);
    }
    if (temp.length() > 0) {
      ObjectMapper mapper=new ObjectMapper();
      JsonNode node=mapper.readValue(temp.toString(),JsonNode.class);
      JsonNode latitudeNode=node.get(LATITUDE);
      JsonNode longitudeNode=node.get(LONGITUDE);
      if (latitudeNode != null && longitudeNode != null) {
        result=latitudeNode.toString() + "," + longitudeNode.toString();
      }
    }
  }
 catch (  Exception e) {
  }
 finally {
    if (closeable != null) {
      try {
        closeable.close();
      }
 catch (      IOException e) {
      }
    }
  }
  return result;
}
