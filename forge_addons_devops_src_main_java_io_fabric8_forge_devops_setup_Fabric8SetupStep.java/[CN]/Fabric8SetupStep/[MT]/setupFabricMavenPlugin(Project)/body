{
  MavenPluginBuilder pluginBuilder;
  MavenPlugin plugin=MavenHelpers.findPlugin(project,"io.fabric8","fabric8-maven-plugin");
  if (plugin != null) {
    LOG.info("Found existing fabric8-maven-plugin");
    pluginBuilder=MavenPluginBuilder.create(plugin);
  }
 else {
    LOG.info("Adding fabric8-maven-plugin");
    pluginBuilder=MavenPluginBuilder.create().setCoordinate(MavenHelpers.createCoordinate("io.fabric8","fabric8-maven-plugin",VersionHelper.fabric8Version())).addExecution(ExecutionBuilder.create().setId("json").setPhase("generate-resources").addGoal("json")).addExecution(ExecutionBuilder.create().setId("attach").setPhase("package").addGoal("attach"));
  }
  MavenPluginFacet pluginFacet=project.getFacet(MavenPluginFacet.class);
  pluginFacet.addPlugin(pluginBuilder);
}
