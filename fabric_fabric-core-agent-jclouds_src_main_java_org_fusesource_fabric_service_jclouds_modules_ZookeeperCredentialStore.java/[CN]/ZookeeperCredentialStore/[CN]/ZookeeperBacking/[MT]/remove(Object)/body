{
  Credentials credentials=cache.asMap().remove(o);
  if (zookeeper.isConnected()) {
    try {
      if (credentials == null) {
        credentials=get(o);
      }
      String normalizedKey=normalizeKey(o);
      if (zookeeper.exists(ZkPath.CLOUD_NODE_IDENTITY.getPath(normalizedKey)) != null) {
        zookeeper.deleteWithChildren(ZkPath.CLOUD_NODE_IDENTITY.getPath(normalizedKey));
      }
      if (zookeeper.exists(ZkPath.CLOUD_NODE_CREDENTIAL.getPath(normalizedKey)) != null) {
        zookeeper.deleteWithChildren(ZkPath.CLOUD_NODE_CREDENTIAL.getPath(normalizedKey));
      }
    }
 catch (    Exception e) {
      LOGGER.warn("Failed to remove jclouds credentials to zookeeper.",e);
    }
  }
  return credentials;
}
