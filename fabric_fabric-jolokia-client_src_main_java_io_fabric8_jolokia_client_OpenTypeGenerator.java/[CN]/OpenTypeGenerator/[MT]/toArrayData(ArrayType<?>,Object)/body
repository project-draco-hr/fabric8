{
  List<?> items;
  if (value instanceof Collection) {
    items=new ArrayList<Object>((Collection<?>)value);
  }
 else {
    items=Arrays.asList(value);
  }
  Object array=getOpenTypeArray(atype,ClassLoader.getSystemClassLoader(),items.size());
  OpenType<?> elementType=atype.getElementOpenType();
  for (int i=0; i < items.size(); i++) {
    Object val=toOpenData(elementType,items.get(i));
    Array.set(array,i,val);
  }
  return array;
}
