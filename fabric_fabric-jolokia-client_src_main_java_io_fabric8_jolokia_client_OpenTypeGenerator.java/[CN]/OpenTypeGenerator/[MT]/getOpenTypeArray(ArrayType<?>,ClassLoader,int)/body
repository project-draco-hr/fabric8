{
  Class<?> compType;
  OpenType<?> elementType=atype.getElementOpenType();
  try {
    if (atype.isPrimitiveArray()) {
      compType=Class.forName(atype.getTypeName()).getComponentType();
    }
 else     if (elementType instanceof CompositeType) {
      compType=CompositeData.class;
    }
 else     if (elementType instanceof TabularType) {
      compType=TabularData.class;
    }
 else {
      compType=classLoader.loadClass(elementType.getTypeName());
    }
  }
 catch (  ClassNotFoundException ex) {
    OpenDataException odex=new OpenDataException("Cannot load array type: " + atype);
    odex.initCause(ex);
    throw odex;
  }
  return Array.newInstance(compType,dimension);
}
