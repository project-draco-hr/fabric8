{
  String connectString=getZooKeeperUrl();
  if (connectString == null) {
    connectString=System.getProperty(ZOOKEEPER_URL,"localhost:2181");
  }
  String password=getZooKeeperPassword();
  if (password == null) {
    System.getProperty(ZOOKEEPER_PASSWORD);
  }
  LOG.debug("CuratorFramework not found in camel registry, creating new with connection " + connectString);
  CuratorFrameworkFactory.Builder builder=CuratorFrameworkFactory.builder().connectString(connectString).retryPolicy(new RetryOneTime(1000)).connectionTimeoutMs(getMaximumConnectionTimeout());
  if (password != null && !password.isEmpty()) {
    builder.authorization("digest",("fabric:" + password).getBytes());
  }
  curator=builder.build();
  LOG.debug("Starting curator " + curator);
  curator.start();
  return curator;
}
