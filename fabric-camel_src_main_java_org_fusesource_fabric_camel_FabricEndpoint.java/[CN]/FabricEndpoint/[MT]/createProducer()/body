{
  final FabricEndpoint endpoint=this;
  return new DefaultProducer(endpoint){
    public void process(    Exchange exchange) throws Exception {
      Map<String,TrackedNode<EndpointLocator>> tree=treeTracker.getTree();
      LOG.debug("Looking up ZooKeeper entry: " + fabricPath);
      TrackedNode<EndpointLocator> locatorNode=tree.get(fabricPath);
      if (locatorNode == null || locatorNode.getData() == null) {
        throw new NoEndpointAvailableException(endpoint);
      }
 else {
        EndpointLocator locator=locatorNode.getData();
        locator.process(exchange,endpoint);
      }
    }
  }
;
}
