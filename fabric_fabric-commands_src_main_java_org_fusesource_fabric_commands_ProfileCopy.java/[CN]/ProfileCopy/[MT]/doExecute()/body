{
  checkFabricAvailable();
  validateProfileName(source);
  validateProfileName(target);
  Version ver=version != null ? fabricService.getVersion(version) : fabricService.getDefaultVersion();
  if (!ver.hasProfile(source)) {
    System.out.println("Source profile " + target + " not found.");
    return null;
  }
 else   if (ver.hasProfile(target)) {
    if (!force) {
      System.out.println("Target profile " + target + " already exists. Use --force if you want to overwrite.");
      return null;
    }
 else {
    }
    ver.getProfile(target).delete();
  }
  for (  Profile profile : ver.getProfiles()) {
    if (source.equals(profile.getId())) {
      Profile targetProfile=ver.createProfile(target);
      targetProfile.setParents(profile.getParents());
      targetProfile.setConfigurations(profile.getConfigurations());
      for (      Map.Entry<String,String> entry : profile.getAttributes().entrySet()) {
        targetProfile.setAttribute(entry.getKey(),entry.getValue());
      }
    }
  }
  return null;
}
