{
  try {
    URI uri=new URI(address);
    int port=PublicPortMapper.getPublicPort(uri.getPort());
    String hostname="${zk:" + container + "/ip}";
    String path=uri.getPath();
    while (path.startsWith("/")) {
      path=path.substring(1);
    }
    return uri.getScheme() + "://" + hostname+ ":"+ port+ "/"+ path;
  }
 catch (  URISyntaxException e) {
    LOGGER.warn("Could not map URL to a public address: " + address);
    return address;
  }
}
