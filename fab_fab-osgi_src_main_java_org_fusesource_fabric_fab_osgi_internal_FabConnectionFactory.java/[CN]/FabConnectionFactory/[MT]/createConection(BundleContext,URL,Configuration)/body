{
  String protocol=url.getProtocol();
  if (ServiceConstants.PROTOCOL_FAB.equals(protocol)) {
    if (url.getPath() == null || url.getPath().trim().length() == 0) {
      throw new MalformedURLException("Path can not be null or empty. Syntax: fab:<fab-jar-uri>");
    }
    URL jar=new URL(url.getPath());
    return new FabConnection(jar,config,bundleContext);
  }
  throw new MalformedURLException("Unsupported protocol: " + protocol);
}
