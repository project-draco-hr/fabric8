{
  if (active.compareAndSet(true,false)) {
    treeCache.getListenable().removeListener(treeListener);
    Closeables.closeQuitely(treeCache);
    treeCache=null;
    treeCacheExecutor.shutdownNow();
    for (    Gateway gateway : gateways) {
      gateway.destroy();
    }
  }
}
