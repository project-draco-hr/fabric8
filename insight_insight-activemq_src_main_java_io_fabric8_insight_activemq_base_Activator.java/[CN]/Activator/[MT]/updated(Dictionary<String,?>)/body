{
  Map<String,Map<String,String>> props=new HashMap<String,Map<String,String>>();
  for (  String plugin : plugins.keySet()) {
    props.put(plugin,new HashMap<String,String>());
  }
  if (properties != null) {
    for (Enumeration<String> es=properties.keys(); es.hasMoreElements(); ) {
      String key=es.nextElement();
      Object val=properties.get(key);
      for (      String plugin : plugins.keySet()) {
        if (key.startsWith(plugin + ".")) {
          key=key.substring((plugin + ".").length());
          props.get(plugin).put(key,val != null ? val.toString() : null);
        }
      }
    }
  }
  for (  String key : plugins.keySet()) {
    Map<String,String> p=props.get(key);
    plugins.get(key).update(p);
  }
}
