{
  if (logFilePattern != null) {
    long currentFile=-1;
    long currentOffset=-1;
    try {
      if (!positionFile.exists()) {
        writeText(positionFile,"0:0");
      }
      String data=readText(positionFile).trim();
      String[] split=data.split(":");
      currentFile=Long.parseLong(split[0]);
      currentOffset=Long.parseLong(split[1]);
      while (runAllowed.get()) {
        File current=new File(String.format(logFilePattern,currentFile));
        FileInputStream is=new FileInputStream(current);
        try {
          process(is,currentFile,currentOffset);
          currentFile++;
          currentOffset=0;
        }
  finally {
          is.close();
        }
      }
    }
 catch (    Exception e) {
      e.printStackTrace();
      return;
    }
  }
 else {
    if (is == null) {
      is=System.in;
    }
    try {
      process(is,0,0);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
}
