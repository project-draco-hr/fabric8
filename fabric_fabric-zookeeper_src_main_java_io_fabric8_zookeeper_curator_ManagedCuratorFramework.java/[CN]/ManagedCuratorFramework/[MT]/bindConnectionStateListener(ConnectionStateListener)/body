{
  connectionStateListeners.add(connectionStateListener);
  State curr=state.get();
  CuratorFramework curator=curr != null ? curr.curator : null;
  if (curator != null && curator.getZookeeperClient().isConnected()) {
    connectionStateListener.stateChanged(curator,ConnectionState.CONNECTED);
  }
}
