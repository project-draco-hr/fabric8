{
  try {
    final String zooKeeperUrl=getZooKeeperUrl();
    createAgentConfig("",name);
    Agent agent=doCreateAgentFromArguments(args,name,zooKeeperUrl);
    if (agent == null) {
      throw new IllegalArgumentException("Unknown CreateAgentArguments " + args + " when creating agent "+ name);
    }
    return agent;
  }
 catch (  FabricException e) {
    throw e;
  }
catch (  Exception e) {
    throw new FabricException(e);
  }
}
