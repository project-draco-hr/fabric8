{
  Profile test=service.getDefaultVersion().createProfile("testGetAndSetRepositories");
  List<String> repos=new ArrayList<String>();
  repos.add("http://foo");
  repos.add("http://bar");
  repos.add("http://cheese");
  test.setRepositories(repos);
  Map<String,String> rawMapConfig=test.getConfigurations().get("org.fusesource.fabric.agent");
  String keys[]=rawMapConfig.keySet().toArray(new String[0]);
  for (  String key : keys) {
    LOG.info(String.format("%s : %s",key,rawMapConfig.get(key)));
    assertTrue(repos.contains(rawMapConfig.remove(key)));
  }
  assertTrue(rawMapConfig.isEmpty());
  byte b[]=test.getFileConfigurations().get("org.fusesource.fabric.agent.properties");
  Properties props=new Properties();
  props.load(new ByteArrayInputStream(b));
  keys=props.keySet().toArray(new String[0]);
  for (  String key : keys) {
    LOG.info(String.format("%s : %s",key,props.get(key)));
    assertTrue(repos.contains(props.remove(key).toString()));
  }
  assertTrue(props.isEmpty());
}
