{
  JCoDestination jcoDestination=JCoDestinationManager.getDestination("TestDestination");
  JCoRepository jcoRepository=jcoDestination.getRepository();
  JCoFunctionTemplate functionTemplate=jcoRepository.getFunctionTemplate("BAPI_FLCUST_GETLIST");
  JCoRecordMetaData jcoRecordMetaData=functionTemplate.getTableParameterList().getRecordMetaData("CUSTOMER_LIST");
  EcoreFactory ecoreFactory=EcoreFactory.eINSTANCE;
  EPackage ePackage=ecoreFactory.createEPackage();
  ePackage.setName("BAPI_FLCUST_GETLIST");
  ePackage.setNsPrefix("BAPI_FLCUST_GETLIST");
  ePackage.setNsURI("http://sap.fusesource.org/rfc/NPL/BAPI_FLCUST_GETLIST");
  EGenericType tableGenericSuperType=EcoreFactory.eINSTANCE.createEGenericType();
  EClass tableSuperClass=RfcPackage.eINSTANCE.getTable();
  tableGenericSuperType.setEClassifier(tableSuperClass);
  EGenericType rowGenericType=EcoreFactory.eINSTANCE.createEGenericType();
  EClass structureType=RfcUtil.getStructureClass(ePackage,jcoRecordMetaData);
  rowGenericType.setEClassifier(structureType);
  tableGenericSuperType.getETypeArguments().add(rowGenericType);
  EClass tableClass=EcoreFactory.eINSTANCE.createEClass();
  ePackage.getEClassifiers().add(tableClass);
  tableClass.setName(jcoRecordMetaData.getName() + "_TABLE");
  ((EClass)tableClass).getEGenericSuperTypes().add(tableGenericSuperType);
  Resource res=new XMLResourceImpl();
  res.getContents().add(ePackage);
  res.save(System.out,null);
  EObject eObject=ePackage.getEFactoryInstance().create(tableClass);
  EStructuralFeature rowFeature=eObject.eClass().getEStructuralFeature("row");
  System.out.println("Row feature: " + rowFeature);
  System.out.println("Row feature type: " + rowFeature.getEType());
  System.out.println("Row feature generic type: " + rowFeature.getEGenericType());
}
