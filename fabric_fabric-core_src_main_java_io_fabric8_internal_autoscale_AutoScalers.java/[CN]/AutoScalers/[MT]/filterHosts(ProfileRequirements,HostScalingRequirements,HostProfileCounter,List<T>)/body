{
  SortedSet<LoadSortedHostConfiguration<T>> answer=new TreeSet<>();
  int index=0;
  Filter<String> hostFilter=createHostAliasFilter(scalingRequirements);
  Filter<HostConfiguration> configFilter=createHostConfigFilter(scalingRequirements);
  for (  T config : hosts) {
    String hostName=config.getHostName();
    if (hostFilter.matches(hostName) && configFilter.matches(config)) {
      String profile=profileRequirements.getProfile();
      boolean valid=isValidHost(config,profileRequirements,hostProfileCounter,hostName);
      if (valid) {
        answer.add(new LoadSortedHostConfiguration<>(hostName,config,profile,hostProfileCounter,index++));
      }
    }
  }
  return answer;
}
