{
  final Filter<DependencyTree> filter=parse(includeOptionalDependencyFilterText);
  final boolean excludeAll=Filters.isEmpty(filter);
  return new Filter<DependencyTree>(){
    @Override public boolean matches(    DependencyTree tree){
      if (tree.isThisOrDescendantOptional()) {
        if (excludeAll) {
          return true;
        }
 else {
          return !filter.matches(tree);
        }
      }
      return false;
    }
  }
;
}
