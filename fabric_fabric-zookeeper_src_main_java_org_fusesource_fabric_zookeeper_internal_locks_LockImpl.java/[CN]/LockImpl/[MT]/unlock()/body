{
  try {
    Thread current=Thread.currentThread();
    LockData lockData=threadLocks.get(current);
    if (lockData != null && lockData.getCount().decrementAndGet() == 0) {
      if (zooKeeper.exists(lockData.getLockPath()) != null) {
        zooKeeper.delete(lockData.getLockPath());
      }
      threadLocks.remove(current);
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
