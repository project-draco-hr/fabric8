{
  for (  Entry<BridgedDestination,AbstractMessageListenerContainer> entry : listenerMap.entrySet()) {
    final BridgedDestination destination=entry.getKey();
    final AbstractMessageListenerContainer listener=entry.getValue();
    if (listener.isRunning()) {
      try {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Stopping listener for " + destination);
        }
        listener.stop();
        if (LOG.isDebugEnabled()) {
          LOG.debug("Listener stopped for " + destination);
        }
      }
 catch (      JmsException e) {
        LOG.error("Error stopping connector for listener " + listener + ": "+ e.getMessage(),e);
      }
    }
  }
  if (localConnectionFactory != null && (localConnectionFactory instanceof PooledConnectionFactory)) {
    LOG.debug("Stopping local connection factory");
    ((PooledConnectionFactory)localConnectionFactory).stop();
  }
  if (remoteConnectionFactory != null && (remoteConnectionFactory instanceof PooledConnectionFactory)) {
    LOG.debug("Stopping remote connection factory");
    ((PooledConnectionFactory)remoteConnectionFactory).stop();
  }
  LOG.info("Stopped");
}
