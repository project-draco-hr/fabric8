{
  try {
    if (zooKeeper.isConnected()) {
      Container current=getContainer();
      String name=System.getProperty(SystemProperties.KARAF_NAME);
      if (event.getPid().equals(SSH_PID) && event.getType() == ConfigurationEvent.CM_UPDATED) {
        Configuration config=configurationAdmin.getConfiguration(SSH_PID);
        int sshPort=Integer.parseInt((String)config.getProperties().get(SSH_KEY));
        String sshUrl=getSshUrl(name,sshPort);
        ZooKeeperUtils.set(zooKeeper,CONTAINER_SSH.getPath(name),sshUrl);
        fabricService.getPortService().unRegisterPort(current,SSH_PID);
        fabricService.getPortService().registerPort(current,SSH_PID,SSH_KEY,sshPort);
      }
      if (event.getPid().equals(HTTP_PID) && event.getType() == ConfigurationEvent.CM_UPDATED) {
        Configuration config=configurationAdmin.getConfiguration(HTTP_PID);
        int httpPort=Integer.parseInt((String)config.getProperties().get(HTTP_KEY));
        String httpUrl=getSshUrl(name,httpPort);
        ZooKeeperUtils.set(zooKeeper,CONTAINER_HTTP.getPath(name),httpUrl);
        fabricService.getPortService().unRegisterPort(current,HTTP_PID);
        fabricService.getPortService().registerPort(current,HTTP_PID,HTTP_KEY,httpPort);
      }
      if (event.getPid().equals(MANAGEMENT_PID) && event.getType() == ConfigurationEvent.CM_UPDATED) {
        Configuration config=configurationAdmin.getConfiguration(MANAGEMENT_PID);
        int rmiServerPort=Integer.parseInt((String)config.getProperties().get(RMI_SERVER_KEY));
        int rmiRegistryPort=Integer.parseInt((String)config.getProperties().get(RMI_REGISTRY_KEY));
        String sshUrl=getJmxUrl(name,rmiRegistryPort,rmiServerPort);
        ZooKeeperUtils.set(zooKeeper,CONTAINER_JMX.getPath(name),sshUrl);
        fabricService.getPortService().unRegisterPort(current,MANAGEMENT_PID);
        fabricService.getPortService().registerPort(current,MANAGEMENT_PID,RMI_SERVER_KEY,rmiServerPort);
        fabricService.getPortService().registerPort(current,MANAGEMENT_PID,RMI_REGISTRY_KEY,rmiRegistryPort);
      }
    }
  }
 catch (  Exception e) {
  }
}
