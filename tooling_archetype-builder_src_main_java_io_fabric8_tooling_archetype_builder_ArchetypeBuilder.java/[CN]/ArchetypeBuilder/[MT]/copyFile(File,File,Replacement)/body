{
  if (replaceFn != null && isSourceFile(src)) {
    String original=IOHelpers.readFully(src);
    String escapeDollarSquiggly=original;
    if (original.contains("${")) {
      String replaced=original.replaceAll(Pattern.quote("${"),"\\${D}{");
      escapeDollarSquiggly="#set( $D = '$' )\n" + replaced;
    }
    String text=replaceFn.replace(escapeDollarSquiggly);
    IOHelpers.writeFully(dest,text);
  }
 else {
    if (LOG.isDebugEnabled()) {
      LOG.warn("Not a source dir as the extension is {}",Files.getExtension(src.getName()));
    }
    Files.copy(src,dest);
  }
}
