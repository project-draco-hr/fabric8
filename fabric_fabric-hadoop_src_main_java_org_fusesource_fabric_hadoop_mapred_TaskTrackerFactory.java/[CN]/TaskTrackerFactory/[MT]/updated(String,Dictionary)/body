{
  ClassLoader oldTccl=Thread.currentThread().getContextClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(getClass().getClassLoader());
    deleted(pid);
    JobConf conf=new JobConf();
    for (Enumeration e=properties.keys(); e.hasMoreElements(); ) {
      Object key=e.nextElement();
      Object val=properties.get(key);
      conf.set(key.toString(),val.toString());
    }
    TaskTracker taskTracker=new TaskTracker(conf);
    new Daemon(taskTracker).start();
    taskTrackers.put(pid,taskTracker);
    services.put(pid,bundleContext.registerService(TaskTracker.class.getName(),taskTracker,properties));
  }
 catch (  Exception e) {
    throw (ConfigurationException)new ConfigurationException(null,"Unable to parse HDFS configuration: " + e.getMessage()).initCause(e);
  }
 finally {
    Thread.currentThread().setContextClassLoader(oldTccl);
  }
}
