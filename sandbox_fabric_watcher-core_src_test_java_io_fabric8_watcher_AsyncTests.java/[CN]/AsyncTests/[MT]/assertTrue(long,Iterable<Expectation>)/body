{
  long start=System.currentTimeMillis();
  while (true) {
    List<Expectation> failures=new ArrayList<Expectation>();
    for (    Expectation expectation : expectations) {
      if (!expectation.isValid()) {
        failures.add(expectation);
      }
    }
    if (failures.isEmpty()) {
      return;
    }
    long now=System.currentTimeMillis();
    long elapsed=now - start;
    if (elapsed < timeout) {
      try {
        Thread.sleep(1000);
      }
 catch (      InterruptedException e) {
      }
    }
 else {
      String message=failures.toString();
      fail(message + ". Failed after " + elapsed+ " millis");
    }
  }
}
