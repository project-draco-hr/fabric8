{
  Buffer header=new Buffer(category.WIDTH);
  header.readFrom(in);
  if (category.WIDTH == 1) {
    dataSize=0xff & header.data[0];
  }
 else {
    dataSize=(int)BitUtils.getUInt(header.data,0);
  }
  Buffer rc=new Buffer(1 + header.length + dataSize);
  rc.data[0]=formatCode;
  System.arraycopy(header.data,0,rc.data,1,header.length);
  in.readFully(rc.data,getDataOffset() - category.WIDTH,getDataSize());
  if (category.WIDTH == 1) {
    dataCount=0xff & rc.data[1 + category.WIDTH];
  }
 else {
    dataCount=(int)BitUtils.getUInt(rc.data,1 + category.WIDTH);
  }
  return rc;
}
