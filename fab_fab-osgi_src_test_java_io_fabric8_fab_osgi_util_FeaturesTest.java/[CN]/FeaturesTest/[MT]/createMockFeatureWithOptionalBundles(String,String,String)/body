{
  Feature feature=createNiceMock(Feature.class);
  expect(feature.getName()).andReturn(name).anyTimes();
  expect(feature.getVersion()).andReturn("1.0").anyTimes();
  List<BundleInfo> infoList=new LinkedList<BundleInfo>();
  infoList.add(createMockBundleInfo(required,false));
  for (  String optional : optionals) {
    infoList.add(createMockBundleInfo(optional,true));
  }
  expect(feature.getBundles()).andReturn(infoList).anyTimes();
  replay(feature);
  return feature;
}
