{
  LOG.info("activating http mapping rule " + configuration);
  ConfigInjection.applyConfiguration(configuration,this);
  LOG.info("activating http mapping rule " + zooKeeperPath + " on "+ gateway.getPort());
  String zkPath=getZooKeeperPath();
  Objects.notNull(getGateway(),"gateway");
  Objects.notNull(zkPath,"zooKeeperPath");
  Objects.notNull(getUriTemplate(),"uriTemplate");
  LoadBalancer<String> loadBalancer=LoadBalancers.createLoadBalancer(loadBalancerType,stickyLoadBalancerCacheSize);
  LOG.info("activating http mapping ZooKeeper path: " + zkPath + " with URI template: "+ uriTemplate+ " enabledVersion: "+ enabledVersion+ " with load balancer: "+ loadBalancer);
  if (httpMappingRuleBase != null) {
    gateway.removeMappingRuleConfiguration(httpMappingRuleBase);
  }
  httpMappingRuleBase=new HttpMappingRuleBase(zkPath,new SimplePathTemplate(uriTemplate),gateway.getGatewayVersion(),enabledVersion,loadBalancer,reverseHeaders);
  CuratorFramework curator=gateway.getCurator();
  mappingTree=new HttpMappingZooKeeperTreeCache(curator,httpMappingRuleBase);
  mappingTree.init();
  gateway.addMappingRuleConfiguration(httpMappingRuleBase);
}
