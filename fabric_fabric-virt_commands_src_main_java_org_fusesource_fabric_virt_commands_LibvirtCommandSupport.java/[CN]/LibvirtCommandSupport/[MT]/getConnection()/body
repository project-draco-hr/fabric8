{
  if (url != null) {
    Connect connect=null;
    for (    Connect conn : connections) {
      if (type.equals(conn.getURI().startsWith(url))) {
        connect=conn;
        break;
      }
    }
    if (connect == null) {
      throw new IllegalArgumentException("Connection with url " + url + " not found");
    }
    return connect;
  }
 else   if (type != null) {
    Connect connect=null;
    for (    Connect conn : connections) {
      if (type.equals(connect.getType())) {
        connect=conn;
        break;
      }
    }
    if (connect == null) {
      throw new IllegalArgumentException("Connection type " + type + " not found");
    }
    return connect;
  }
 else {
    if (connections.size() != 1) {
      StringBuilder sb=new StringBuilder();
      for (      Connect conn : connections) {
        if (sb.length() > 0) {
          sb.append(", ");
        }
        sb.append(conn.getURI());
      }
      throw new IllegalArgumentException("Multiple connections are present, please select one using the --type /--url argument of the following connections: " + sb.toString());
    }
    return connections.get(0);
  }
}
