{
  DependencyDTO rootDependency=requirements.getRootDependency();
  if (rootDependency != null) {
    LOG.info("Got root: " + rootDependency);
    String bundleUrl=rootDependency.toBundleUrl();
    List<String> bundles=profile.getBundles();
    String prefix=rootDependency.toBundleUrlWithoutVersion();
    List<String> originalBundles=new ArrayList<String>(bundles);
    for (    String bundle : originalBundles) {
      if (bundle.startsWith(prefix)) {
        bundles.remove(bundle);
        if (!bundle.equals(bundleUrl)) {
          LOG.info("Removing old version " + bundle);
        }
      }
    }
    bundles.add(bundleUrl);
    profile.setBundles(bundles);
    LOG.info("Adding bundle: " + bundleUrl);
  }
  LOG.info("Got profile artifacts: " + profileArtifacts);
  return new DeployResults(profile);
}
