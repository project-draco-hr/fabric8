{
  try {
    HttpURLConnection.setFollowRedirects(false);
    HttpURLConnection con=(HttpURLConnection)new URL(url).openConnection();
    if (lastModified > 0) {
      con.setIfModifiedSince(lastModified);
    }
    con.setRequestProperty(HEADER_ACCEPT_ENCODING,GZIP);
    if (con.getResponseCode() == HttpURLConnection.HTTP_OK) {
      lastModified=con.getLastModified();
      InputStream is=con.getInputStream();
      if (GZIP.equals(con.getHeaderField(HEADER_CONTENT_ENCODING))) {
        is=new GZIPInputStream(is);
      }
      metadatas=verify(JsonReader.read(is));
    }
 else     if (con.getResponseCode() != HttpURLConnection.HTTP_NOT_MODIFIED) {
      throw new IOException("Unexpected http response: " + con.getResponseCode() + " "+ con.getResponseMessage());
    }
    return metadatas;
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
