{
  ServiceImpl service=createMockServiceImpl(getDirectoryForResource("prereq/patch1.patch"));
  Patch patch=service.getPatch("patch1");
  assertNotNull(patch);
  try {
    service.checkPrerequisites(patch);
    fail("Patch will missing prerequisites should not pass check");
  }
 catch (  PatchException e) {
    assertTrue(e.getMessage().toLowerCase().contains("required patch 'prereq1' is missing"));
  }
}
