{
  assertEquals(0,brokerFacade.getTopicProducers(TOPIC_NAME).size());
  Destination destination=session.createTopic(TOPIC_NAME);
  MessageProducer producer1=session.createProducer(destination);
  Thread.sleep(500);
  assertEquals(1,brokerFacade.getTopicProducers(TOPIC_NAME).size());
  producer1.close();
  Thread.sleep(500);
  assertEquals(0,brokerFacade.getTopicProducers(TOPIC_NAME).size());
  MessageProducer producer2=session.createProducer(destination);
  MessageProducer producer3=session.createProducer(destination);
  MessageProducer producer4=session.createProducer(destination);
  Thread.sleep(500);
  assertEquals(3,brokerFacade.getTopicProducers(TOPIC_NAME).size());
  producer2.close();
  producer3.close();
  producer4.close();
  Thread.sleep(500);
  assertEquals(0,brokerFacade.getTopicProducers(TOPIC_NAME).size());
}
