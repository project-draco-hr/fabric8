{
  Module modA=RuntimeLocator.getRuntime().getModule(identity);
  Assert.assertEquals(Module.State.ACTIVE,modA.getState());
  ModuleContext context=modA.getModuleContext();
  ServiceRegistration<String> sreg=context.registerService(String.class,new String("Hello"),null);
  Assert.assertNotNull("Null sreg",sreg);
  String service=context.getService(sreg.getReference());
  Assert.assertEquals("Hello",service);
  modA.stop();
  Assert.assertEquals(Module.State.RESOLVED,modA.getState());
}
