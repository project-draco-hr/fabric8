{
  FeaturesService service=createNiceMock(FeaturesService.class);
  Feature feature=createNiceMock(Feature.class);
  expect(feature.getName()).andReturn("cxf-wsn").anyTimes();
  expect(feature.getVersion()).andReturn("2.5.0.fuse-build-01").anyTimes();
  expect(service.getFeature("cxf-wsn")).andReturn(feature);
  replay(service,feature);
  FabResolverFactoryImpl.CXFFeaturesFilter filter=new FabResolverFactoryImpl.CXFFeaturesFilter(service);
  assertTrue("cxf-wsn feature should have replaced the dependency",filter.matches(DependencyTree.newBuilder("org.apache.cxf.wsn","cxf-wsn-core","2.5.0").build()));
  assertEquals(1,filter.getCollection().size());
  assertTrue(filter.getCollection().contains("cxf-wsn/2.5.0.fuse-build-01"));
}
