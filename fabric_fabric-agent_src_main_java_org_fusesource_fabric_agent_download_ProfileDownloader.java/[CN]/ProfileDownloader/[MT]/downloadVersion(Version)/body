{
  Profile[] profiles=version.getProfiles();
  for (  Profile profile : profiles) {
    if (stopOnFailure) {
      downloadProfile(profile);
    }
 else {
      try {
        downloadProfile(profile);
      }
 catch (      Exception e) {
        String id=profile.getId();
        errors.put(id,e);
        LOG.error("Failed to download profile " + id + " "+ e,e);
      }
    }
  }
}
