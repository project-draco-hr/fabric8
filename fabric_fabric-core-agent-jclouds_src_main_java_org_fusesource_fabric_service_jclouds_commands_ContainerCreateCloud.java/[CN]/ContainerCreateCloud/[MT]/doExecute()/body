{
  preCreateContainer(name);
  validateProfileName(profiles);
  CreateEnsembleOptions ensembleOptions=CreateEnsembleOptions.build().zookeeperPassword(zookeeperPassword).user(newUser,newUserPassword + "," + newUserRole);
  CreateJCloudsContainerOptions args=CreateContainerOptionsBuilder.jclouds().name(name).bindAddress(bindAddress).resolver(resolver).manualIp(manualIp).ensembleServer(isEnsembleServer).credential(credential).group(group).hardwareId(hardwareId).identity(identity).osFamily(osFamily).osVersion(osVersion).imageId(imageId).instanceType(instanceType).locationId(locationId).number(number).nodeOptions(CloudUtils.parseProviderOptions(options)).owner(owner).adminAccess(!disableAdminAccess).publicKeyFile(publicKeyFile).contextName(contextName).providerName(providerName).apiName(apiName).user(user).password(password).proxyUri(proxyUri != null ? proxyUri : fabricService.getMavenRepoURI()).zookeeperUrl(fabricService.getZookeeperUrl()).zookeeperPassword(isEnsembleServer && zookeeperPassword != null ? zookeeperPassword : fabricService.getZookeeperPassword()).jvmOpts(jvmOpts).creationStateListener(new PrintStreamCreationStateListener(System.out)).createEnsembleOptions(ensembleOptions).version(version).profiles(profiles);
  if (path != null && !path.isEmpty()) {
    args.setPath(path);
  }
  CreateContainerMetadata[] metadatas=fabricService.createContainers(args);
  if (isEnsembleServer && metadatas != null && metadatas.length > 0 && metadatas[0].isSuccess()) {
    ShellUtils.storeZookeeperPassword(session,metadatas[0].getCreateOptions().getZookeeperPassword());
  }
  displayContainers(metadatas);
  return null;
}
