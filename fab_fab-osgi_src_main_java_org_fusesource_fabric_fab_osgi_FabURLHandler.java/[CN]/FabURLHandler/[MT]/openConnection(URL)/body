{
  if (url.getPath() == null || url.getPath().trim().length() == 0) {
    throw new MalformedURLException("Path can not be null or empty. Syntax: " + SYNTAX);
  }
  fabJarURL=new URL(url.getPath());
  logger.debug("FAB jar URL is: [" + fabJarURL + "]");
  Configuration config=Configuration.newInstance();
  if (mavenRepositories != null) {
    String[] array=Configuration.toArray(mavenRepositories);
    logger.debug("Using maven repos: " + Arrays.asList(array));
    config.set(ServiceConstants.PROPERTY_MAVEN_REPOSITORIES,array);
  }
  return new FabConnection(fabJarURL,config,getBundleContext());
}
