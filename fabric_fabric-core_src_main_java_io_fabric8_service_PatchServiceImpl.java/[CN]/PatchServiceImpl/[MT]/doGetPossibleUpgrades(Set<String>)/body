{
  Dictionary config=getConfig();
  final List<String> repositories=getRepositories(config);
  final boolean includeNonFuseVersions=Boolean.parseBoolean((String)config.get(PATCH_INCLUDE_NON_FUSE_VERSION));
  Set<String> mavenArtifacts=new TreeSet<String>();
  for (  String artifact : artifacts) {
    String mvn=getMavenArtifact(artifact);
    if (mvn != null) {
      mavenArtifacts.add(mvn);
    }
  }
  ExecutorService executor=Executors.newFixedThreadPool(20);
  final Map<String,Set<String>> artifactsVersions=new HashMap<String,Set<String>>();
  for (  final String mvn : mavenArtifacts) {
    executor.submit(new Runnable(){
      @Override public void run(){
        Set<String> versions=doGetPossibleUpgrades(repositories,mvn,includeNonFuseVersions);
        if (versions != null && !versions.isEmpty()) {
synchronized (artifactsVersions) {
            artifactsVersions.put(mvn,versions);
          }
        }
      }
    }
);
  }
  executor.shutdown();
  try {
    executor.awaitTermination(Long.MAX_VALUE,TimeUnit.NANOSECONDS);
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
  return artifactsVersions;
}
