{
  DependencyDTO rootDependency=requirements.getRootDependency();
  if (rootDependency != null) {
    StringBuilder urlBuffer=new StringBuilder(rootDependency.toBundleUrl());
    String apparentType=rootDependency.getType();
    String apparentClassifier=rootDependency.getClassifier();
    for (    String omit : OMMITTED_BUNDLE_TYPES) {
      if (omit.equals(apparentType)) {
        apparentType=null;
        break;
      }
    }
    handleArtifactBundleType(urlBuffer,apparentType);
    handleArtifactBundleClassifier(urlBuffer,apparentClassifier);
    String urlString=urlBuffer.toString();
    if (!requirements.getBundles().contains(urlString)) {
      requirements.getBundles().add(urlString);
    }
  }
}
