{
  URLClassLoader classLoader=getCompileClassLoader();
  Map<String,String> classToProfileMap=getDefaultOSGiClassToParentProfileMap();
  Set<Map.Entry<String,String>> entries=classToProfileMap.entrySet();
  List<String> parentProfileNames=new ArrayList<>();
  for (  Map.Entry<String,String> entry : entries) {
    String className=entry.getKey();
    String profileName=entry.getValue();
    if (hasClass(classLoader,className)) {
      getLog().info("Found class: " + className + " so adding the parent profile: "+ profileName);
      parentProfileNames.add(profileName);
    }
  }
  if (parentProfileNames.isEmpty()) {
    return "karaf";
  }
 else {
    return Strings.join(parentProfileNames," ");
  }
}
