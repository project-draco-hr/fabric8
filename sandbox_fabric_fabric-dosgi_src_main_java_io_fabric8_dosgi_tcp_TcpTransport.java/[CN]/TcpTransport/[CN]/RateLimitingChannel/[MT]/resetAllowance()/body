{
  if (read_allowance != max_read_rate || write_allowance != max_write_rate) {
    read_allowance=max_read_rate;
    write_allowance=max_write_rate;
    if (write_suspended) {
      write_suspended=false;
      resumeWrite();
    }
    if (read_suspended) {
      read_suspended=false;
      resumeRead();
      for (int i=0; i < read_resume_counter; i++) {
        resumeRead();
      }
    }
  }
}
