{
  File tmpDir=Files.createTempDir();
  config.runCommand(executor,tmpDir,"jar","xf",jarFile.getAbsolutePath());
  jarFile.delete();
  File manifest=new File(tmpDir,"META-INF/MANIFEST.MF");
  String manifestText=Files.toString(manifest,Charsets.UTF_8);
  String manifestPath=manifest.getAbsolutePath();
  String text=manifestText.trim() + "\nMain-Class: " + mainClass+ "\n\n";
  Files.write(text,manifest,Charsets.UTF_8);
  List<String> args=Lists.newArrayList("jar","cmf",manifestPath,jarFile.getAbsolutePath());
  String[] children=tmpDir.list();
  if (children != null) {
    args.addAll(Lists.newArrayList(children));
  }
  config.runCommand(executor,tmpDir,args.toArray(new String[args.size()]));
}
