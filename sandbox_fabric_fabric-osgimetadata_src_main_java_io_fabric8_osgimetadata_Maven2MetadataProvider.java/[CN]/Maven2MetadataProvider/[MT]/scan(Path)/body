{
  try {
    ContainerManifest man;
    JarFile jar=new JarFile(path.toFile());
    try {
      man=jar.getContainerManifest();
    }
  finally {
      jar.close();
    }
    if (man == null) {
      return;
    }
    if ("2".equals(man.getMainAttributes().getValue(Constants.BUNDLE_MANIFESTVERSION))) {
      String uri=getResourceUri(path);
      if (uri != null) {
        Map<String,String> headers=new HashMap<String,String>();
        for (        Map.Entry attr : man.getMainAttributes().entrySet()) {
          if (HEADERS.contains(attr.getKey().toString())) {
            headers.put(attr.getKey().toString(),attr.getValue().toString());
          }
        }
        Map<String,String> prev=metadatas.put(uri,headers);
        if (prev == null) {
          LOGGER.debug("ADD {}",uri);
        }
 else {
          LOGGER.debug("UPD {}",uri);
        }
      }
    }
  }
 catch (  Exception e) {
    LOGGER.info("Unable to scan resource " + path,e);
  }
}
