{
  String uri=getUri(resource);
  if (uri == null) {
    throw new IllegalStateException("Resource has no uri");
  }
  StreamProvider provider=providers.get(uri);
  if (provider == null) {
    try {
      return new FileInputStream(manager.download(uri).await().getFile());
    }
 catch (    InterruptedException e) {
      throw (IOException)new InterruptedIOException().initCause(e);
    }
  }
  return provider.open();
}
