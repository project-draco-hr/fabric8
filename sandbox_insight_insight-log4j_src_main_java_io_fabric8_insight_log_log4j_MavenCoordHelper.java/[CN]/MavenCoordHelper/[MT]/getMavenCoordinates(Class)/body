{
  StringBuilder buffer=new StringBuilder();
  try {
    CodeSource source=cls.getProtectionDomain().getCodeSource();
    if (source != null) {
      URL locationURL=source.getLocation();
      if (locationURL != null) {
        if ("file".equals(locationURL.getProtocol())) {
          String path=locationURL.getPath();
          if (path != null) {
            File file=new File(path);
            if (file.exists() && !file.isDirectory()) {
              String coordinates=MavenCoordinates.mavenCoordinatesFromJarFile(file);
              if (!Strings.isEmpty(coordinates)) {
                return coordinates;
              }
            }
            int lastSlash=path.lastIndexOf('/');
            int lastBack=path.lastIndexOf(File.separatorChar);
            if (lastBack > lastSlash) {
              lastSlash=lastBack;
            }
            if (lastSlash <= 0 || lastSlash == path.length() - 1) {
              buffer.append(locationURL);
            }
 else {
              buffer.append(path.substring(lastSlash + 1));
            }
          }
        }
 else {
          buffer.append(locationURL);
        }
      }
    }
  }
 catch (  SecurityException ex) {
  }
  buffer.append(':');
  Package pkg=cls.getPackage();
  if (pkg != null) {
    String implVersion=pkg.getImplementationVersion();
    if (implVersion != null) {
      buffer.append(implVersion);
    }
  }
  return buffer.toString();
}
