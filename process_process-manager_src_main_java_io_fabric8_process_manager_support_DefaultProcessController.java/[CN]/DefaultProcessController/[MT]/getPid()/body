{
  Integer answer=null;
  String pidFileName=config.getPidFile();
  if (pidFileName != null) {
    File file=new File(baseDir,pidFileName);
    if (file.exists() && file.isFile()) {
      return extractPidFromFile(file);
    }
  }
  File pidFile=new File(baseDir,"var/process.pid");
  if (pidFile.exists()) {
    return extractPidFromFile(pidFile);
  }
  File pidDir=new File(baseDir,"var/run");
  if (pidDir.exists() && pidDir.isDirectory()) {
    String launchScript=getLaunchScript();
    String script=launchScript;
    int idx=script.lastIndexOf("/");
    if (idx < 0) {
      idx=script.lastIndexOf("\\");
    }
    if (idx > 0) {
      script=script.substring(idx + 1);
    }
    pidFile=new File(pidDir,script + ".pid");
    if (pidFile.exists()) {
      return extractPidFromFile(pidFile);
    }
    if (answer == null) {
      File[] files=pidDir.listFiles();
      for (      File file : files) {
        if (file.getName().toLowerCase().endsWith(".pid")) {
          answer=extractPidFromFile(file);
          if (answer != null) {
            break;
          }
        }
      }
    }
  }
  return answer;
}
