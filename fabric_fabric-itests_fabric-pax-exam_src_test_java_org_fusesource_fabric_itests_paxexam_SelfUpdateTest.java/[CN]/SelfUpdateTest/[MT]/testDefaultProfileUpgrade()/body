{
  String newVersion=System.getProperty("fabric.version");
  FabricService fabricService=getOsgiService(FabricService.class);
  System.err.println(executeCommand("fabric:create"));
  addStagingRepoToDefaultProfile();
  createAndAssertChildContainer("child1","root","default");
  String newRepoURL=String.format(FABRIC_FEATURE_REPO_URL,newVersion);
  String oldRepoURL=String.format(FABRIC_FEATURE_REPO_URL,OLD_VERSION);
  System.out.println(executeCommand("fabric:version-create --parent 1.0 1.1"));
  System.out.println(executeCommand("fabric:profile-edit --delete --repositories " + oldRepoURL + " default 1.1"));
  System.out.println(executeCommand("fabric:profile-edit --repositories " + newRepoURL + " default 1.1"));
  System.out.println(executeCommand("fabric:profile-display --version 1.1 default"));
  System.out.println(executeCommand("fabric:container-upgrade 1.1 child1"));
  Thread.sleep(5000);
  waitForProvisionSuccess(fabricService.getContainer("child1"),PROVISION_TIMEOUT);
  System.out.println(executeCommand("fabric:container-list"));
}
