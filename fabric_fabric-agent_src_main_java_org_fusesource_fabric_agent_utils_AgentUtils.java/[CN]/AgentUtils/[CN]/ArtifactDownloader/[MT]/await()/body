{
synchronized (lock) {
    while (pendings.get() > 0) {
      lock.wait();
    }
    if (!errors.isEmpty()) {
      throw new MultiException("Error while downloading artifacts",errors);
    }
    return artifacts;
  }
}
