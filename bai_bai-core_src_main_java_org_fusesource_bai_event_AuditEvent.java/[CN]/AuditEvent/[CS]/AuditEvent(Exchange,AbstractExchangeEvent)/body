{
  super(source);
  this.event=event;
  this.timestamp=new Date();
  if (event instanceof ExchangeFailureHandledEvent || event instanceof ExchangeFailedEvent) {
    this.endpointURI=source.getProperty(Exchange.FAILURE_ENDPOINT,String.class);
  }
 else {
    Endpoint fromEndpoint=source.getFromEndpoint();
    if (fromEndpoint != null) {
      this.endpointURI=fromEndpoint.getEndpointUri();
    }
  }
  this.sourceContextId=source.getContext().getName();
  this.sourceRouteId=source.getFromRouteId();
  this.currentRouteId=(source.getUnitOfWork() == null || source.getUnitOfWork().getRouteContext() == null) ? null : source.getUnitOfWork().getRouteContext().getRoute().getId();
  this.breadCrumbId=source.getIn().getHeader(Exchange.BREADCRUMB_ID,String.class);
  if (this.breadCrumbId == null && source.hasOut()) {
    this.breadCrumbId=source.getOut().getHeader(Exchange.BREADCRUMB_ID,String.class);
  }
  this.exception=source.getException() == null ? source.getProperty(Exchange.EXCEPTION_CAUGHT,Exception.class) : source.getException();
  this.redelivered=source.getProperty(Exchange.REDELIVERED,boolean.class);
}
