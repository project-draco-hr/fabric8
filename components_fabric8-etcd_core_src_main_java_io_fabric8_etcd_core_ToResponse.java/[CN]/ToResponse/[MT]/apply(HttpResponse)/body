{
  HttpEntity entity=response.getEntity();
  Response result=null;
  try {
    result=reader.read(entity.getContent());
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  if (result.getErrorCode() != 0) {
    throw new EtcdException(result.getMessage(),result.getErrorCode());
  }
  return result;
}
