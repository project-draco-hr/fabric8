{
  OsgiModuleRegistry registry=getModuleRegistry();
  List<ModuleRegistry.Module> modules=registry.getApplicationModules();
  Map<VersionedDependencyId,Bundle> installed=registry.getInstalled();
  for (  ModuleRegistry.Module module : modules) {
    HashSet<VersionedDependencyId> s=new HashSet<VersionedDependencyId>(module.getVersionIds());
    s.retainAll(installed.keySet());
    if (!s.isEmpty() && module.getName().equals(name)) {
      for (      VersionedDependencyId dependencyId : s) {
        if (version == null || version.equals(dependencyId.getVersion())) {
          installed.get(dependencyId).uninstall();
        }
      }
    }
  }
  return null;
}
