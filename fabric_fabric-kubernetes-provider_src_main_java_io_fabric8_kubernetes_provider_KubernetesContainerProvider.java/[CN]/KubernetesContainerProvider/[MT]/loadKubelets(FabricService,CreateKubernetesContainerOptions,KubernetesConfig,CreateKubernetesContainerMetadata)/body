{
  Map<String,Object> answer=new HashMap<>();
  List<String> definitions=config.getDefinitions();
  String containerId=options.getName();
  byte[] json=null;
  Kubernetes kubernetes=getKubernetes();
  Objects.notNull(kubernetes,"kubernetes");
  for (  String definition : definitions) {
    definition=definition.trim();
    if (!definition.contains(":")) {
      Set<String> profileIds=options.getProfiles();
      String versionId=options.getVersion();
      List<Profile> profiles=Profiles.getProfiles(service,profileIds,versionId);
      json=Profiles.getFileConfiguration(profiles,definition);
    }
    if (json == null) {
      URL url=null;
      try {
        url=new URL(definition);
      }
 catch (      MalformedURLException e) {
        LOG.warn("Could not parse kube definition URL " + definition + ". "+ e,e);
      }
      if (url != null) {
        try {
          InputStream in=url.openStream();
          if (in != null) {
            json=Files.readBytes(in);
          }
        }
 catch (        IOException e) {
          LOG.warn("Failed to load URL " + url + ". "+ e,e);
        }
      }
    }
    if (json != null) {
      Object dto=null;
      try {
        ObjectReader reader=objectMapper.reader();
        JsonNode tree=null;
        if (json != null) {
          tree=reader.readTree(new ByteArrayInputStream(json));
          if (tree != null) {
            JsonNode kindNode=tree.get("kind");
            if (kindNode != null) {
              String kind=kindNode.asText();
              if (Objects.equal("Pod",kind)) {
                PodSchema podSchema=objectMapper.reader(PodSchema.class).readValue(json);
                configurePod(podSchema,service,options,config,metadata);
                answer.put(definition,podSchema);
              }
 else               if (Objects.equal("ReplicationController",kind)) {
                ReplicationControllerSchema replicationControllerSchema=objectMapper.reader(ReplicationControllerSchema.class).readValue(json);
                configureReplicationController(replicationControllerSchema,service,options,config,metadata);
                answer.put(definition,replicationControllerSchema);
              }
 else               if (Objects.equal("Service",kind)) {
                ServiceSchema serviceSchema=objectMapper.reader(ServiceSchema.class).readValue(json);
                configureService(serviceSchema,service,options,config,metadata);
                answer.put(definition,serviceSchema);
              }
 else {
                LOG.warn("Unknown JSON from " + definition + ". JSON: "+ tree);
              }
            }
          }
        }
      }
 catch (      IOException e) {
        LOG.warn("Failed to parse JSON definition: " + definition + ". "+ e,e);
      }
    }
  }
  return answer;
}
