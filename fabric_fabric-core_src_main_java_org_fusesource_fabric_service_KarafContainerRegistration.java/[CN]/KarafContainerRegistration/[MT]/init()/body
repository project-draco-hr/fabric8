{
  LOGGER.trace("init");
  String version=System.getProperty("fabric.version",ZkDefs.DEFAULT_VERSION);
  String profiles=System.getProperty("fabric.profiles");
  try {
    if (profiles != null) {
      String versionNode=CONFIG_CONTAINER.getPath(name);
      String profileNode=CONFIG_VERSIONS_CONTAINER.getPath(version,name);
      createDefault(curator,versionNode,version);
      createDefault(curator,profileNode,profiles);
    }
    checkAlive();
    String domainsNode=CONTAINER_DOMAINS.getPath(name);
    Stat stat=exists(curator,domainsNode);
    if (stat != null) {
      deleteSafe(curator,domainsNode);
    }
    createDefault(curator,CONTAINER_BINDADDRESS.getPath(name),System.getProperty(ZkDefs.BIND_ADDRESS,"0.0.0.0"));
    createDefault(curator,CONTAINER_RESOLVER.getPath(name),getContainerResolutionPolicy(curator,name));
    setData(curator,CONTAINER_LOCAL_HOSTNAME.getPath(name),HostUtils.getLocalHostName());
    setData(curator,CONTAINER_LOCAL_IP.getPath(name),HostUtils.getLocalIp());
    setData(curator,CONTAINER_IP.getPath(name),getContainerPointer(curator,name));
    createDefault(curator,CONTAINER_GEOLOCATION.getPath(name),GeoUtils.getGeoLocation());
    for (    String resolver : ZkDefs.VALID_RESOLVERS) {
      String address=System.getProperty(resolver);
      if (address != null && !address.isEmpty() && exists(curator,CONTAINER_ADDRESS.getPath(name,resolver)) == null) {
        setData(curator,CONTAINER_ADDRESS.getPath(name,resolver),address);
      }
    }
    Container current=getContainer();
    System.setProperty(SystemProperties.JAVA_RMI_SERVER_HOSTNAME,current.getIp());
    registerJmx(current);
    registerSsh(current);
    registerHttp(current);
    String minimumPort=System.getProperty(ZkDefs.MINIMUM_PORT);
    String maximumPort=System.getProperty(ZkDefs.MAXIMUM_PORT);
    createDefault(curator,CONTAINER_PORT_MIN.getPath(name),minimumPort);
    createDefault(curator,CONTAINER_PORT_MAX.getPath(name),maximumPort);
    registerMBeanServer();
  }
 catch (  Exception e) {
    LOGGER.warn("Error updating Fabric Container information. This exception will be ignored.",e);
  }
}
