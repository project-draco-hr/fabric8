{
  io.fabric8.kubernetes.api.model.Service srv=null;
  String namespace=Systems.getEnvVarOrSystemProperty(KUBERNETES_NAMESPACE,(String)null);
  String serviceHost=serviceToHost(serviceId);
  String servicePort=serviceToPort(serviceId);
  String serviceProtocol=serviceToProtocol(serviceId,servicePort);
  if (Strings.isNotBlank(serviceHost) && Strings.isNotBlank(servicePort) && Strings.isNotBlank(serviceProtocol)) {
    return serviceProtocol + "://" + serviceHost+ ":"+ servicePort;
  }
 else   if (Strings.isNotBlank(namespace)) {
    srv=KUBERNETES.getService(serviceId,namespace);
  }
 else {
    for (    io.fabric8.kubernetes.api.model.Service s : KUBERNETES.getServices().getItems()) {
      if (s.getId().equals(serviceId)) {
        srv=s;
        break;
      }
    }
  }
  if (srv == null) {
    throw new IllegalArgumentException("No kubernetes service could be found for name: " + serviceId + " in namespace: "+ namespace);
  }
  return (srv.getProtocol() + "://" + srv.getPortalIP()+ ":"+ srv.getPort()).toLowerCase();
}
