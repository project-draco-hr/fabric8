{
  if (executor.isShutdown() || props == null) {
    return;
  }
  executor.submit(new Runnable(){
    public void run(){
      Throwable result=null;
      boolean success=false;
      try {
        success=doUpdate(props);
      }
 catch (      Throwable e) {
        result=e;
        LOGGER.error("Unable to update agent",e);
      }
      if (success || result != null) {
        updateStatus(success ? ZkDefs.SUCCESS : ZkDefs.ERROR,result,null,true);
      }
    }
  }
);
}
