{
  try {
    IZKClient zk;
    if (force) {
      zk=(IZKClient)zkClient.waitForService(0);
    }
 else {
      zk=(IZKClient)zkClient.getService();
    }
    if (zk != null) {
      String name=System.getProperty(SystemProperties.KARAF_NAME);
      String e;
      if (result == null) {
        e=null;
      }
 else {
        StringWriter sw=new StringWriter();
        result.printStackTrace(new PrintWriter(sw));
        e=sw.toString();
      }
      if (resources != null) {
        StringWriter sw=new StringWriter();
        for (        Resource res : resources) {
          sw.write(res.getURI() + "\n");
        }
        zk.createOrSetWithParents(ZkPath.CONTAINER_PROVISION_LIST.getPath(name),sw.toString(),CreateMode.PERSISTENT);
      }
      zk.createOrSetWithParents(ZkPath.CONTAINER_PROVISION_RESULT.getPath(name),status,CreateMode.PERSISTENT);
      zk.createOrSetWithParents(ZkPath.CONTAINER_PROVISION_EXCEPTION.getPath(name),e,CreateMode.PERSISTENT);
    }
 else {
      LOGGER.info("ZooKeeper not available");
    }
  }
 catch (  Throwable e) {
    LOGGER.warn("Unable to set provisioning result");
  }
}
