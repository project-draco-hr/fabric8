{
  try {
    IZKClient zk;
    if (force) {
      zk=(IZKClient)zkClient.waitForService(0);
    }
 else {
      zk=(IZKClient)zkClient.getService();
    }
    if (zk != null) {
      String name=System.getProperty("karaf.name");
      String e;
      if (result == null) {
        e=null;
      }
 else {
        StringWriter sw=new StringWriter();
        result.printStackTrace(new PrintWriter(sw));
        e=sw.toString();
      }
      zk.createOrSetWithParents(ZkPath.CONTAINER_PROVISION_RESULT.getPath(name),status,ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
      zk.createOrSetWithParents(ZkPath.CONTAINER_PROVISION_EXCEPTION.getPath(name),e,ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
    }
 else {
      LOGGER.info("ZooKeeper not available");
    }
  }
 catch (  Exception e) {
    LOGGER.error("Unable to set provisioning result");
  }
}
