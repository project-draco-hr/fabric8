{
  try {
    FabricService fs=fabricService.waitForService(0);
    if (fs != null) {
      StringBuilder sb=new StringBuilder();
      for (      URI uri : fs.getMavenRepoURIs()) {
        String mavenRepo=uri.toString();
        if (!mavenRepo.endsWith("/")) {
          mavenRepo+="/";
        }
        if (sb.length() > 0) {
          sb.append(",");
        }
        sb.append(mavenRepo);
        sb.append("@snapshots");
      }
      String existingRepos=(String)props.get("org.ops4j.pax.url.mvn.repositories");
      if (existingRepos != null) {
        if (sb.length() > 0) {
          sb.append(",");
        }
        sb.append(existingRepos);
      }
      props.put("org.ops4j.pax.url.mvn.repositories",sb.toString());
    }
  }
 catch (  Exception e) {
    LOGGER.warn("Unable to retrieve maven proxy urls: " + e.getMessage());
    LOGGER.debug("Unable to retrieve maven proxy urls: " + e.getMessage(),e);
  }
}
