{
  Map<String,Object> map=metadata.getDesignates();
  Set<Map.Entry<String,Object>> entries=map.entrySet();
  for (  Map.Entry<String,Object> entry : entries) {
    String pid=entry.getKey();
    File pidOutDir=new File(outputDir,pid);
    if (pidOutDir.exists()) {
      System.out.println("PID " + pid + " already exists at "+ pidOutDir);
      return;
    }
    pidOutDir.mkdirs();
    File xmlFile=new File(pidOutDir,"metatype.xml");
    InputStream in=jarFile.getInputStream(jarEntry);
    Files.copy(in,new FileOutputStream(xmlFile));
    if (properties.size() > 0) {
      File propertiesFile=new File(pidOutDir,"metatype.properties");
      properties.store(new FileOutputStream(propertiesFile),"Generated from jar by fabric8-maven-plugin");
    }
  }
}
