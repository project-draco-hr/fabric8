{
  assertNotNull(bus);
  ServerFactoryBean factory=new ServerFactoryBean();
  factory.setServiceBean(new HelloImpl());
  factory.setAddress("http://localhost:9000/fail/server");
  factory.setBus(bus);
  factory.create();
  factory=new ServerFactoryBean();
  factory.setServiceBean(new HelloImpl());
  factory.setAddress("http://localhost:9000/simple/server");
  factory.setBus(bus);
  factory.create();
  ClientProxyFactoryBean clientFactory=new ClientProxyFactoryBean();
  clientFactory.setServiceClass(Hello.class);
  clientFactory.setAddress("http://someotherplace");
  List<AbstractFeature> features=new ArrayList<AbstractFeature>();
  features.add(feature);
  clientFactory.setFeatures(features);
  List<Interceptor<? extends Message>> outInterceptor=new ArrayList<Interceptor<? extends Message>>();
  outInterceptor.add(new TransportFailureInterceptor());
  clientFactory.setOutInterceptors(outInterceptor);
  Hello hello=clientFactory.create(Hello.class);
  String response=hello.sayHello();
  assertEquals("Get a wrong response","Hello",response);
  response=hello.sayHello();
  assertEquals("Get a wrong response","Hello",response);
}
