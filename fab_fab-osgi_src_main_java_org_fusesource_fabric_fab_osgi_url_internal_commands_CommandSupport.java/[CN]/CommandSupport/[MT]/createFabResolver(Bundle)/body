{
  Properties instructions=new Properties();
  Dictionary headers=bundle.getHeaders();
  Enumeration e=headers.keys();
  while (e.hasMoreElements()) {
    Object key=e.nextElement();
    Object value=headers.get(key);
    if (key instanceof String && value instanceof String) {
      instructions.setProperty((String)key,(String)value);
    }
  }
  FabFacade facade=new BundleFabFacade(bundle);
  Map<String,Object> embeddedResources=new HashMap<String,Object>();
  FabClassPathResolver resolver=new FabClassPathResolver(facade,instructions,embeddedResources);
  resolver.resolve();
  return resolver;
}
