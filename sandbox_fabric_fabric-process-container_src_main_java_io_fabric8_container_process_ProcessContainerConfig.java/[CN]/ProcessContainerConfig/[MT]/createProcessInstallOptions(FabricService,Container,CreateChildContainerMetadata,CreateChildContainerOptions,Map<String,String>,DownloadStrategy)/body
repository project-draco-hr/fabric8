{
  byte[] jsonData=null;
  Set<String> profileIds=options.getProfiles();
  String versionId=options.getVersion();
  List<Profile> profiles=Profiles.getProfiles(fabricService,profileIds,versionId);
  for (  Profile profile : profiles) {
    ProfileService profileService=fabricService.adapt(ProfileService.class);
    Profile overlay=profileService.getOverlayProfile(profile);
    jsonData=overlay.getFileConfiguration(controllerPath);
    if (jsonData != null) {
      break;
    }
  }
  Objects.notNull(jsonData,"No JSON file found for path " + controllerPath + " in profiles: "+ profileIds+ " version: "+ versionId);
  String controllerJson=new String(jsonData);
  String installName=getProcessName();
  if (Strings.isNullOrBlank(installName)) {
    if (profiles.size() > 0) {
      installName=profiles.get(0).getId();
    }
  }
  metadata.setContainerType(installName);
  return InstallOptions.builder().id(options.getName()).name(installName).container(container).url(url).extractCmd(extractCmd).postUnpackCmds(postUnpackCmds).postInstallCmds(postInstallCmds).controllerJson(controllerJson).downloadStrategy(downloadStrategy).environment(environmentVariables).build();
}
