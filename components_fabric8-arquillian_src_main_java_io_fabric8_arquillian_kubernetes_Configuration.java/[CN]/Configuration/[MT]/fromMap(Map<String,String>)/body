{
  Configuration configuration=new Configuration();
  try {
    applyMasterUrl(configuration,map);
    applyConfigurationURL(configuration,map);
    applyDependencies(configuration,map);
    configuration.timeout=getLongProperty(TIMEOUT,map,DEFAULT_TIMEOUT);
    configuration.pollInterval=getLongProperty(POLL_INTERVAL,map,DEFAULT_POLL_INTERVAL);
    configuration.ansiLoggerEnabled=getBooleanProperty(ANSI_LOGGER_ENABLED,map,true);
    configuration.waitForServiceConnectionEnabled=getBooleanProperty(WAIT_FOR_SERVICE_CONNECTION,map,true);
    configuration.waitForServices=Strings.splitAndTrimAsList(getStringProperty(WAIT_FOR_SERVICES,map,"")," ");
    configuration.connectToServicesEnabled=getBooleanProperty(CONNECT_TO_SERVICES,map,DEFAULT_CONNECT_TO_SERVICES);
    configuration.lazyCreateNamespace=getBooleanProperty(LAZY_CREATE_NAMESPACE,map,true);
    configuration.serviceConnectionTimeout=getLongProperty(SERVICE_CONNECTION_TIMEOUT,map,DEFAULT_SERVICE_CONNECTION_TIMEOUT);
    configuration.existingNamespace=getStringProperty(USE_EXISTING_NAMESPACE,map,null);
    configuration.routeDomainPostfix=getStringProperty(KUBERNETES_DOMAIN,map,"vagrant.f8");
    configuration.namespaceCleanupEnabled=getBooleanProperty(NAMESPACE_CLEANUP_ENABLED,map,Strings.isNullOrBlank(configuration.existingNamespace));
    configuration.properties=map;
  }
 catch (  Throwable t) {
    throw new RuntimeException(t);
  }
  return configuration;
}
