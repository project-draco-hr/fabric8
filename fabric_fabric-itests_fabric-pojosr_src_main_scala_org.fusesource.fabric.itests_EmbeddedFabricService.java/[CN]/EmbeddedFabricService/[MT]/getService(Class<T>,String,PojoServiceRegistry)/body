{
  try {
    ServiceReference[] ref=registry.getServiceReferences(type.getName(),filter);
    if (ref == null) {
      return null;
    }
    if (ref.length > 1 || ref.length == 0) {
      return null;
    }
    return type.cast(registry.getService(ref[0]));
  }
 catch (  InvalidSyntaxException e) {
    return null;
  }
}
