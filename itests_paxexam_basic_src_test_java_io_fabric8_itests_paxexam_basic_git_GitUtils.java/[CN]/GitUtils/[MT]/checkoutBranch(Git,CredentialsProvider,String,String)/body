{
  String current=currentBranch(git);
  if (Objects.equal(current,branch)) {
    return;
  }
  boolean localExists=localBranchExists(git,branch);
  boolean remoteExists=remoteBranchExists(git,remote,branch);
  if (localExists) {
    git.checkout().setName(branch).call();
  }
 else   if (remoteExists) {
    git.checkout().setName(branch).setCreateBranch(true).setForce(true).setUpstreamMode(CreateBranchCommand.SetupUpstreamMode.TRACK).setStartPoint(remote + "/" + branch).call();
  }
 else {
    git.branchCreate().setName(branch).setForce(true).call();
    git.checkout().setName(branch).call();
    git.push().setCredentialsProvider(credentialsProvider).setRemote(remote).setRefSpecs(new RefSpec(branch)).setForce(true).call();
  }
  configureBranch(git,remote,getRemote(git,remote),branch);
}
