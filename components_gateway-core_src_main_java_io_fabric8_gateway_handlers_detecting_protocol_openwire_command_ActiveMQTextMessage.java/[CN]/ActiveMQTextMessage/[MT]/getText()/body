{
  if (text == null && getContent() != null) {
    InputStream is=null;
    try {
      Buffer bodyAsBytes=getContent();
      if (bodyAsBytes != null) {
        is=new ByteArrayInputStream(bodyAsBytes);
        if (isCompressed()) {
          is=new InflaterInputStream(is);
        }
        DataInputStream dataIn=new DataInputStream(is);
        text=MarshallingSupport.readUTF8(dataIn);
        dataIn.close();
        setContent(null);
        setCompressed(false);
      }
    }
 catch (    IOException ioe) {
      throw new OpenwireException(ioe);
    }
 finally {
      if (is != null) {
        try {
          is.close();
        }
 catch (        IOException e) {
        }
      }
    }
  }
  return text;
}
