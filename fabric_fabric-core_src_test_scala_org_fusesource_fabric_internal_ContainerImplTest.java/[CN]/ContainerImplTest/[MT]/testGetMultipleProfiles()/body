{
  String id=CONTAINER_ID;
  String version="1.0";
  String node=ZkPath.CONFIG_VERSIONS_CONTAINER.getPath(version,id);
  expect(izkClient.getStringData(ZkPath.CONFIG_CONTAINER.getPath(id))).andReturn(version).anyTimes();
  expect(izkClient.exists(ZkPath.CONFIG_VERSIONS_PROFILE.getPath(version,"camel"))).andReturn(new Stat()).anyTimes();
  expect(izkClient.exists(ZkPath.CONFIG_VERSIONS_PROFILE.getPath(version,"esb"))).andReturn(new Stat()).anyTimes();
  expect(izkClient.getStringData(node)).andReturn("camel esb");
  replay(izkClient);
  Profile[] profiles=container.getProfiles();
  assertNotNull(profiles);
  assertEquals(2,profiles.length);
  assertEquals("camel",profiles[0].getId());
  assertEquals("esb",profiles[1].getId());
  verify(izkClient);
}
