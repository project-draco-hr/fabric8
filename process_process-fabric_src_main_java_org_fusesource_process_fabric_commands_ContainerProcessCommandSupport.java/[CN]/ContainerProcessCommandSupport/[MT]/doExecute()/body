{
  checkRequirements();
  try {
    String jmxUser=user != null ? user : ShellUtils.retrieveFabricUser(session);
    String jmxPassword=password != null ? password : ShellUtils.retrieveFabricUserPassword(session);
    doWithAuthentication(jmxUser,jmxPassword);
  }
 catch (  FabricAuthenticationException ex) {
    user=null;
    password=null;
    promptForJmxCredentialsIfNeeded();
    doWithAuthentication(user,password);
    ShellUtils.storeFabricCredentials(session,user,password);
  }
  return null;
}
