{
  Vertx vertx=getVertx();
  apiManager=new ApiManager();
  Handler<HttpServerRequest> requestHandler=null;
  if (gatewayConfig.isApiManagerEnabled()) {
    Map<String,Object> config=new HashMap<String,Object>();
    config.put(ApiManagerService.VERTX,getVertx());
    config.put(ApiManagerService.HTTP_GATEWAY,(HttpGateway)this);
    config.put(ApiManagerService.PORT,String.valueOf(gatewayConfig.getPort()));
    getApiManager().setService(apiManagerService);
    getApiManager().getService().init(config);
    requestHandler=getApiManager().getService().createApiManagerHttpGatewayHandler();
  }
 else {
    requestHandler=new HttpGatewayHandler(getVertx(),this);
  }
  server=new HttpGatewayServer(vertx,null,gatewayConfig.getPort(),requestHandler);
  server.init();
}
