{
  Map<String,InputComponent<?,?>> inputs=controller.getInputs();
  Set<String> inputKeys=new HashSet<>(inputs.keySet());
  if (requestedInputs != null) {
    inputKeys.retainAll(requestedInputs.keySet());
    Set<Map.Entry<String,InputComponent<?,?>>> entries=inputs.entrySet();
    for (    Map.Entry<String,InputComponent<?,?>> entry : entries) {
      String key=entry.getKey();
      InputComponent<?,?> component=entry.getValue();
      String textValue=requestedInputs.get(key);
      Object value=textValue;
      if (component != null && textValue != null) {
        Converter<String,?> valueConverter=component.getValueConverter();
        if (valueConverter != null) {
          value=valueConverter.convert(textValue);
        }
 else {
          Class<?> valueType=component.getValueType();
          if (valueType.isEnum()) {
            Class<? extends Enum> enumType=(Class<? extends Enum>)valueType;
            value=Enum.valueOf(enumType,textValue);
          }
        }
        InputComponents.setValueFor(converterFactory,component,value);
      }
 else {
        controller.setValueFor(key,value);
      }
      Object actual=controller.getValueFor(key);
    }
  }
}
