{
  dataSize=encodedType.computeDataSize();
  dataCount=encodedType.computeDataCount();
  Buffer rc=new Buffer(1 + category.WIDTH + dataSize);
  rc.data[1]=formatCode;
  if (category.WIDTH == 1) {
    BitUtils.setUByte(rc.data,1,(short)dataSize);
    BitUtils.setUByte(rc.data,2,(short)dataCount);
  }
 else {
    BitUtils.setUInt(rc.data,1,dataSize);
    BitUtils.setUInt(rc.data,1 + category.WIDTH,dataCount);
  }
  encodedType.encode(rc,0);
  return rc;
}
