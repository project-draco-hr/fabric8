{
  if (installDir == null) {
    return;
  }
  boolean killProcesses=FabricAssertions.shouldKillProcessesAfterTestRun();
  if (!killProcesses) {
    String message=installDir == null ? "" : " at: " + installDir.getAbsolutePath();
    System.out.println("Not destroying the fabric" + message + " due to system property "+ FabricAssertions.KILL_CONTAINERS_FLAG+ " being "+ System.getProperty(FabricAssertions.KILL_CONTAINERS_FLAG));
    return;
  }
  System.out.println("Destroying the fabric at: " + installDir.getAbsolutePath());
  File instancesFile=waitForInstancesFile(20 * 1000);
  killInstanceProcesses(instancesFile);
}
