{
  URI uri=new URI(location);
  TcpTransport transport=createTransport(uri);
  if (transport == null)   return null;
  Map<String,String> options=new HashMap<String,String>(URISupport.parseParameters(uri));
  URI localLocation=getLocalLocation(uri);
  transport.connecting(uri,localLocation);
  Map<String,Object> socketOptions=IntrospectionSupport.extractProperties(options,"socket.");
  transport.setSocketOptions(socketOptions);
  IntrospectionSupport.setProperties(transport,options);
  if (!options.isEmpty()) {
    try {
      transport.stop();
    }
 catch (    Throwable cleanup) {
    }
    throw new IllegalArgumentException("Invalid connect parameters: " + options);
  }
  return transport;
}
