{
  if (full()) {
    return BufferState.FULL;
  }
 else {
    boolean wasEmpty=empty();
    Buffer buffer=(Buffer)value;
    next_write_size+=buffer.length;
    next_write_buffers.add(buffer.toByteBuffer());
    return wasEmpty ? BufferState.WAS_EMPTY : BufferState.NOT_EMPTY;
  }
}
