{
  if (dependency.isBundle()) {
    String exportPackages=dependency.getContainerManifestEntry("Export-Package");
    if (notEmpty(exportPackages)) {
      Parameters values=new Analyzer().parseHeader(exportPackages);
      Map<String,String> map=values.get(packageName);
      if (map != null) {
        String version=map.get("version");
        if (version != null) {
          return version;
        }
      }
    }
  }
  String version=dependency.getVersion();
  if (version != null) {
    return VersionCleaner.clean(version);
  }
  return null;
}
