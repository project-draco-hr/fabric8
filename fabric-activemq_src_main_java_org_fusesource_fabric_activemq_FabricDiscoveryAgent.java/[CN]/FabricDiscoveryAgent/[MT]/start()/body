{
  if (startCounter.addAndGet(1) == 1) {
    running.set(true);
    if (zkClient == null) {
      ZKClient client=new ZKClient(System.getProperty("zookeeper.url","localhost:2181"),Timespan.parse("10s"),null);
      client.start();
      client.waitForStart();
      zkClient=client;
    }
    group=ZooKeeperGroupFactory.create(zkClient,"/fabric/activemq-clusters/" + groupName,acl);
    group.add(new ChangeListener(){
      @Override public void connected(){
        changed();
      }
      @Override public void disconnected(){
        update(new ArrayList<byte[]>());
      }
      public void changed(){
        update(group.members().values());
      }
    }
);
    if (serviceName != null) {
      eid=group.join(serviceName.getBytes("UTF-8"));
    }
  }
}
