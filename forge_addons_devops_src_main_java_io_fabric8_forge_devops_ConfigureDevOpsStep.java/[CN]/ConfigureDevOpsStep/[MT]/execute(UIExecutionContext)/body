{
  LOG.info("Creating the fabric8.yml file");
  String fileName=ProjectConfigs.FILE_NAME;
  Project project=getSelectedProject(context);
  File configFile=getProjectConfigFile(project);
  if (configFile == null) {
    return Results.fail("This command requires a project");
  }
  ProjectConfig config=null;
  boolean hasFile=false;
  if (configFile.exists()) {
    config=ProjectConfigs.parseProjectConfig(configFile);
    hasFile=true;
  }
  if (config == null) {
    config=new ProjectConfig();
  }
  CommandHelpers.putComponentValuesInAttributeMap(context,inputComponents);
  updateConfiguration(context,config);
  System.out.println("Result: " + config);
  String message;
  if (config.isEmpty() && !hasFile) {
    message="No " + fileName + " need be generated as there is no configuration";
    return Results.success(message);
  }
 else {
    String operation="Updated";
    if (!configFile.exists()) {
      operation="Created";
    }
    ProjectConfigs.saveConfig(config,configFile);
    message=operation + " " + fileName;
  }
  Map<Object,Object> attributeMap=context.getUIContext().getAttributeMap();
  Object object=attributeMap.get(Project.class);
  if (object instanceof Project) {
    Project newProject=(Project)object;
    MetadataFacet facet=newProject.getFacet(MetadataFacet.class);
    if (facet != null) {
      String named=facet.getProjectName();
      String user=getStringAttribute(attributeMap,"gitUser");
      String email=getStringAttribute(attributeMap,"gitAuthorEmail");
      String address=getStringAttribute(attributeMap,"gitAddress");
      String htmlUrl=address + user + "/"+ named;
      String remoteUrl=address + user + "/"+ named+ ".git";
      String fullName=user + "/" + named;
      String gitUrl=remoteUrl;
      DevOpsConnector connector=new DevOpsConnector();
      connector.setProjectConfig(config);
      connector.setUsername(user);
      connector.setPassword(getStringAttribute(attributeMap,"gitPassword"));
      connector.setBranch(getStringAttribute(attributeMap,"gitBranch","master"));
      connector.setBasedir(getBaseDir(project));
      connector.setGitUrl(gitUrl);
      connector.setRepoName(named);
      connector.setTryLoadConfigFileFromRemoteGit(false);
      LOG.info("Using connector: " + connector);
      try {
        connector.execute();
      }
 catch (      Exception e) {
        LOG.error("Failed to update DevOps resources: " + e,e);
      }
    }
 else {
      LOG.error("No MetadataFacet for newly created project " + newProject);
    }
  }
 else {
    LOG.error("No New Project created!");
  }
  return Results.success(message);
}
