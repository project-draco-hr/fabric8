{
  Set<RouteDefinition> routes=new HashSet<RouteDefinition>();
  for (  ProcessorDefinition<?> definition : statistics.keySet()) {
    RouteDefinition route=ProcessorDefinitionHelper.getRoute(definition);
    routes.add(route);
  }
  StringBuilder sb=new StringBuilder();
  sb.append("<profiling>");
  for (  RouteDefinition route : routes) {
    if (routeId == null || routeId.equals(route.getId())) {
      sb.append("<route");
      if (route.getId() != null) {
        sb.append(" id=\"").append(route.getId()).append("\"");
      }
      sb.append(">");
      appendStats(sb,route);
      sb.append("</route>");
    }
  }
  sb.append("</profiling>");
  return sb.toString();
}
