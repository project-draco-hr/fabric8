{
  delegate=new DefaultRepositorySystemSession();
  delegate.setMirrorSelector(new DefaultMirrorSelector());
  delegate.setAuthenticationSelector(new DefaultAuthenticationSelector());
  delegate.setProxySelector(MavenUtils.getProxySelector());
  delegate.setDependencyTraverser(new FatArtifactTraverser());
  delegate.setDependencyManager(new ClassicDependencyManager());
  DependencySelector depFilter=new AndDependencySelector(new ScopeDependencySelector("test","provided"),new OptionalDependencySelector(),new ExclusionDependencySelector());
  delegate.setDependencySelector(depFilter);
  DependencyGraphTransformer transformer=new ChainedDependencyGraphTransformer(new ConflictMarker(),new JavaDependencyContextRefiner());
  delegate.setDependencyGraphTransformer(transformer);
  DefaultArtifactTypeRegistry stereotypes=new DefaultArtifactTypeRegistry();
  stereotypes.add(new DefaultArtifactType("pom"));
  stereotypes.add(new DefaultArtifactType("maven-plugin","jar","","java"));
  stereotypes.add(new DefaultArtifactType("jar","jar","","java"));
  stereotypes.add(new DefaultArtifactType("ejb","jar","","java"));
  stereotypes.add(new DefaultArtifactType("ejb-client","jar","client","java"));
  stereotypes.add(new DefaultArtifactType("test-jar","jar","tests","java"));
  stereotypes.add(new DefaultArtifactType("javadoc","jar","javadoc","java"));
  stereotypes.add(new DefaultArtifactType("java-source","jar","sources","java",false,false));
  stereotypes.add(new DefaultArtifactType("war","war","","java",false,true));
  stereotypes.add(new DefaultArtifactType("ear","ear","","java",false,true));
  stereotypes.add(new DefaultArtifactType("rar","rar","","java",false,true));
  stereotypes.add(new DefaultArtifactType("par","par","","java",false,true));
  delegate.setArtifactTypeRegistry(stereotypes);
  delegate.setConfigProperties(System.getProperties());
  delegate.setSystemProperties(System.getProperties());
}
