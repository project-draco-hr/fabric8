{
  if (Strings.isNotBlank(branch) && hasRemoteRepo()) {
    StoredConfig config=git.getRepository().getConfig();
    if (Strings.isNullOrBlank(config.getString("branch",branch,"remote")) || Strings.isNullOrBlank(config.getString("branch",branch,"merge"))) {
      config.setString("branch",branch,"remote",remoteName);
      config.setString("branch",branch,"merge","refs/heads/" + branch);
      try {
        config.save();
      }
 catch (      IOException e) {
        getLog().error("Failed to save the git configuration into " + new File(buildDir,".git") + " with branch "+ branch+ " on remote repo: "+ gitUrl+ " due: "+ e.getMessage()+ ". This exception is ignored.",e);
      }
    }
  }
}
