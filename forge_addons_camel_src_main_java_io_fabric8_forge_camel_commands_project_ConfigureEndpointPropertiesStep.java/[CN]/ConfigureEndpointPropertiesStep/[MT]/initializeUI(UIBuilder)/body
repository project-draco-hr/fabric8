{
  CamelCatalog catalog=new DefaultCamelCatalog();
  Map<Object,Object> attributeMap=builder.getUIContext().getAttributeMap();
  String camelComponentName=optionalAttributeValue(attributeMap,"componentName");
  String uri=optionalAttributeValue(attributeMap,"endpointUri");
  if (camelComponentName == null && uri != null) {
    camelComponentName=endpointComponentName(uri);
  }
  if (camelComponentName == null && uri == null) {
    throw new IllegalArgumentException("Component name or endpoint uri did not get passed on from the previous wizard page");
  }
  String json=catalog.componentJSonSchema(camelComponentName);
  if (json == null) {
    throw new IllegalArgumentException("Could not find catalog entry for component name: " + camelComponentName);
  }
  List<Map<String,String>> data=JSonSchemaHelper.parseJsonSchema("properties",json,true);
  Map<String,String> currentValues=Collections.EMPTY_MAP;
  if (data != null) {
    Set<String> namesAdded=new HashSet<>();
    for (    Map<String,String> propertyMap : data) {
      String name=propertyMap.get("name");
      String kind=propertyMap.get("kind");
      String type=propertyMap.get("type");
      String javaType=propertyMap.get("javaType");
      String deprecated=propertyMap.get("deprecated");
      String required=propertyMap.get("required");
      String currentValue=currentValues.get(name);
      String defaultValue=propertyMap.get("defaultValue");
      String description=propertyMap.get("description");
      String enums=propertyMap.get("enum");
      if (!Strings.isNullOrEmpty(name)) {
        Class<Object> inputClazz=CamelCommandsHelper.loadValidInputTypes(javaType,type);
        if (inputClazz != null) {
          if (namesAdded.add(name)) {
            InputComponent input=createUIInput(componentFactory,name,inputClazz,required,currentValue,defaultValue,enums,description);
            if (input != null) {
              builder.add(input);
              inputs.add(input);
            }
          }
        }
      }
    }
  }
}
