{
  final String actualUrl=configuredUrl != null ? configuredUrl : updatedUrl;
  if (isValid()) {
    threadPool.submit(new Runnable(){
      @Override public void run(){
        if (isValid()) {
          LOG.info("Performing on remote url changed from: {} to: {}",updatedUrl,actualUrl);
          gitOperation(new GitOperation<Void>(){
            @Override public Void call(            Git git,            GitContext context) throws Exception {
              Repository repository=git.getRepository();
              StoredConfig config=repository.getConfig();
              String currentUrl=config.getString("remote","origin","url");
              if (actualUrl != null && !actualUrl.equals(currentUrl)) {
                remoteUrl=actualUrl;
                config.setString("remote","origin","url",actualUrl);
                config.setString("remote","origin","fetch","+refs/heads/*:refs/remotes/origin/*");
                config.save();
                doPull(git,getCredentialsProvider(),false);
                doPush(git,context);
              }
              return null;
            }
          }
);
        }
      }
      @Override public String toString(){
        return "RemoteUrlChangedTask";
      }
    }
);
  }
}
