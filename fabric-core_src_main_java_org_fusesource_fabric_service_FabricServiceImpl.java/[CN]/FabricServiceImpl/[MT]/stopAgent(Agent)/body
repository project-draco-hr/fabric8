{
  if (agent.isRoot()) {
    throw new IllegalArgumentException("Can not stop root agents");
  }
  getAgentTemplate(agent.getParent()).execute(new AgentTemplate.AdminServiceCallback<Object>(){
    public Object doWithAdminService(    AdminServiceMBean adminService) throws Exception {
      adminService.stopInstance(agent.getId());
      return null;
    }
  }
);
}
