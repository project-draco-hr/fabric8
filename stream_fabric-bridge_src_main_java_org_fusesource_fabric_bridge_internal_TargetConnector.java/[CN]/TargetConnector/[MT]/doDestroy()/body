{
  if (listenerContainer.isActive()) {
    try {
      listenerContainer.destroy();
    }
 catch (    JmsException ex) {
      LOG.error("Error destroying message listener container: " + ex.getMessage(),ex);
      throw ex;
    }
  }
  if (localConnectionFactory != null && (localConnectionFactory instanceof PooledConnectionFactory)) {
    LOG.debug("Stopping local connection factory");
    ((PooledConnectionFactory)localConnectionFactory).stop();
  }
  if (remoteConnectionFactory != null && (remoteConnectionFactory instanceof PooledConnectionFactory)) {
    LOG.debug("Stopping remote connection factory");
    ((PooledConnectionFactory)remoteConnectionFactory).stop();
  }
  LOG.info("Destroyed");
}
