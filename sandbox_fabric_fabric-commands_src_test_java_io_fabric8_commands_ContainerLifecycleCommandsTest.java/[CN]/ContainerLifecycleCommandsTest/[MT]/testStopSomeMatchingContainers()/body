{
  containers("c1","c2");
  ContainerImpl c1=newContainer("c1");
  expect(this.fabricService.adapt(CuratorFramework.class)).andReturn(this.curatorFramework);
  expect(this.fabricService.getContainers()).andReturn(new Container[]{c1}).once();
  this.fabricService.stopContainer(c1,false);
  expect(this.fabricService.adapt(CuratorFramework.class)).andReturn(this.curatorFramework);
  expect(this.fabricService.getContainers()).andReturn(new Container[]{c1}).once();
  replay(this.fabricService,this.commandSession);
  try {
    this.stop.execute(this.commandSession);
    fail("Should throw FabricException");
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage().contains(" c2 "),is(true));
  }
  verify(this.fabricService);
}
