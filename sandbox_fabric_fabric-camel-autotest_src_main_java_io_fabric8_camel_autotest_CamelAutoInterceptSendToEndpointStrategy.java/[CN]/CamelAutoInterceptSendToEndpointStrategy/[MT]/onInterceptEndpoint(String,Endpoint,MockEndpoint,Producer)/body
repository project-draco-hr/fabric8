{
  CamelContext context=mockEndpoint.getCamelContext();
  try {
    Object me=context.getManagementStrategy().getManagementObjectStrategy().getManagedObjectForEndpoint(context,mockEndpoint);
    if (me != null && !context.getManagementStrategy().isManaged(me,null)) {
      LOG.info("Registering mock endpoint in JMX: {}",mockEndpoint);
      context.getManagementStrategy().manageObject(me);
    }
  }
 catch (  Exception e) {
    LOG.warn("Error registering mock endpoint in JMX: " + mockEndpoint + " due "+ e.getMessage()+ ". This exception is ignored.");
  }
  return mockProducer;
}
