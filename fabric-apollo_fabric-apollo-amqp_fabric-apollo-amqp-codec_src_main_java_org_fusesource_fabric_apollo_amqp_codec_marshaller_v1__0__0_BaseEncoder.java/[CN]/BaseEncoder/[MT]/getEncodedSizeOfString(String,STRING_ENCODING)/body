{
  try {
switch (encoding) {
case STR32_UTF16:
case STR8_UTF16:
{
        return val.getBytes("utf-16").length;
      }
case STR32_UTF8:
case STR8_UTF8:
{
      return val.getBytes("utf-8").length;
    }
default :
  throw new UnsupportedEncodingException(encoding.name());
}
}
 catch (UnsupportedEncodingException uee) {
throw new AmqpEncodingError(uee.getMessage(),uee);
}
}
