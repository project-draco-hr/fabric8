{
  String profilesText=getProfiles();
  String[] profileArrays=null;
  if (Strings.isNotBlank(profilesText)) {
    profileArrays=profilesText.split(",");
  }
  if (profileArrays == null || profileArrays.length == 0) {
    profileArrays=new String[]{"autoscale"};
  }
  List<String> profiles=Arrays.asList(profileArrays);
  System.out.println("Populating initial fabric node with the profiles: " + profiles);
  controllerManager.setProfiles(profiles);
  File baseDir=getBaseDir();
  String outputFolder=Strings.defaultIfEmpty(getWorkFolder(),"fabric8");
  File workDir=new File(baseDir,"target/" + outputFolder);
  System.out.println("Using " + workDir.getPath() + " to store the fabric8 installation");
  controllerManager.setWorkDirectory(workDir);
  if (Strings.isNotBlank(globalResolver)) {
    System.out.println("Using global resolver " + globalResolver);
    controllerManager.setEnvironmentVariable(EnvironmentVariables.FABRIC8_GLOBAL_RESOLVER,globalResolver);
  }
  if (Strings.isNotBlank(fabricDockerImage)) {
    System.out.println("Using fabric docker image: " + fabricDockerImage);
    controllerManager.setEnvironmentVariable("FABRIC8_DOCKER_IMAGE_FABRIC8",fabricDockerImage);
  }
}
