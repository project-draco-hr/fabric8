{
  Map<ProfileVersionKey,Map<String,Parser>> profileArtifacts=new HashMap<ProfileVersionKey,Map<String,Parser>>();
  Container[] containers=fabricService.get().getContainers();
  for (  Container container : containers) {
    container.getProvisionList();
    Profile[] profiles=container.getProfiles();
    for (    Profile profile : profiles) {
      Profile overlay=profile.getOverlay();
      ProfileVersionKey key=new ProfileVersionKey(profile);
      if (!profileArtifacts.containsKey(key)) {
        DownloadManager downloadManager=DownloadManagers.createDownloadManager(fabricService.get(),overlay,executorService);
        Map<String,Parser> artifacts=AgentUtils.getProfileArtifacts(downloadManager,overlay);
        profileArtifacts.put(key,artifacts);
      }
    }
  }
  return profileArtifacts;
}
