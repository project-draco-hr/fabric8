{
  File gitFolder=new File(projectFolder,".git");
  CredentialsProvider credentialsProvider=userDetails.createCredentialsProvider();
  if (!Files.isDirectory(gitFolder) || !Files.isDirectory(projectFolder)) {
    cloneRepo(projectFolder,cloneUrl,credentialsProvider,sshPrivateKey,sshPublicKey,this.remote);
  }
 else {
    doPull(gitFolder,credentialsProvider,userDetails.getBranch(),userDetails.createPersonIdent(),userDetails);
  }
  return projectFolder;
}
