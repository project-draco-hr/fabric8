{
  final Map<String,PlaceholderResolver> resolversSnapshot=new HashMap<String,PlaceholderResolver>(placeholderResolvers);
  Set<String> requiredSchemes=getSchemesForProfileConfigurations(configs);
  Set<String> availableSchemes=resolversSnapshot.keySet();
  if (!availableSchemes.containsAll(requiredSchemes)) {
    StringBuilder sb=new StringBuilder();
    sb.append("Missing Placeholder Resolvers:");
    for (    String scheme : requiredSchemes) {
      if (!availableSchemes.contains(scheme)) {
        sb.append(" ").append(scheme);
      }
    }
    throw new FabricException(sb.toString());
  }
  final FabricService fabricService=this;
  for (  Map.Entry<String,Map<String,String>> entry : configs.entrySet()) {
    final String pid=entry.getKey();
    Map<String,String> props=entry.getValue();
    for (    Map.Entry<String,String> e : props.entrySet()) {
      final String key=e.getKey();
      final String value=e.getValue();
      props.put(key,InterpolationHelper.substVars(value,key,null,props,new InterpolationHelper.SubstitutionCallback(){
        public String getValue(        String toSubstitute){
          if (toSubstitute != null && toSubstitute.contains(":")) {
            String scheme=toSubstitute.substring(0,toSubstitute.indexOf(":"));
            return resolversSnapshot.get(scheme).resolve(fabricService,configs,pid,key,toSubstitute);
          }
          return substituteBundleProperty(toSubstitute,bundleContext);
        }
      }
));
    }
  }
}
