{
  ProfileService profileService=fabricService.adapt(ProfileService.class);
  String versionId=requirements.getVersion();
  Version version;
  if (!Strings.isNullOrEmpty(versionId)) {
    version=profileService.getRequiredVersion(versionId);
  }
 else {
    version=fabricService.getDefaultVersion();
  }
  Set<String> profileIds=new HashSet<String>(Profiles.profileIds(version.getProfiles()));
  List<ProfileRequirements> profileRequirements=requirements.getProfileRequirements();
  for (  ProfileRequirements profileRequirement : profileRequirements) {
    validateProfileRequirements(fabricService,requirements,profileRequirement,profileIds);
  }
}
