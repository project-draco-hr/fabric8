{
  int COUNT=500000;
  int LIMIT=1000;
  EventCache<String> eventCache=new MockEventCache<String>();
  EventClock clock=eventCache.getEventClock();
  clock.setCurrentTime(0,TimeUnit.MILLISECONDS);
  eventCache.setWindow("5 s," + LIMIT);
  long windowTime=eventCache.getWindowTime();
  assertEquals((5 * 1000),windowTime);
  for (int i=0; i < COUNT; i++) {
    eventCache.add("test " + i);
    clock.advanceClock(1,TimeUnit.MILLISECONDS);
    assertTrue("Event Cache should be less or equal to " + LIMIT + " is actually "+ eventCache.size(),eventCache.size() <= LIMIT);
  }
}
