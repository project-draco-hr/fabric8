{
  this.subject=subject;
  this.callbackHandler=callbackHandler;
  loginSucceeded=false;
  if (zookeeper == null) {
    ZKClientFactoryBean factory=new ZKClientFactoryBean();
    users=new Properties();
    groups=new Properties();
    try {
      zookeeper=factory.getObject();
      zookeeper.registerListener(this);
      connected.await(1,TimeUnit.SECONDS);
    }
 catch (    Exception e) {
      LOG.warn("Failed initializing authentication plugin",e);
    }
    LOG.debug("Using  " + users + " "+ groups);
  }
}
