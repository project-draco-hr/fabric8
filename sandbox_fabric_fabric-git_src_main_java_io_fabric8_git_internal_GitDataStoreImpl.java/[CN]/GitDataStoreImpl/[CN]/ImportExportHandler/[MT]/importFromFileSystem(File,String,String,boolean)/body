{
  assertWriteLock();
  GitOperation<Void> gitop=new GitOperation<Void>(){
    public Void call(    Git git,    GitContext context) throws Exception {
      GitHelpers.checkoutTag(git,GitHelpers.ROOT_TAG);
      createOrCheckoutVersion(git,versionId);
      File toDir=GitHelpers.getRootGitDirectory(git);
      if (Strings.isNotBlank(destinationPath)) {
        toDir=new File(toDir,destinationPath);
      }
      if (isProfileDir) {
        recursiveAddLegacyProfileDirectoryFiles(git,fabricDir,toDir,destinationPath);
      }
 else {
        recursiveCopyAndAdd(git,fabricDir,toDir,destinationPath,false);
      }
      context.commitMessage("Imported from " + fabricDir);
      return null;
    }
  }
;
  executeWrite(gitop);
}
