{
  final String versionId="1.0";
  Assert.assertFalse(profileRegistry.hasProfile(versionId,"prfE"));
  Assert.assertFalse(profileRegistry.hasProfile(versionId,"prfF"));
  checkoutRequiredBranch(versionId);
  RevCommit head=CommitUtils.getHead(git.getRepository());
  ProfileBuilder pbuilder=ProfileBuilder.Factory.create(versionId,"prfE");
  profileRegistry.createProfile(pbuilder.getProfile());
  Assert.assertTrue(remoteProfileExists("1.0","prfE"));
  git.reset().setMode(ResetType.HARD).setRef(head.getName()).call();
  Assert.assertFalse(remoteProfileExists("1.0","prfE"));
  createProfileRemote(versionId,"prfF",null);
  Assert.assertTrue(remoteProfileExists("1.0","prfF"));
  GitOperation<Profile> gitop=new GitOperation<Profile>(){
    public Profile call(    Git git,    GitContext context) throws Exception {
      return profileRegistry.getProfile(versionId,"prfF");
    }
  }
;
  GitContext context=new GitContext().requirePull();
  gitDataStore.gitOperation(context,gitop,null);
  Assert.assertTrue(profileRegistry.hasProfile(versionId,"prfE"));
  Assert.assertTrue(profileRegistry.hasProfile(versionId,"prfF"));
  profileRegistry.deleteProfile(versionId,"prfE");
  profileRegistry.deleteProfile(versionId,"prfF");
  Assert.assertFalse(profileRegistry.hasProfile(versionId,"prfE"));
  Assert.assertFalse(profileRegistry.hasProfile(versionId,"prfF"));
}
