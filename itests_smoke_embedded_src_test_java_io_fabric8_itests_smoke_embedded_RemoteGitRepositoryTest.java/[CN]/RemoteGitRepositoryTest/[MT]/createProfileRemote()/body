{
  final String versionId="1.0";
  Assert.assertFalse(profileRegistry.hasProfile(versionId,"prfB"));
  createProfileRemote(versionId,"prfB",Collections.singletonMap("foo","bbb"));
  GitOperation<Profile> gitop=new GitOperation<Profile>(){
    public Profile call(    Git git,    GitContext context) throws Exception {
      return profileRegistry.getProfile(versionId,"prfB");
    }
  }
;
  GitContext context=new GitContext().requirePull();
  Profile profile=gitDataStore.gitOperation(context,gitop,null);
  Assert.assertEquals("1.0",profile.getVersion());
  Assert.assertEquals("prfB",profile.getId());
  Assert.assertEquals("bbb",profile.getAttributes().get("foo"));
  deleteProfileRemote(versionId,"prfB");
  profile=gitDataStore.gitOperation(context,gitop,null);
  Assert.assertNull(profile);
}
