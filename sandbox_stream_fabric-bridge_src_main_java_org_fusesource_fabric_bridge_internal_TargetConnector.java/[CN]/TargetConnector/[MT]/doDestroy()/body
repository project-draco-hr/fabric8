{
  if (listenerContainer.isActive()) {
    try {
      listenerContainer.destroy();
    }
 catch (    JmsException ex) {
      LOG.error("Error destroying message listener container: " + ex.getMessage(),ex);
      throw ex;
    }
  }
  if (localBrokerConfig.getConnectionFactory() == null && localConnectionFactory != null) {
    ((PooledConnectionFactory)localConnectionFactory).stop();
  }
  if (remoteBrokerConfig != null && remoteBrokerConfig.getConnectionFactory() == null && remoteConnectionFactory != null) {
    ((PooledConnectionFactory)remoteConnectionFactory).stop();
  }
  LOG.info("Destroyed");
}
