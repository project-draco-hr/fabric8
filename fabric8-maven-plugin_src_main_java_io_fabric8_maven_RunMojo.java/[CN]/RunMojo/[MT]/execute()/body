{
  File json=getKubernetesJson();
  if (!Files.isFile(json)) {
    if (Files.isFile(kubernetesSourceJson)) {
      json=kubernetesSourceJson;
    }
 else {
      throw new MojoFailureException("No such generated kubernetes json file: " + json + " or source json file "+ kubernetesSourceJson);
    }
  }
  KubernetesClient api=getKubernetes();
  getLog().info("Deploying " + json + " to "+ api.getAddress());
  try {
    Object dto=KubernetesHelper.loadJson(json);
    if (dto == null) {
      throw new MojoFailureException("Could not load kubernetes json: " + json);
    }
    Controller controller=new Controller(kubernetes);
    controller.apply(dto,json.getName());
  }
 catch (  IOException e) {
    throw new MojoExecutionException(e.getMessage(),e);
  }
}
