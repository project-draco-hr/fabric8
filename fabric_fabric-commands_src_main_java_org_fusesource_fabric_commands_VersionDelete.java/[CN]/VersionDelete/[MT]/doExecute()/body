{
  Version version=fabricService.getVersion(versionName);
  if (version == null) {
    throw new IllegalArgumentException("Cannot find version: " + versionName);
  }
  StringBuilder sb=new StringBuilder();
  for (  Container container : fabricService.getContainers()) {
    if (version.equals(container.getVersion())) {
      if (sb.length() > 0) {
        sb.append(", ");
      }
      sb.append(container.getId());
    }
  }
  if (sb.length() > 0) {
    throw new IllegalArgumentException("Version " + versionName + " is still in used by the following containers: "+ sb.toString());
  }
  version.delete();
  return null;
}
