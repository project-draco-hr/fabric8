{
  assertValid();
  try {
    CreateContainerOptions options=metadata.getCreateOptions();
    String containerId=metadata.getContainerName();
    setContainerMetadata(metadata);
    Map<String,String> configuration=metadata.getContainerConfiguration();
    for (    Map.Entry<String,String> entry : configuration.entrySet()) {
      String key=entry.getKey();
      String value=entry.getValue();
      setData(getCurator(),ZkPath.CONTAINER_ENTRY.getPath(metadata.getContainerName(),key),value);
    }
    String resolver=metadata.getOverridenResolver() != null ? metadata.getOverridenResolver() : options.getResolver();
    if (resolver == null && exists(getCurator(),ZkPath.CONTAINER_RESOLVER.getPath(containerId)) != null) {
      resolver=getStringData(getCurator(),ZkPath.CONTAINER_RESOLVER.getPath(containerId));
    }
 else     if (options.getResolver() != null) {
    }
 else     if (exists(getCurator(),ZkPath.POLICIES.getPath(ZkDefs.RESOLVER)) != null) {
      resolver=getStringData(getCurator(),ZkPath.POLICIES.getPath(ZkDefs.RESOLVER));
    }
 else {
      resolver=ZkDefs.DEFAULT_RESOLVER;
    }
    setData(getCurator(),ZkPath.CONTAINER_RESOLVER.getPath(containerId),resolver);
  }
 catch (  Exception e) {
    throw FabricException.launderThrowable(e);
  }
}
