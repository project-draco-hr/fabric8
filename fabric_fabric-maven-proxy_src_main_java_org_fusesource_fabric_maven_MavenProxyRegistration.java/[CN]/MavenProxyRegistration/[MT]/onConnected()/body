{
  String mavenProxyUrl=MavenProxyUtils.getMavenProxyUrl(port);
  String parentPath=ZkPath.CONFIGS_MAVEN_PROXY.getPath();
  String path=parentPath + "/p_";
  try {
    if (zookeeper.exists(parentPath) == null) {
      zookeeper.createWithParents(parentPath,null,ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
    }
    if (zookeeper.exists(path) == null || (node != null && zookeeper.exists(node) == null)) {
      node=zookeeper.create(path,mavenProxyUrl.getBytes("UTF-8"),ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL_SEQUENTIAL);
    }
  }
 catch (  Exception e) {
    LOGGER.error("Failed to register maven proxy.",e);
  }
}
