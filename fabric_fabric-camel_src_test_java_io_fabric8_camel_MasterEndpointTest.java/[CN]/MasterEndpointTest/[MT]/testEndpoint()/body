{
  List<Route> registeredRoutes=camelContext.getRoutes();
  Assert.assertEquals("number of routes",1,registeredRoutes.size());
  MasterEndpoint endpoint=(MasterEndpoint)registeredRoutes.get(0).getEndpoint();
  Assert.assertEquals("wrong endpoint uri","seda:bar",endpoint.getChild());
  System.out.println("===== starting test of Master endpoint!");
  String expectedBody="<matched/>";
  resultEndpoint.expectedBodiesReceived(expectedBody);
  Thread.sleep(5000);
  template.sendBodyAndHeader(expectedBody,"foo","bar");
  MockEndpoint.assertIsSatisfied(camelContext);
  System.out.println("===== completed test of Master endpoint!");
}
