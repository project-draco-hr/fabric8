{
  ClassLoader loader=ConfigurationAdmin.class.getClassLoader();
  String resource=ConfigurationAdmin.class.getName().replace('.','/') + ".class";
  URL url=loader.getResource(resource);
  if (url.getProtocol().equals("jar")) {
    String path=url.getPath();
    resource=path.substring(0,path.indexOf('!'));
    resource=URI.create(resource).getPath();
  }
  JarFile jar=new JarFile(resource);
  Attributes attributes=jar.getManifest().getMainAttributes();
  Map<String,String> headers=new HashMap<String,String>();
  for (  Map.Entry key : attributes.entrySet()) {
    headers.put(key.getKey().toString(),key.getValue().toString());
  }
  Resource res=ResourceBuilder.build(url.toString(),headers);
  System.out.println("Capabilities");
  for (  Capability cap : res.getCapabilities(null)) {
    System.out.println("    " + cap.toString());
  }
  System.out.println("Requirements");
  for (  Requirement req : res.getRequirements(null)) {
    System.out.println("    " + req.toString());
  }
}
