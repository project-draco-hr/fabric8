{
  int size=1;
  byte formatCode=TypeRegistry.instance().picker().chooseListEncoding(value);
switch (formatCode) {
case TypeRegistry.NULL_FORMAT_CODE:
    return size;
case AMQPList.LIST_LIST8_CODE:
  size+=AMQPList.LIST_LIST8_WIDTH * 2;
break;
case AMQPList.LIST_LIST32_CODE:
size+=AMQPList.LIST_LIST32_WIDTH * 2;
break;
default :
throw new RuntimeException("Unknown format code 0x" + String.format("%x",formatCode));
}
for (Object obj : value) {
size+=((AmqpType)obj).size();
}
return size;
}
