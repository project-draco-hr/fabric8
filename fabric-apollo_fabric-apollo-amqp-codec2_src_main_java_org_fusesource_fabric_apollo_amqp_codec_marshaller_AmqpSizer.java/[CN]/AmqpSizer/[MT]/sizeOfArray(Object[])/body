{
  int size=1;
  byte formatCode=TypeRegistry.instance().picker().chooseArrayEncoding(value);
switch (formatCode) {
case TypeRegistry.NULL_FORMAT_CODE:
    return size;
case AMQPArray.ARRAY_ARRAY8_CODE:
  size+=AMQPArray.ARRAY_ARRAY8_WIDTH * 2;
break;
case AMQPArray.ARRAY_ARRAY32_WIDTH:
size+=AMQPArray.ARRAY_ARRAY32_WIDTH * 2;
}
size+=getArrayConstructorSize(value);
size+=getArrayBodySize(value);
return size;
}
