{
  String serviceName="my-service";
  Integer servicePort=80;
  Integer serviceContainerPort=8080;
  CreateAppDTO dto=createAppDto(4);
  dto.setServiceName(serviceName);
  dto.setServicePort(servicePort);
  dto.setServiceContainerPort(serviceContainerPort);
  File jsonFile=generateJsonFile("controllerAnd",dto);
  List<Object> entities=generateTemplateAndLoadEntities(jsonFile);
  assertEquals("Entities size",2,entities.size());
  Object serviceEntity=entities.get(0);
  assertThat(serviceEntity).isInstanceOf(Service.class);
  Service service=(Service)serviceEntity;
  assertEquals("serviceName",serviceName,getId(service));
  ServiceSpec spec=service.getSpec();
  assertEquals("servicePort",servicePort,spec.getPort());
  IntOrString containerPortNameOrNumber=spec.getContainerPort();
  assertNotNull("containerPortNameOrNumber",containerPortNameOrNumber);
  assertEquals("serviceContainerPort",serviceContainerPort,containerPortNameOrNumber.getIntVal());
  assertEquals("selector",dto.getLabels(),spec.getSelector());
  Object entity=entities.get(1);
  assertGeneratedReplicationController(entity,dto);
}
