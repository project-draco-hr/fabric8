{
  String serviceName="my-service";
  Integer servicePort=80;
  IntOrString serviceContainerPort=new IntOrString();
  serviceContainerPort.setStrVal("http");
  CreateAppDTO dto=createAppDto(4);
  dto.setServiceName(serviceName);
  dto.setServicePort(servicePort);
  dto.setServiceContainerPort(serviceContainerPort);
  File jsonFile=generateJsonFile("controllerAnd",dto);
  List<Object> entities=generateTemplateAndLoadEntities(jsonFile);
  assertEquals("Entities size",2,entities.size());
  Object serviceEntity=entities.get(0);
  assertThat(serviceEntity).isInstanceOf(Service.class);
  Service service=(Service)serviceEntity;
  assertEquals("serviceName",serviceName,getId(service));
  assertEquals("servicePort",servicePort,getPort(service));
  String containerPort=getContainerPortString(service);
  assertNotNull("containerPort " + containerPort,containerPort);
  assertEquals("serviceContainerPort",serviceContainerPort.getStrVal(),containerPort);
  assertEquals("selector",dto.getLabels(),getSelector(service));
  Object entity=entities.get(1);
  assertGeneratedReplicationController(entity,dto);
}
