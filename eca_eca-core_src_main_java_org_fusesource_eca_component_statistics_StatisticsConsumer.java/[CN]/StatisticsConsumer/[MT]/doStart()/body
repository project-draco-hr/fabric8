{
  super.doStart();
  if (polling) {
    long scheduleTime=ParsingUtil.getTimeAsMilliseconds(getEndpoint().getBatchUpdateTime());
    LOG.debug("Scheduled StatisticsConsumer to batch every {}",getEndpoint().getBatchUpdateTime());
    final Runnable runnable=new Runnable(){
      public void run(){
        Exchange exchange=lastGeneratedExchange;
        if (exchange != null) {
          try {
            StatisticsConsumer.this.doSuperSendToConsumers(exchange);
          }
 catch (          Throwable e) {
            LOG.warn("Failed to send batch statistics to " + getEndpoint().getEndpointUri() + ". This exception will be ignored.",e);
          }
        }
      }
    }
;
    future=executor.scheduleAtFixedRate(runnable,scheduleTime,scheduleTime,TimeUnit.MILLISECONDS);
  }
}
