{
  String profile=profileRequirement.getProfile();
  Integer minimumInstances=profileRequirement.getMinimumInstances();
  if (minimumInstances != null) {
    List<Container> containers=aliveOrPendingContainersForProfile(profile);
    int count=containers.size();
    int delta=minimumInstances - count;
    try {
      if (delta < 0) {
        autoScaler.destroyContainers(profile,-delta,containers);
      }
 else       if (delta > 0) {
        if (requirementsSatisfied(requirements,profileRequirement)) {
          FabricService service=fabricService.get();
          String version=service.getDefaultVersion().getId();
          AutoScaleRequest command=new AutoScaleRequest(service,version,profile,delta,requirements,profileRequirement);
          autoScaler.createContainers(command);
        }
      }
    }
 catch (    Exception e) {
      LOGGER.error("Failed to auto-scale " + profile + ". Caught: "+ e,e);
    }
  }
}
