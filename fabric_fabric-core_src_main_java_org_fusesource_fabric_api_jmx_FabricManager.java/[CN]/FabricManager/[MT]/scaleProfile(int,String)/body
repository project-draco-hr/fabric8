{
  if (numberOfInstances == 0) {
    throw new IllegalArgumentException("numberOfInstances should be greater or less than zero");
  }
  FabricRequirements requirements=requirements();
  ProfileRequirements profileRequirements=requirements.getOrCreateProfileRequirement(profile);
  Integer minimumInstances=profileRequirements.getMinimumInstances();
  List<Container> containers=containersForProfile(profile);
  int containerCount=containers.size();
  int newCount=containerCount + numberOfInstances;
  boolean update=minimumInstances == null;
  if (numberOfInstances > 0) {
    if (newCount > minimumInstances) {
      update=true;
    }
  }
 else {
    if (newCount < minimumInstances) {
      update=true;
    }
  }
  if (update) {
    profileRequirements.setMinimumInstances(newCount);
    requirements(requirements);
  }
  return update;
}
