{
  dataOut.writeBoolean(o != null);
  if (o != null) {
    String className=o instanceof OpenwireException ? ((OpenwireException)o).getClassName() : o.getClass().getName();
    looseMarshalString(new UTF8Buffer(className),dataOut);
    looseMarshalString(new UTF8Buffer(o.getMessage()),dataOut);
    if (wireFormat.isStackTraceEnabled()) {
      StackTraceElement[] stackTrace=o.getStackTrace();
      dataOut.writeShort(stackTrace.length);
      for (int i=0; i < stackTrace.length; i++) {
        StackTraceElement element=stackTrace[i];
        looseMarshalString(new UTF8Buffer(element.getClassName()),dataOut);
        looseMarshalString(new UTF8Buffer(element.getMethodName()),dataOut);
        looseMarshalString(new UTF8Buffer(element.getFileName()),dataOut);
        dataOut.writeInt(element.getLineNumber());
      }
      looseMarshalThrowable(wireFormat,o.getCause(),dataOut);
    }
  }
}
