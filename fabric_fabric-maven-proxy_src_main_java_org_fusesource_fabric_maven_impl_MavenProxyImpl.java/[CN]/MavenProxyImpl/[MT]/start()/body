{
  if (port >= 0) {
    if (localRepository.equals("")) {
      localRepository=System.getProperty("user.home") + File.separator + ".m2"+ File.separator+ "repository";
    }
    if (system == null) {
      system=newRepositorySystem();
    }
    if (session == null) {
      session=newSession(system,localRepository);
    }
    repositories=new ArrayList<RemoteRepository>();
    repositories.add(new RemoteRepository("local","default","file://" + localRepository));
    int i=0;
    for (    String rep : remoteRepositories.split(",")) {
      RemoteRepository remoteRepository=new RemoteRepository("repo-" + i++,"default",rep);
      remoteRepository.setPolicy(true,new RepositoryPolicy(true,updatePolicy,checksumPolicy));
      repositories.add(remoteRepository);
    }
    String repos="local:" + localRepository + " ";
    for (    RemoteRepository repo : repositories) {
      repos+=repo + " ";
    }
    repos=repos.trim();
    serverSocket=new ServerSocket(port);
    Acceptor acceptor=new Acceptor(serverSocket);
    acceptor.setName("MavenProxyAcceptor");
    acceptor.start();
    LOGGER.log(Level.INFO,String.format("Maven proxy started at address : %s with configured repositories : %s",getAddress(),repos));
  }
}
