{
  if (!running.get()) {
    throw new IllegalStateException("Transport pool stopped");
  }
  queue.execute(new Runnable(){
    public void run(){
      Transport transport=getIdleTransport();
      if (transport != null) {
        transport.offer(data);
        if (transport.full()) {
          transports.put(transport,0L);
        }
      }
 else {
        pending.add(data);
      }
    }
  }
);
}
