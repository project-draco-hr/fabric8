{
  configAdminServiceReference=bundleContext.getServiceReference(ConfigurationAdmin.class.getName());
  configAdmin=(ConfigurationAdmin)bundleContext.getService(configAdminServiceReference);
  defaultJmxRealm=getRealm(KARAF_MANAGEMENT_PID,JMX_REALM);
  defaultSshRealm=getRealm(KARAF_SHELL_PID,SSH_REALM);
  if (isZookeeperAvailable() && !realmsUpdated) {
    updateRealm(KARAF_SHELL_PID,SSH_REALM,ZOOKEEPER_REALM);
    updateRealm(KARAF_MANAGEMENT_PID,JMX_REALM,ZOOKEEPER_REALM);
    realmsUpdated=true;
  }
}
