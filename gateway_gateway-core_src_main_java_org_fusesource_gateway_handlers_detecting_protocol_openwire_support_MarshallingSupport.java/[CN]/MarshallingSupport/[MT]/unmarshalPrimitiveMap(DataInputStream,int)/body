{
  int size=in.readInt();
  if (size > maxPropertySize) {
    throw new IOException("Primitive map is larger than the allowed size: " + size);
  }
  if (size < 0) {
    return null;
  }
 else {
    Map<String,Object> rc=new HashMap<String,Object>(size);
    for (int i=0; i < size; i++) {
      String name=in.readUTF();
      rc.put(name,unmarshalPrimitive(in));
    }
    return rc;
  }
}
