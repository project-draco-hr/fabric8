{
  System.setProperty("java.protocol.handler.pkgs","org.ops4j.pax.url.mvn");
  processManager.init();
  InstallTask postInstall=null;
  String version=FabricConstants.FABRIC_VERSION;
  InstallOptions options=InstallOptions.builder().name("camel-sample").url(new URL(null,"mvn:org.fusesource.fabric.samples/process-sample-camel-spring/" + version + "/tar.gz",new Handler())).build();
  Installation install=processManager.install(options,postInstall);
  int id=install.getId();
  assertTrue("ID should be > 0 but was " + id,id > 0);
  File installDir=install.getInstallDir();
  if (!installDir.exists()) {
    fail("Installation does not exist: " + installDir);
  }
  ProcessController controller=install.getController();
  int rc=controller.start();
  assertEquals("Return code",0,rc);
  Thread.sleep(2000);
  rc=controller.stop();
  assertEquals("Return code",0,rc);
}
