{
  if (Strings.isNullOrBlank(username)) {
    username=ShellUtils.retrieveFabricUser(session);
  }
  if (Strings.isNullOrBlank(password)) {
    password=ShellUtils.retrieveFabricUserPassword(session);
  }
  MQBrokerConfigDTO dto=new MQBrokerConfigDTO();
  dto.setConfigUrl(config);
  dto.setData(data);
  if (ports != null && ports.length > 0) {
    for (    String port : ports) {
      addConfig(port,dto.getPorts());
    }
  }
  dto.setGroup(group);
  dto.setJvmOpts(jvmOpts);
  dto.setBrokerName(name);
  dto.setProfile(profile);
  dto.setClientProfile(clientProfile);
  dto.setClientParentProfile(clientParentProfile);
  dto.setNetworks(networks);
  dto.setNetworksPassword(networksPassword);
  dto.setNetworksUserName(networksUserName);
  dto.setParentProfile(parentProfile);
  dto.setProperties(properties);
  dto.setVersion(version);
  dto.setMinimumInstances(minimumInstances);
  dto.setReplicas(replicas);
  if (kind != null) {
    dto.setKind(kind);
  }
  return dto;
}
