{
  Container container=createMock(Container.class);
  expect(container.getId()).andReturn("container").anyTimes();
  expect(container.isAlive()).andReturn(false).times(10);
  expect(container.isAlive()).andReturn(true).anyTimes();
  expect(container.isManaged()).andReturn(true).anyTimes();
  expect(container.getProvisionStatus()).andReturn("").times(5);
  expect(container.getProvisionStatus()).andReturn("analyzing").times(5);
  expect(container.getProvisionStatus()).andReturn("success").anyTimes();
  expect(container.getSshUrl()).andReturn("container:8181").anyTimes();
  expect(container.getProvisionException()).andReturn(null).anyTimes();
  replay(container);
  WaitForProvisionTask task=new WaitForProvisionTask(container,"success",10000L);
  assertTrue(task.call());
  verify(container);
}
