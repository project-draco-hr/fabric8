{
  Query query=new Query("jvm",new HashSet<Request>(Arrays.asList(new MBeanAttrs("memory","java.lang:type=Memory",Arrays.asList("HeapMemoryUsage","NonHeapMemoryUsage")),new MBeanAttrs("pool","java.lang:type=MemoryPool,*",Arrays.asList("Usage","PeakUsage")),new MBeanAttrs("threading","java.lang:type=Threading",Arrays.asList("DaemonThreadCount","PeakThreadCount","ThreadCount")),new MBeanAttrs("buffer_pools","java.nio:type=BufferPool,*",Arrays.asList("Count","MemoryUsed","TotalCapacity")),new MBeanAttrs("gc","java.lang:type=GarbageCollector,*",Arrays.asList("CollectionCount","CollectionTime")))),null,null,null,0,0);
  System.gc();
  QueryResult qrs=JmxUtils.execute(new Server("local"),query,ManagementFactory.getPlatformMBeanServer());
  String output=new Renderer().render(qrs);
  Object json=new JSONReader().read(output);
  assertNotNull(json);
  assertTrue(json instanceof Map);
  Map map=(Map)json;
  assertEquals("local",map.get("host"));
  assertNotNull(map.get("timestamp"));
  assertNotNull(map.get("mem"));
  assertNotNull(map.get("threads"));
  assertNotNull(map.get("gc"));
  assertNotNull(map.get("buffer_pools"));
}
