{
  IllegalArgumentAssertion.assertNotNull(updateUrl,"updateUrl");
  LockHandle writeLock=aquireWriteLock();
  try {
    if (!isValid()) {
      LOGGER.warn("Remote url change on invalid component: " + updateUrl);
      return;
    }
    GitOperation<Void> gitop=new GitOperation<Void>(){
      @Override public Void call(      Git git,      GitContext context) throws Exception {
        Repository repository=git.getRepository();
        StoredConfig config=repository.getConfig();
        String currentUrl=config.getString("remote","origin","url");
        if (!updateUrl.equals(currentUrl)) {
          LOGGER.info("Remote url change from: {} to: {}",currentUrl,updateUrl);
          remoteUrl=updateUrl;
          config.setString("remote","origin","url",updateUrl);
          config.setString("remote","origin","fetch","+refs/heads/*:refs/remotes/origin/*");
          config.save();
          boolean hasChanged=doPullInternal(git,context,getCredentialsProvider(),false);
          hasChanged|=doPushInternal(git,context,getCredentialsProvider(),null);
          if (hasChanged) {
            versionCache.invalidateAll();
            notificationRequired=true;
          }
        }
        return null;
      }
    }
;
    executeInternal(new GitContext(),null,gitop);
  }
  finally {
    writeLock.unlock();
  }
}
