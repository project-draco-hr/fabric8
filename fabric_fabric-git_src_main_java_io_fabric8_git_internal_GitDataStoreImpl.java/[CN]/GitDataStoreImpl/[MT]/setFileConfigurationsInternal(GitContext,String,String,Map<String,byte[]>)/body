{
  assertWriteLock();
  Profile existingProfile=getProfileFromCache(versionId,profileId);
  if (existingProfile != null) {
    Set<String> removeFiles=new HashSet<>(existingProfile.getFileConfigurations().keySet());
    removeFiles.removeAll(fileConfigurations.keySet());
    if (!removeFiles.isEmpty()) {
      context.commitMessage("Remove configurations " + removeFiles + " for profile: "+ profileId);
      deleteProfileContent(profileId,removeFiles,null);
    }
  }
  if (!fileConfigurations.isEmpty()) {
    setFileConfigurations(getGit(),profileId,fileConfigurations);
    context.commitMessage("Update configurations for profile: " + profileId);
  }
}
