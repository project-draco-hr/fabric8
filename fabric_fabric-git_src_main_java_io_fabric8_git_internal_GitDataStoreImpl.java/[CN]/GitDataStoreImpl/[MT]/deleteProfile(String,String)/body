{
  IllegalStateAssertion.assertNotNull(versionId,"versionId");
  IllegalStateAssertion.assertNotNull(profileId,"profileId");
  LockHandle writeLock=aquireWriteLock();
  try {
    assertValid();
    LOGGER.debug("Delete " + ProfileBuilder.Factory.create(versionId,profileId).getProfile());
    GitOperation<Void> gitop=new GitOperation<Void>(){
      public Void call(      Git git,      GitContext context) throws Exception {
        checkoutRequiredProfileBranch(git,context,versionId,profileId);
        File profileDirectory=GitHelpers.getProfileDirectory(git,profileId);
        recursiveDeleteAndRemove(git,profileDirectory);
        context.commitMessage("Removed profile " + profileId);
        return null;
      }
    }
;
    executeWrite(gitop);
  }
  finally {
    writeLock.unlock();
  }
}
