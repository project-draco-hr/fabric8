{
  PullPolicyResult pullResult=pullPushPolicy.doPull(context,getCredentialsProvider(),allowVersionDelete);
  if (pullResult.getLastException() == null) {
    if (pullResult.localUpdateRequired()) {
      versionCache.invalidateAll();
      notificationRequired=true;
    }
    Set<String> pullVersions=pullResult.getVersions();
    if (!pullVersions.isEmpty() && !pullVersions.equals(versions)) {
      versions.clear();
      versions.addAll(pullVersions);
      versionCache.invalidateAll();
      notificationRequired=true;
    }
    if (pullResult.remoteUpdateRequired()) {
      doPushInternal(context,credentialsProvider);
    }
  }
  return pullResult;
}
