{
  File profileDirectory=getProfileDirectory(git,profile);
  File file=new File(profileDirectory,pid + PROPERTIES_SUFFIX);
  if (configuration == null) {
    doRecursiveDeleteAndRemove(git,file);
  }
 else {
    profileDirectory.mkdirs();
    Properties props=new Properties(file);
    for (    Map.Entry<String,String> entry : configuration.entrySet()) {
      props.setProperty(entry.getKey(),entry.getValue());
    }
    for (    String key : new ArrayList<String>(props.keySet())) {
      if (!configuration.containsKey(key)) {
        props.remove(key);
      }
    }
    props.save(file);
    doAddFiles(git,file);
  }
}
