{
  PullPolicyResult pullResult=pullPushPolicy.doPull(context,getCredentialsProvider());
  if (pullResult.getLastException() != null) {
    LOGGER.warn("Pull failed",pullResult.getLastException());
  }
  if (pullResult.localUpdateRequired()) {
    versionCache.invalidateAll();
    notificationRequired=true;
  }
  Set<String> pullVersions=pullResult.getVersions();
  if (!pullVersions.isEmpty() && !pullVersions.equals(versions)) {
    versions.clear();
    versions.addAll(pullVersions);
    versionCache.invalidateAll();
    notificationRequired=true;
  }
  if (pullResult.remoteUpdateRequired()) {
    doPushInternal(context,credentialsProvider);
    notificationRequired=true;
  }
  return pullResult;
}
