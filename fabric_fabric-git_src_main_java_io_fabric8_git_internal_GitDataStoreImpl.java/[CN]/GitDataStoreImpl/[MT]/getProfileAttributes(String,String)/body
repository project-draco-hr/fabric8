{
  assertValid();
  Map<String,String> attributes=new HashMap<String,String>();
  Map<String,String> config=getConfiguration(version,profile,Constants.AGENT_PID);
  for (  Map.Entry<String,String> entry : config.entrySet()) {
    String key=entry.getKey();
    if (key.startsWith(DataStore.ATTRIBUTE_PREFIX)) {
      String attribute=key.substring(DataStore.ATTRIBUTE_PREFIX.length());
      String value=entry.getValue();
      attributes.put(attribute,value);
    }
  }
  return attributes;
}
