{
  if (currentValue != null && currentValue.startsWith("{{") && currentValue.endsWith("}}")) {
    inputClazz=String.class;
    enums=null;
  }
  InputComponent input;
  if (enums != null) {
    UISelectOne ui=factory.createSelectOne(name,inputClazz);
    List<String> enumValues=new ArrayList<>();
    String[] values=enums.split(",");
    for (    String v : values) {
      enumValues.add(v);
    }
    ui.setValueChoices(enumValues);
    if (defaultValue != null) {
      Object value=defaultValue;
      Converter converter=converterFactory.getConverter(String.class,inputClazz);
      if (converter != null) {
        value=converter.convert(defaultValue);
      }
      ui.setDefaultValue(value);
    }
    if (currentValue != null) {
      Object value=currentValue;
      Converter converter=converterFactory.getConverter(String.class,inputClazz);
      if (converter != null) {
        value=converter.convert(currentValue);
      }
      for (      String v : enumValues) {
        if (v.equalsIgnoreCase((String)value)) {
          value=v;
          break;
        }
      }
      ui.setValue(value);
    }
    Iterator it=ui.getFacets().iterator();
    while (it.hasNext()) {
      Object facet=it.next();
      if (facet instanceof HintsFacet) {
        ((HintsFacet)facet).setPromptInInteractiveMode(true);
      }
    }
    input=ui;
  }
 else {
    UIInput ui=factory.createInput(name,inputClazz);
    if (defaultValue != null) {
      Object value=defaultValue;
      Converter converter=converterFactory.getConverter(String.class,inputClazz);
      if (converter != null) {
        value=converter.convert(defaultValue);
      }
      ui.setDefaultValue(value);
    }
    if (currentValue != null) {
      Object value=currentValue;
      Converter converter=converterFactory.getConverter(String.class,inputClazz);
      if (converter != null) {
        value=converter.convert(currentValue);
      }
      ui.setValue(value);
    }
    Iterator it=ui.getFacets().iterator();
    while (it.hasNext()) {
      Object facet=it.next();
      if (facet instanceof HintsFacet) {
        ((HintsFacet)facet).setPromptInInteractiveMode(true);
      }
    }
    input=ui;
  }
  if (Objects.equals("true",required)) {
    input.setRequired(true);
  }
  String label=asTitleCase(name);
  input.setLabel(label);
  input.setDescription(description != null ? description : "");
  return input;
}
