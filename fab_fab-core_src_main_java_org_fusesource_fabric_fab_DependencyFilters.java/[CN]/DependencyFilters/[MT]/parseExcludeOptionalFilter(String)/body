{
  final Filter<Dependency> filter=parse(includeOptionalDependencyFilterText);
  final boolean excludeAll=isEmpty(filter);
  return new Filter<Dependency>(){
    @Override public boolean matches(    Dependency tree){
      if (tree.isOptional()) {
        if (excludeAll) {
          return true;
        }
 else {
          return !filter.matches(tree);
        }
      }
      return false;
    }
  }
;
}
