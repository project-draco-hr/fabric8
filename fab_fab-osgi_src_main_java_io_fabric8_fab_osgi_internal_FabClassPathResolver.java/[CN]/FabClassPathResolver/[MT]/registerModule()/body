{
  try {
    Properties moduleProperties=new Properties();
    for (    String key : FAB_MODULE_PROPERTIES) {
      String value=getManifestProperty("FAB-" + key);
      if (Strings.notEmpty(value)) {
        moduleProperties.setProperty(key,value);
      }
    }
    if (!moduleProperties.containsKey(FAB_MODULE_ID)) {
      moduleProperties.setProperty(FAB_MODULE_ID,moduleId.toString());
    }
    if (!moduleProperties.containsKey(FAB_MODULE_NAME)) {
      moduleProperties.setProperty(FAB_MODULE_NAME,moduleId.getArtifactId());
    }
    if (!moduleProperties.containsKey(FAB_MODULE_DESCRIPTION)) {
      moduleProperties.setProperty(FAB_MODULE_DESCRIPTION,emptyIfNull(connection.getProjectDescription()));
    }
    ModuleDescriptor descriptor=ModuleDescriptor.fromProperties(moduleProperties);
    moduleRegistry.add(descriptor);
  }
 catch (  Exception e) {
    System.err.println("Failed to register the fabric module for: " + moduleId);
    e.printStackTrace();
  }
}
