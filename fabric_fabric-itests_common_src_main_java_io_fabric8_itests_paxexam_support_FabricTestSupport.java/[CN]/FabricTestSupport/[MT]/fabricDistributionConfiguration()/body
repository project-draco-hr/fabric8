{
  return new Option[]{KarafDistributionOption.karafDistributionConfiguration().frameworkUrl(CoreOptions.maven().groupId(GROUP_ID).artifactId(ARTIFACT_ID).versionAsInProject().type("zip")).karafVersion(getKarafVersion()).useDeployFolder(false).name("Fabric Karaf Distro").unpackDirectory(new File("target/paxexam/unpack/")),KarafDistributionOption.useOwnExamBundlesStartLevel(50),envAsSystemProperty(ContainerBuilder.CONTAINER_TYPE_PROPERTY,"child"),envAsSystemProperty(ContainerBuilder.CONTAINER_NUMBER_PROPERTY,"1"),envAsSystemProperty(SshContainerBuilder.SSH_HOSTS_PROPERTY),envAsSystemProperty(SshContainerBuilder.SSH_USERS_PROPERTY),envAsSystemProperty(SshContainerBuilder.SSH_PASSWORD_PROPERTY),envAsSystemProperty(SshContainerBuilder.SSH_RESOLVER_PROPERTY),KarafDistributionOption.editConfigurationFilePut("fabric/import/fabric/profiles/default.profile/org.ops4j.pax.logging.properties","log4j.rootLogger","INFO, out, osgi:*"),KarafDistributionOption.editConfigurationFilePut("fabric/import/fabric/profiles/default.profile/org.ops4j.pax.logging.properties","log4j.appender.out","org.apache.log4j.RollingFileAppender"),KarafDistributionOption.editConfigurationFilePut("fabric/import/fabric/profiles/default.profile/org.ops4j.pax.logging.properties","log4j.appender.out.layout","org.apache.log4j.PatternLayout"),KarafDistributionOption.editConfigurationFilePut("fabric/import/fabric/profiles/default.profile/org.ops4j.pax.logging.properties","log4j.appender.out.layout.ConversionPattern","%d{ISO8601} | %-5.5p | %-16.16t | %-32.32c{1} | %-32.32C %4L | %X{bundle.id} - %X{bundle.name} - %X{bundle.version} | %m%n"),KarafDistributionOption.editConfigurationFilePut("fabric/import/fabric/profiles/default.profile/org.ops4j.pax.logging.properties","log4j.appender.out.maxFileSize","10MB"),KarafDistributionOption.editConfigurationFilePut("fabric/import/fabric/profiles/default.profile/org.ops4j.pax.logging.properties","log4j.appender.out.append","true"),KarafDistributionOption.editConfigurationFilePut("fabric/import/fabric/profiles/default.profile/org.ops4j.pax.logging.properties","log4j.appender.out.file","${karaf.home}/data/log/karaf-${karaf.name}.log"),KarafDistributionOption.editConfigurationFilePut("etc/org.apache.felix.fileinstall-deploy.cfg","felix.fileinstall.active.level","45"),KarafDistributionOption.editConfigurationFilePut("etc/org.apache.felix.fileinstall-deploy.cfg","felix.fileinstall.noInitialDelay","true"),KarafDistributionOption.editConfigurationFilePut("etc/org.apache.felix.fileinstall-deploy.cfg","felix.fileinstall.poll","250"),KarafDistributionOption.editConfigurationFilePut("etc/config.properties","karaf.startlevel.bundle","50"),KarafDistributionOption.editConfigurationFilePut("etc/config.properties","karaf.startup.message","Loading Fabric from: ${karaf.home}"),KarafDistributionOption.editConfigurationFilePut("etc/users.properties","admin","admin,admin"),CoreOptions.mavenBundle("io.fabric8.itests","fabric-itests-common").versionAsInProject(),CoreOptions.mavenBundle("io.fabric8.tooling.testing","pax-exam-karaf").versionAsInProject(),new DoNotModifyLogOption(),KarafDistributionOption.keepRuntimeFolder()};
}
