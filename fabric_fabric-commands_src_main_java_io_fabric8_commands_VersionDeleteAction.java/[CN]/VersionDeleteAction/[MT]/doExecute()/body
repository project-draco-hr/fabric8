{
  Version version=profileService.getRequiredVersion(versionId);
  StringBuilder sb=new StringBuilder();
  for (  Container container : fabricService.getContainers()) {
    if (version.equals(container.getVersion())) {
      if (sb.length() > 0) {
        sb.append(", ");
      }
      sb.append(container.getId());
    }
  }
  IllegalStateAssertion.assertTrue(sb.length() == 0,"Version " + versionId + " is still in used by the following containers: "+ sb);
  profileService.deleteVersion(versionId);
  return null;
}
