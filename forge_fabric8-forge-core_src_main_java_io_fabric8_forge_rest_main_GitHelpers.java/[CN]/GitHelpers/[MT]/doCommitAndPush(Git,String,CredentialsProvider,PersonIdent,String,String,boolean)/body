{
  CommitCommand commit=git.commit().setAll(true).setMessage(message);
  if (author != null) {
    commit=commit.setAuthor(author);
  }
  RevCommit answer=commit.call();
  if (LOG.isDebugEnabled()) {
    LOG.debug("Committed " + answer.getId() + " "+ answer.getFullMessage());
  }
  if (pushOnCommit) {
    Iterable<PushResult> results=git.push().setCredentialsProvider(credentials).setRemote(origin).call();
    for (    PushResult result : results) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Pushed " + result.getMessages() + " "+ result.getURI()+ " branch: "+ branch+ " updates: "+ toString(result.getRemoteUpdates()));
      }
    }
  }
  return answer;
}
