{
  if (LOCK_GLOBAL.equals(q.getLock())) {
    return "/fabric/registry/clusters/insight-metrics/global/" + q.getName();
  }
 else   if (LOCK_HOST.equals(q.getLock())) {
    String host;
    try {
      host=InetAddress.getLocalHost().getHostName();
    }
 catch (    UnknownHostException e) {
      throw new IllegalStateException("Unable to retrieve host name",e);
    }
    return "/fabric/registry/clusters/insight-metrics/host-" + host + "/"+ q.getName();
  }
 else {
    throw new IllegalArgumentException("Unknown lock type: " + q.getLock());
  }
}
