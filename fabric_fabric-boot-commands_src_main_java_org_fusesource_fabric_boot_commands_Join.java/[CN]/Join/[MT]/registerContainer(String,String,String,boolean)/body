{
  boolean exists=false;
  CuratorFramework curator=null;
  try {
    CuratorFrameworkFactory.Builder builder=CuratorFrameworkFactory.builder().connectString(zookeeperUrl).retryPolicy(new RetryOneTime(1000)).connectionTimeoutMs(60000);
    if (registryPassword != null && !registryPassword.isEmpty()) {
      builder.authorization("digest",("fabric:" + registryPassword).getBytes());
    }
    curator=builder.build();
    curator.start();
    curator.getZookeeperClient().blockUntilConnectedOrTimedOut();
    exists=exists(curator,ZkPath.CONTAINER.getPath(name)) != null;
    if (!exists || force) {
      ZkPath.createContainerPaths(curator,containerName,version,profile);
    }
  }
  finally {
    if (curator != null) {
      curator.close();
    }
  }
  return !exists || force;
}
