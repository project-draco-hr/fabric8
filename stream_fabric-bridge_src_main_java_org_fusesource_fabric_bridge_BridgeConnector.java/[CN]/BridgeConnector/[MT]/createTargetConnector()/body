{
  if (inboundDestinations != null) {
    inboundConnector=new TargetConnector();
    inboundConnector.setAutoStartup(isAutoStartup());
    inboundConnector.setPhase(getPhase());
    inboundConnector.setInboundDestinations(inboundDestinations);
    inboundConnector.setLocalBrokerConfig(localBrokerConfig);
    if (!inboundDestinations.isDefaultStagingLocation()) {
      inboundConnector.setRemoteBrokerConfig(remoteBrokerConfig);
    }
    try {
      inboundConnector.afterPropertiesSet();
    }
 catch (    Exception e) {
      String msg="Error creating inbound connector: " + e.getMessage();
      LOG.error(msg,e);
      throw new IllegalArgumentException(msg,e);
    }
    LOG.info("Inbound connector created");
  }
}
