{
  String[] mqBoxes={"mq1","mq2"};
  String[] esbBoxes={"esb1","esb2","esb3","esb4"};
  FabricRequirements requirements=new FabricRequirements();
  requirements.sshConfiguration().defaultUsername("root");
  for (  String box : mqBoxes) {
    requirements.sshHost(box).tags("mq");
  }
  for (  String box : esbBoxes) {
    requirements.sshHost(box).tags("esb");
  }
  requirements.profile(mqProfileId).minimumInstances(2).sshScaling().hostTags("mq");
  requirements.profile(exampleProfileId).minimumInstances(8).dependentProfiles(mqProfileId).sshScaling().hostTags("esb");
  HostProfileCounter hostProfileCounter=assertSshAutoScale(requirements);
  for (  String box : mqBoxes) {
    assertHostHasProfileCount(hostProfileCounter,box,mqProfileId,1);
  }
  for (  String box : esbBoxes) {
    assertHostHasProfileCount(hostProfileCounter,box,exampleProfileId,2);
  }
  dumpHostProfiles(hostProfileCounter);
}
