{
  validateNamespace(namespace,entity);
  WebClient webClient=getFactory().createWebClient();
  String name=getName(entity);
  RouteSpec spec=entity.getSpec();
  String host=null;
  String serviceName=null;
  if (spec != null) {
    host=spec.getHost();
    ObjectReference to=spec.getTo();
    if (to != null) {
      serviceName=to.getName();
    }
  }
  if (Strings.isNullOrBlank(host)) {
    throw new IllegalArgumentException("No host defined!");
  }
  if (Strings.isNullOrBlank(serviceName)) {
    throw new IllegalArgumentException("No to.name defined!");
  }
  String json="{ \"kind\": \"Route\", \"apiVersion\": \"v1beta1\",  \"metadata\": { \"name\": \"" + name + "\"}, \"host\": \""+ host+ "\", \"serviceName\": \""+ serviceName+ "\"}";
  System.out.println("Posting JSON: " + json);
  Response response=webClient.path("/osapi/v1beta1/routes").query("namespace",namespace).post(json);
  Object responseEntity=response.getEntity();
  if (responseEntity instanceof InputStream) {
    InputStream inputStream=(InputStream)responseEntity;
    try {
      responseEntity=IOHelpers.readFully(inputStream);
    }
 catch (    IOException e) {
      LOG.error("Failed to parse response: " + e,e);
    }
  }
  System.out.println("Result: " + responseEntity);
  int status=response.getStatus();
  System.out.println("Posted and got result: " + status);
}
