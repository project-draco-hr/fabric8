{
  int rc=0;
  setDoff(calculateDataOffset());
  setSize(getFrameSize());
  rc+=channel.write(header.toByteBuffer());
  rc+=channel.write(extHeader.toByteBuffer());
  if (body != null) {
    rc+=channel.write(body.toByteBuffer());
  }
  return rc;
}
