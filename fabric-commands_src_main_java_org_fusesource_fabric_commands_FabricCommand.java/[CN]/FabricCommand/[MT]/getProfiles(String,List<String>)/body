{
  Map<String,Profile> allProfiles=profileService.getProfiles(version);
  List<Profile> profiles=new ArrayList<Profile>();
  if (names == null) {
    return new Profile[0];
  }
  for (  String name : names) {
    Profile profile=null;
    for (    Profile p : allProfiles.values()) {
      if (name.equals(p.getName())) {
        profile=p;
        break;
      }
    }
    if (profile == null) {
      throw new IllegalArgumentException("Profile not found: " + name);
    }
    profiles.add(profile);
  }
  return profiles.toArray(new Profile[profiles.size()]);
}
