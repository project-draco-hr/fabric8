{
  this.vertx=vertx;
  this.httpGateway=httpGateway;
  String host=null;
  try {
    InetAddress initAddress=InetAddress.getByName("ELASTICSEARCH");
    host=initAddress.getCanonicalHostName();
  }
 catch (  UnknownHostException e) {
    System.out.println("INFO: Could not resolve DNS for ELASTICSEARCH, trying ENV settings next.");
  }
  String hostAndPort=Systems.getServiceHostAndPort("ELASTICSEARCH","localhost","9200");
  String[] hp=hostAndPort.split(":");
  if (host == null) {
    System.out.println("ELASTICSEARCH host:port is set to " + hostAndPort + " using ENV settings.");
    host=hp[0];
  }
  String protocol=Systems.getEnvVarOrSystemProperty("ELASTICSEARCH_PROTOCOL","http");
  System.out.println("*** Connecting to Elastic at service " + protocol + "://"+ host+ ":"+ hp[1]);
  esConfig.put("client.type","jest");
  esConfig.put("client.host",host);
  esConfig.put("client.port",hp[1]);
  esConfig.put("client.protocol",protocol);
  esConfig.put("client.cluster-name","elasticsearch");
}
