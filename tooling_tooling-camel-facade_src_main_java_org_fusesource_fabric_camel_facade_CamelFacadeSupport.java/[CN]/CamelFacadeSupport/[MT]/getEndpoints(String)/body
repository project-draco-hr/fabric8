{
  String id=managementName != null ? managementName : camelContextManagementName;
  ObjectName query=ObjectName.getInstance("org.apache.camel:context=*/" + id + ",type=endpoints,*");
  Set<ObjectInstance> names=queryNames(query,null);
  List<CamelEndpointMBean> answer=new ArrayList<CamelEndpointMBean>();
  for (  ObjectInstance on : names) {
    CamelEndpointMBean endpoint;
    if (ManagedBrowsableEndpoint.class.getName().equals(on.getClassName()) || SedaEndpoint.class.getName().equals(on.getClassName())) {
      endpoint=(CamelEndpointMBean)newProxyInstance(on.getObjectName(),CamelBrowsableEndpointMBean.class,true);
    }
 else     if (on.getClassName().startsWith("org.apache.camel.component.jms")) {
      endpoint=(CamelEndpointMBean)newProxyInstance(on.getObjectName(),CamelBrowsableEndpointMBean.class,true);
    }
 else {
      endpoint=(CamelEndpointMBean)newProxyInstance(on.getObjectName(),CamelEndpointMBean.class,true);
    }
    answer.add(endpoint);
  }
  return answer;
}
