{
  String region=AWSUtils.parseHandle(node.getId())[0];
  EC2Client ec2Client=service.getContext().unwrap(EC2ApiMetadata.CONTEXT_TOKEN).getApi();
  String groupName="jclouds#" + node.getGroup();
  for (  int port : ports) {
    try {
      ec2Client.getSecurityGroupServices().authorizeSecurityGroupIngressInRegion(region,groupName,IpProtocol.TCP,port,port,source);
    }
 catch (    IllegalStateException e) {
    }
  }
}
