{
  String[] infos=null;
  StringBuffer userInfoBuffer=new StringBuffer();
  String newPassword=password;
  if (encryptionSupport != null && encryptionSupport.getEncryption() != null) {
    newPassword=encryptionSupport.getEncryption().encryptPassword(password);
  }
  String userInfos=(String)users.get(username);
  if (userInfos != null && userInfos.length() > 0) {
    infos=userInfos.split(",");
    userInfoBuffer.append(newPassword);
    for (int i=1; i < infos.length; i++) {
      userInfoBuffer.append(",");
      userInfoBuffer.append(infos[i]);
    }
    String newUserInfo=userInfoBuffer.toString();
    users.put(username,newUserInfo);
  }
 else {
    users.put(username,newPassword);
  }
  try {
    users.save();
  }
 catch (  Exception ex) {
    LOGGER.error("Cannot update users file,",ex);
  }
}
