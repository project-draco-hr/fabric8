{
  CreateContainerMetadata[] metadata=null;
  validateProfileNames(profiles);
  preCreateContainer(name);
  validateParentContainer(parent);
  String jmxUser=username != null ? username : ShellUtils.retrieveFabricUser(session);
  String jmxPassword=password != null ? password : ShellUtils.retrieveFabricUserPassword(session);
  CreateChildContainerOptions.Builder builder=CreateChildContainerOptions.builder().name(name).parent(parent).bindAddress(bindAddress).resolver(resolver).manualIp(manualIp).ensembleServer(isEnsembleServer).number(number).zookeeperUrl(fabricService.getZookeeperUrl()).zookeeperPassword(fabricService.getZookeeperPassword()).jvmOpts(jvmOpts).jmxUser(jmxUser).jmxPassword(jmxPassword).version(version).profiles(getProfileNames()).dataStoreProperties(getDataStoreProperties());
  try {
    metadata=fabricService.createContainers(builder.build());
    rethrowAuthenticationErrors(metadata);
    ShellUtils.storeFabricCredentials(session,jmxUser,jmxPassword);
  }
 catch (  FabricAuthenticationException ex) {
    username=null;
    password=null;
    promptForJmxCredentialsIfNeeded();
    metadata=fabricService.createContainers(builder.jmxUser(username).jmxPassword(password).build());
    ShellUtils.storeFabricCredentials(session,username,password);
  }
  displayContainers(metadata);
  return null;
}
