{
  this.bundleContext=bundleContext;
  ServiceReference serviceReference=bundleContext.getServiceReference("org.osgi.service.cm.ConfigurationAdmin");
  ConfigurationAdmin configurationAdmin=(ConfigurationAdmin)bundleContext.getService(serviceReference);
  File data=new File(System.getProperty("karaf.data","."));
  registry.setDirectory(new File(data,"fab-module-registry"));
  registry.setConfigurationAdmin(configurationAdmin);
  registry.setPid("io.fabric.fab.osgi.registry");
  registry.load();
  super.start(bundleContext);
}
