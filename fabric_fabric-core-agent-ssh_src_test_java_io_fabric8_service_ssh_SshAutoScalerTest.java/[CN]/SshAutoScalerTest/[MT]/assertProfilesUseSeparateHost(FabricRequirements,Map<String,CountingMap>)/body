{
  for (  Map.Entry<String,CountingMap> entry : hostToProfileCounts.entrySet()) {
    String hostName=entry.getKey();
    CountingMap counts=entry.getValue();
    Set<String> keys=counts.keySet();
    for (    String profileId : keys) {
      int count=counts.count(profileId);
      ProfileRequirements profileRequirement=requirements.getOrCreateProfileRequirement(profileId);
      Integer maximum=profileRequirement.getMaximumInstancesPerHost();
      if (maximum != null) {
        assertTrue("Host " + hostName + " has "+ count+ " instances of "+ profileId+ " but this is configured to have a maximium of "+ maximum+ " per host",count <= maximum);
      }
    }
  }
}
