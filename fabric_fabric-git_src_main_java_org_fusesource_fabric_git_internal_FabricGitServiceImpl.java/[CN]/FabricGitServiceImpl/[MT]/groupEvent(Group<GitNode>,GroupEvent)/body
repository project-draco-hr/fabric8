{
  String masterUrl=null;
  GitNode master=group.master();
  if (master != null && !master.getContainer().equals(System.getProperty("karaf.name"))) {
    masterUrl=master.getUrl();
  }
  try {
    Git git=get();
    StoredConfig config=git.getRepository().getConfig();
    if (masterUrl != null) {
      config.setString("remote","origin","url",getSubstitutedData(curator,masterUrl));
      config.setString("remote","origin","fetch","+refs/heads/*:refs/remotes/origin/*");
    }
 else {
      config.unsetSection("remote","origin");
    }
    config.save();
    if (gitService != null) {
      String login=getContainerLogin();
      String token=generateContainerToken(curator);
      CredentialsProvider cp=new UsernamePasswordCredentialsProvider(login,token);
      gitService.setCredentialsProvider(cp);
      gitService.onRemoteChanged();
    }
  }
 catch (  Exception e) {
    LOGGER.error("Failed to point origin to the new master.",e);
  }
}
