{
  File localRepo=new File(DEFAULT_LOCAL_LOCATION);
  if (!localRepo.exists() && !localRepo.mkdirs()) {
    throw new IOException("Failed to create local repository");
  }
  try {
    return Git.open(localRepo);
  }
 catch (  RepositoryNotFoundException e) {
    try {
      Git git=Git.init().setDirectory(localRepo).call();
      Files.writeToFile(new File(localRepo,"README"),"",Charset.forName("UTF-8"));
      git.add().addFilepattern("README").call();
      git.commit().setMessage("First Commit").setCommitter("fabric","user@fabric").call();
      return git;
    }
 catch (    GitAPIException ex) {
      throw new IOException(ex);
    }
  }
}
