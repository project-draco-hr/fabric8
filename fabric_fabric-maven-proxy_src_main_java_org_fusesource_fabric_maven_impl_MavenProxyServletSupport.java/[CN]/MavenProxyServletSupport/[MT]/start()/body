{
  if (!tmpFolder.exists()) {
    tmpFolder.mkdirs();
  }
  if (localRepository.equals("")) {
    localRepository=System.getProperty("user.home") + File.separator + ".m2"+ File.separator+ "repository";
  }
  if (system == null) {
    system=newRepositorySystem();
  }
  if (session == null) {
    session=newSession(system,localRepository);
  }
  repositories=new ArrayList<RemoteRepository>();
  repositories.add(new RemoteRepository("local","default","file://" + localRepository));
  repositories.add(new RemoteRepository("karaf.default.repo","default","file://" + System.getProperty("karaf.home") + File.separator+ System.getProperty("karaf.default.repository")));
  int i=0;
  for (  String rep : remoteRepositories.split(",")) {
    RemoteRepository remoteRepository=new RemoteRepository("repo-" + i++,"default",rep);
    remoteRepository.setPolicy(true,new RepositoryPolicy(true,updatePolicy,checksumPolicy));
    repositories.add(remoteRepository);
  }
}
