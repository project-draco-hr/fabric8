{
  assertNotNull("FabricController",controller);
  assertNotNull("FabricRequirements",requirements);
  waitForValidValue(30 * 1000,new Callable<Object>(){
    @Override public Object call() throws Exception {
      controller.setRequirements(requirements);
      FabricRequirements actual=controller.getRequirements();
      String actualVersion=actual.getVersion();
      actual.setVersion(requirements.getVersion());
      requirements.sortProfilesRequirements();
      actual.sortProfilesRequirements();
      boolean answer=RequirementsJson.equal(requirements,actual);
      if (answer) {
        System.out.println("Updated the requirements to: " + RequirementsJson.toJSON(requirements));
      }
 else {
        System.out.println("Expected: " + RequirementsJson.toJSON(requirements));
        System.out.println("Actual:   " + RequirementsJson.toJSON(actual));
        System.out.println();
      }
      return answer;
    }
  }
);
  assertRequirementsSatisfied(controller,requirements);
  return controller;
}
