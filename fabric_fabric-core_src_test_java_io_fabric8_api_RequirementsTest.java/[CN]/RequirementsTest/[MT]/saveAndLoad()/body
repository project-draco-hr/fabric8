{
  List<ProfileRequirements> profiles=new ArrayList<ProfileRequirements>();
  String mqProfileId="mq-default";
  String exampleProfileId="quickstarts-karaf-camel-amq";
  ProfileRequirements dummy=new ProfileRequirements("dummy",1,null,mqProfileId);
  profiles.add(dummy);
  profiles.add(new ProfileRequirements(mqProfileId,1,5));
  profiles.add(new ProfileRequirements(exampleProfileId,1,null,mqProfileId));
  assertEquals(false,dummy.checkIsEmpty());
  dummy.setDependentProfiles(null);
  dummy.setMinimumInstances(0);
  assertEquals(true,dummy.checkIsEmpty());
  dummy.setMinimumInstances(null);
  assertEquals(true,dummy.checkIsEmpty());
  FabricRequirements requirements=new FabricRequirements(profiles);
  requirements.removeEmptyRequirements();
  String json=RequirementsJson.toJSON(requirements);
  System.out.println("JSON: " + json);
  FabricRequirements actual=RequirementsJson.fromJSON(json);
  List<ProfileRequirements> profileRequirements=actual.getProfileRequirements();
  assertEquals("size",2,profileRequirements.size());
  ProfileRequirements profileMq=profileRequirements.get(0);
  assertEquals("name",mqProfileId,profileMq.getProfile());
  assertEquals("minimumInstances",new Integer(1),profileMq.getMinimumInstances());
  assertEquals("maximumInstances",new Integer(5),profileMq.getMaximumInstances());
  ProfileRequirements profileCamel=profileRequirements.get(1);
  assertEquals("name",exampleProfileId,profileCamel.getProfile());
  assertEquals("minimumInstances",new Integer(1),profileCamel.getMinimumInstances());
  assertEquals("maximumInstances",null,profileCamel.getMaximumInstances());
  assertEquals("profiles",new ArrayList<String>(Arrays.asList(mqProfileId)),profileCamel.getDependentProfiles());
}
