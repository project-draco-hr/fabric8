{
  List<MQBrokerConfigDTO> answer=new ArrayList<MQBrokerConfigDTO>();
  Map<String,Map<String,String>> configurations=profile.getConfigurations();
  Set<Map.Entry<String,Map<String,String>>> entries=configurations.entrySet();
  for (  Map.Entry<String,Map<String,String>> entry : entries) {
    String key=entry.getKey();
    Map<String,String> configuration=entry.getValue();
    if (isBrokerConfigPid(key)) {
      String brokerName=getBrokerNameFromPID(key);
      String profileId=profile.getId();
      MQBrokerConfigDTO dto=new MQBrokerConfigDTO();
      dto.setProfile(profileId);
      dto.setBrokerName(brokerName);
      String version=profile.getVersion();
      dto.setVersion(version);
      List<String> parentIds=profile.getParentIds();
      if (parentIds.size() > 0) {
        dto.setParentProfile(parentIds.get(0));
      }
      if (configuration != null) {
        dto.setData(configuration.get(DATA));
        dto.setConfigUrl(configuration.get(CONFIG_URL));
        dto.setGroup(configuration.get(GROUP));
        dto.setKind(BrokerKind.fromValue(configuration.get(KIND)));
        dto.setMinimumInstances(Maps.integerValue(configuration,MINIMUM_INSTANCES));
        dto.setNetworks(Maps.stringValues(configuration,NETWORKS));
        dto.setNetworksUserName(configuration.get(NETWORK_USER_NAME));
        dto.setNetworksPassword(configuration.get(NETWORK_PASSWORD));
        dto.setReplicas(Maps.integerValue(configuration,REPLICAS));
        for (        Map.Entry<String,String> configurationEntry : configuration.entrySet()) {
          if (configurationEntry.getKey().endsWith("-port")) {
            dto.getPorts().put(configurationEntry.getKey().substring(0,configurationEntry.getKey().indexOf("-port")),configurationEntry.getValue());
          }
        }
      }
      answer.add(dto);
    }
  }
  return answer;
}
