{
  String filter="(" + FABRIC_ZOOKEEPER_PID + "="+ zooKeeperPid+ ")";
  Configuration[] oldConfiguration=configAdmin.listConfigurations(filter);
  if (oldConfiguration != null && oldConfiguration.length > 0) {
    return oldConfiguration[0];
  }
 else {
    Configuration newConfiguration;
    if (factoryPid != null) {
      newConfiguration=configAdmin.createFactoryConfiguration(pid,null);
    }
 else {
      newConfiguration=configAdmin.getConfiguration(pid,null);
    }
    return newConfiguration;
  }
}
