{
  ObjectMapper mapper=DtoHelper.getMapper();
  byte[] json=mapper.writeValueAsBytes(requirements);
  String fileName=DtoHelper.getRequirementsConfigFileName(requirements);
  ProfileRegistry profileRegistry=fabricService.get().adapt(ProfileRegistry.class);
  byte[] oldData=profile.getFileConfiguration(fileName);
  LOG.info("Writing file " + fileName + " to profile "+ profile);
  ProfileBuilder builder=ProfileBuilder.Factory.createFrom(profile);
  builder.addFileConfiguration(fileName,json);
  profileRegistry.updateProfile(builder.getProfile());
  if (oldData == null || oldData.length == 0) {
    return null;
  }
 else {
    return mapper.reader(ProjectRequirements.class).readValue(oldData);
  }
}
