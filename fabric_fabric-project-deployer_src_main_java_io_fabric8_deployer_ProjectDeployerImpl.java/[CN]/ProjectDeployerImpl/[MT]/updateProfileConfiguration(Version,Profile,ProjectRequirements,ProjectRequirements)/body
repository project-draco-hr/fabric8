{
  List<String> parentProfiles=Containers.getParentProfileIds(profile);
  List<String> bundles=profile.getBundles();
  List<String> features=profile.getFeatures();
  List<String> repositories=profile.getRepositories();
  if (oldRequirements != null) {
    removeAll(parentProfiles,oldRequirements.getParentProfiles());
    removeAll(bundles,oldRequirements.getBundles());
    removeAll(features,oldRequirements.getFeatures());
    removeAll(repositories,oldRequirements.getFeatureRepositories());
  }
  addAll(parentProfiles,requirements.getParentProfiles());
  addAll(bundles,requirements.getBundles());
  addAll(features,requirements.getFeatures());
  addAll(repositories,requirements.getFeatureRepositories());
  Containers.setParentProfileIds(version,profile,parentProfiles);
  profile.setBundles(bundles);
  profile.setFeatures(features);
  profile.setRepositories(repositories);
  String webContextPath=requirements.getWebContextPath();
  if (!Strings.isEmpty(webContextPath)) {
    Map<String,String> contextPathConfig=profile.getConfiguration(ChildConstants.WEB_CONTEXT_PATHS_PID);
    if (contextPathConfig == null) {
      contextPathConfig=new HashMap<String,String>();
    }
    String key=requirements.getGroupId() + "/" + requirements.getArtifactId();
    String current=contextPathConfig.get(key);
    if (!Objects.equal(current,webContextPath)) {
      contextPathConfig.put(key,webContextPath);
      profile.setConfiguration(ChildConstants.WEB_CONTEXT_PATHS_PID,contextPathConfig);
    }
  }
  String description=requirements.getDescription();
  if (!Strings.isEmpty(description)) {
    String fileName="Summary.md";
    byte[] data=profile.getFileConfiguration(fileName);
    if (data == null || data.length == 0 || new String(data).trim().length() == 0) {
      profile.setConfigurationFile(fileName,description.getBytes());
    }
  }
}
