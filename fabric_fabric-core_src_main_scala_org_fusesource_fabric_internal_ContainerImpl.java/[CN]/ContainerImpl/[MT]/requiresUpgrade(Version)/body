{
  Boolean requiresUpgrade=false;
  Profile[] oldProfiles=getProfiles();
  if (version.compareTo(getVersion()) == 0) {
    return false;
  }
  for (int i=0; i < oldProfiles.length; i++) {
    Profile newProfile=version.getProfile(oldProfiles[i].getId());
    if (!oldProfiles[i].configurationEquals(newProfile)) {
      requiresUpgrade=true;
    }
  }
  return requiresUpgrade;
}
