{
  Set<String> profileIds=options.getProfiles();
  String versionId=options.getVersion();
  List<Profile> profiles=Profiles.getProfiles(fabricService,profileIds,versionId);
  Map<String,File> javaArtifacts=JavaContainers.getJavaContainerArtifactsFiles(fabricService,profiles,downloadExecutor);
  InstallOptions.InstallOptionsBuilder builder=InstallOptions.builder();
  builder.jarFiles(javaArtifacts.values());
  builder.id(options.getName());
  builder.environment(environmentVariables);
  String mainClass=environmentVariables.get(ChildConstants.JAVA_CONTAINER_ENV_VARS.FABRIC8_JAVA_MAIN);
  String name=mainClass;
  if (Strings.isNullOrBlank(name)) {
    name="java";
  }
  builder.name(name);
  builder.mainClass(mainClass);
  return builder.build();
}
