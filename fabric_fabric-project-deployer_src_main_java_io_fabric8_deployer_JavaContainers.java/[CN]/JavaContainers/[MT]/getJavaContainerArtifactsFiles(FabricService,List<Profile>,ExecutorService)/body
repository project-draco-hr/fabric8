{
  DownloadManager downloadManager=DownloadManagers.createDownloadManager(fabric,downloadExecutor);
  Map<String,File> answer=new HashMap<String,File>();
  for (  Profile profile : profileList) {
    Map<String,Parser> profileArtifacts=AgentUtils.getProfileArtifacts(downloadManager,profile);
    appendMavenDependencies(profileArtifacts,profile);
    Set<String> rawUrls=profileArtifacts.keySet();
    List<String> cleanUrlsToDownload=new ArrayList<String>();
    for (    String rawUrl : rawUrls) {
      String mvnUrl=rawUrl;
      int idx=mvnUrl.indexOf(":mvn:");
      if (idx > 0) {
        mvnUrl=mvnUrl.substring(idx + 1);
      }
      cleanUrlsToDownload.add(mvnUrl);
    }
    Map<String,File> profileFiles=AgentUtils.downloadLocations(downloadManager,cleanUrlsToDownload);
    if (profileFiles != null) {
      answer.putAll(profileFiles);
    }
  }
  return answer;
}
