{
  DownloadManager downloadManager=DownloadManagers.createDownloadManager(fabric,downloadExecutor);
  Map<String,File> answer=new HashMap<String,File>();
  for (  Profile profile : profileList) {
    Map<String,Parser> profileArtifacts=AgentUtils.getProfileArtifacts(fabric,downloadManager,profile.getOverlay());
    appendMavenDependencies(profileArtifacts,profile);
    Set<String> rawUrls=profileArtifacts.keySet();
    List<String> cleanUrlsToDownload=new ArrayList<String>();
    for (    String rawUrl : rawUrls) {
      String mvnUrl=removeUriPrefixBeforeMaven(rawUrl);
      cleanUrlsToDownload.add(mvnUrl);
    }
    Map<String,File> profileFiles=AgentUtils.downloadLocations(downloadManager,cleanUrlsToDownload);
    if (profileFiles != null) {
      answer.putAll(profileFiles);
    }
  }
  return answer;
}
