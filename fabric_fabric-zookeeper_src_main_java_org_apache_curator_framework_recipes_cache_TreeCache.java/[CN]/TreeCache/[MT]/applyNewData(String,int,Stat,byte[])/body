{
  if (resultCode == KeeperException.Code.OK.intValue()) {
    ChildData data=new ChildData(fullPath,stat,bytes);
    ChildData previousData=null;
synchronized (this) {
      previousData=currentData.getIfPresent(fullPath);
      currentData.put(fullPath,data);
    }
    if (previousData == null) {
      offerOperation(new TreeEventOperation(this,new PathChildrenCacheEvent(PathChildrenCacheEvent.Type.CHILD_ADDED,data)));
    }
 else     if (previousData.getStat().getVersion() != stat.getVersion()) {
      offerOperation(new TreeEventOperation(this,new PathChildrenCacheEvent(PathChildrenCacheEvent.Type.CHILD_UPDATED,data)));
    }
    updateInitialSet(ZKPaths.getNodeFromPath(fullPath),data);
  }
}
