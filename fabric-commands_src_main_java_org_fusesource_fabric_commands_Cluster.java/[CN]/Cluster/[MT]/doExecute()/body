{
  if (clean) {
    if (add || remove) {
      throw new IllegalArgumentException("Invalid syntax.  zk-cluster --clean should be used without add or remove options");
    }
    service.clean();
    if (agents != null && !agents.isEmpty()) {
      service.createCluster(agents);
    }
  }
 else   if (agents == null || agents.isEmpty()) {
    List<String> cluster=service.getClusterAgents();
    if (cluster == null || cluster.isEmpty()) {
      throw new IllegalStateException("No ZooKeeper server set up.  Use \"fabric:cluster " + System.getProperty("karaf.name") + "\" to set up one.");
    }
 else {
      System.out.println("ZooKeeper cluster url:");
      System.out.println("  " + service.getZooKeeperUrl());
      System.out.println("ZooKeeper agents: ");
      for (      String agent : service.getClusterAgents()) {
        System.out.println("  " + agent);
      }
    }
  }
 else   if (add) {
    service.addToCluster(agents);
  }
 else   if (remove) {
    service.removeFromCluster(agents);
  }
 else {
    service.createCluster(agents);
  }
  return null;
}
