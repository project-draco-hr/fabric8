{
  try {
    GitService optsrv=gitService.getOptional();
    if (optsrv != null) {
      optsrv.removeGitListener(gitListener);
    }
    if (threadPool != null) {
      threadPool.shutdown();
      try {
        threadPool.awaitTermination(5,TimeUnit.SECONDS);
      }
 catch (      Exception ex) {
        throw new FabricException(ex);
      }
    }
  }
  finally {
    super.stop();
  }
}
