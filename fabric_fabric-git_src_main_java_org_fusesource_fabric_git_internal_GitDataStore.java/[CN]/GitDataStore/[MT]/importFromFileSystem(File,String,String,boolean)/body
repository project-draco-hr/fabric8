{
  assertValid();
  gitOperation(new GitOperation<Void>(){
    public Void call(    Git git,    GitContext context) throws Exception {
      createVersion(version);
      checkoutVersion(git,version);
      File toDir=GitHelpers.getRootGitDirectory(git);
      if (Strings.isNotBlank(destinationPath)) {
        toDir=new File(toDir,destinationPath);
      }
      if (isProfileDir && useDirectoriesForProfiles) {
        recursiveAddLegacyProfileDirectoryFiles(git,from,toDir,destinationPath);
      }
 else {
        recursiveCopyAndAdd(git,from,toDir,destinationPath,true);
      }
      context.setPushBranch(version);
      context.commit("Imported from " + from);
      return null;
    }
  }
);
}
