{
  if (inboundDestinations != null && inboundDestinations.isUseStagingQueue()) {
    inboundConnector=new TargetConnector();
    inboundConnector.setAutoStartup(isAutoStartup());
    inboundConnector.setPhase(getPhase());
    inboundConnector.setInboundDestinations(inboundDestinations);
    inboundConnector.setLocalBrokerConfig(localBrokerConfig);
    if (!inboundDestinations.isDefaultStagingLocation()) {
      inboundConnector.setRemoteBrokerConfig(remoteBrokerConfig);
    }
    try {
      inboundConnector.afterPropertiesSet();
    }
 catch (    Exception e) {
      String msg="Error creating inbound connector: " + e.getMessage();
      LOG.error(msg,e);
      throw new IllegalArgumentException(msg,e);
    }
    LOG.info("Inbound connector created");
  }
 else   if (inboundDestinations != null && !inboundDestinations.isUseStagingQueue()) {
    LOG.info("Inbound connector NOT created since a staging queue is not used");
  }
 else   if (inboundDestinations == null) {
    LOG.info("Inbound connector NOT created since inbound destinations are not configured");
  }
}
