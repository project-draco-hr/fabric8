{
  String v="1.0";
  String profileId="feature-camel";
  Version version=null;
  List<String> profiles=Arrays.asList(profileId);
  expect(profileService.getRequiredVersion(eq(v))).andReturn(version).anyTimes();
  expect(dataStore.getContainerVersion(eq(CONTAINER_ID))).andReturn(v).anyTimes();
  expect(dataStore.getContainerProfiles(eq(CONTAINER_ID))).andReturn(profiles).anyTimes();
  expect(dataStore.hasProfile(v,profileId)).andReturn(true).anyTimes();
  replay(fabricService);
  replay(dataStore);
  Profile[] p=container.getProfiles();
  assertNotNull(p);
  assertEquals(1,p.length);
  assertEquals(profileId,p[0].getId());
  verify(fabricService);
  verify(dataStore);
}
