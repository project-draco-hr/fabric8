{
switch (event) {
case CONNECTED:
case CHANGED:
    WorkerNode state=createNode();
  if (group.isMaster()) {
    repository.start();
    state.setServices(new String[]{context.getId()});
    group.update(state);
    partitionUpdated();
  }
 else {
    group.update(state);
    repository.stop();
  }
break;
case DISCONNECTED:
repository.stop();
}
}
